#!/usr/bin/python
#####################################################################
# This script cleans up the html code generated by Dymola.
# It also adds a link to the style sheet used by the Buildings
# library.
# 
# This script should be run from the "help" directory generated
# by Dymola.
#
# MWetter@lbl.gov                                          2013-04-04
#####################################################################
import os
for root, dirs, filenames in os.walk("."):
    for fn in filenames:
        if fn.endswith(".html"):
            fi = open(os.path.join(helpDir, fn), 'r')
            fc = fi.read()
            fi.close()
            # Add the style sheet
            fc = fc.replace("</HEAD>", 
                            "<link rel=\"stylesheet\" type=\"text/css\" charset=\"utf-8\" media=\"all\" href=\"../Resources/www/modelicaDoc.css\">\n</HEAD>")
            # Remove unnecessary html code
            fc = fc.replace("<PRE></pre>", "")
            fc = fc.replace("<pre></PRE>", "")
            fi = open(os.path.join(helpDir, fn), 'w')
            fi.write(fc)
            fi.close()
