<HTML>
<HEAD>
<TITLE>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Package with base classes for Buildings.BoundaryConditions.SolarGeometry&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry.html#Buildings.BoundaryConditions.SolarGeometry"
>Buildings.BoundaryConditions.SolarGeometry</A>.BaseClasses</H2>
<B>Package with base classes for Buildings.BoundaryConditions.SolarGeometry</B>
<P></P>
<P></P><H3>Information</H3>

<p>
This package contains base classes that are used to construct the models in
<A HREF="Buildings_BoundaryConditions_SolarGeometry.html#Buildings.BoundaryConditions.SolarGeometry"
>Buildings.BoundaryConditions.SolarGeometry</a>.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</A> (Icon for packages containing base classes).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi907e56695d89b2f5ationS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination"
>Declination</A>
</TD><TD>Declination angle</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi62abdc2cbd8e9446AngleS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.IncidenceAngle" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.IncidenceAngle"
>IncidenceAngle</A>
</TD><TD>The solar incidence angle on a tilted surface</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditie01031344d4d5850imuthS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarAzimuth" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarAzimuth"
>SolarAzimuth</A>
</TD><TD>Solar azimuth</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi7be9dfb7042c797fAngleS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle"
>SolarHourAngle</A>
</TD><TD>Solar hour angle</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditic05dbaf413fc87b1AngleS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle"
>ZenithAngle</A>
</TD><TD>Zenith angle</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi0dcc6b7812f7c14aAngleS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle"
>AltitudeAngle</A>
</TD><TD>Solar altitude angle</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi1c0c2aea59196568imuthS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.WallSolarAzimuth" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.WallSolarAzimuth"
>WallSolarAzimuth</A>
</TD><TD>Angle measured in a horizontal plane between the projection of the sun&#39;s rays and the normal to a vertical surface</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi095f1d8e9aea339bmplesS.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses_Examples.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Examples"
>Examples</A>
</TD><TD>Collection of models that illustrate model use and test models</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Declination<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi907e56695d89b2f5ationI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.Declination</H2>
<B>Declination angle</B><p></P>
<IMG SRC="Buildings.BoundaryConditi907e56695d89b2f5ationD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination">
<P></P><H3>Information</H3>

<p>
This component computes the angle between the equatorial plane and the solar beam.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>nDay</TD><TD>One-based day number in seconds [s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>decAng</TD><TD>Declination angle [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Declination <font color="darkgreen">&quot;Declination angle&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">public </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> nDay(quantity=&quot;Time&quot;, unit=&quot;s&quot;) <font color="darkgreen">
    &quot;One-based day number in seconds&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> decAng(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Declination angle&quot;</font>;</textblock>
<font color="blue">equation </font>
  decAng =<font color="red"> Modelica.Math.asin</font>(-<font color="red">sin</font>(23.45*2*Modelica.Constants.pi/360)*
    <font color="red">Modelica.Math.cos</font>((nDay/86400 + 10)*2*Modelica.Constants.pi/365.25)) <font color="darkgreen">
    &quot;(A4.5)&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Declination;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE IncidenceAngle<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi62abdc2cbd8e9446AngleI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.IncidenceAngle" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.IncidenceAngle"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.IncidenceAngle</H2>
<B>The solar incidence angle on a tilted surface</B><p></P>
<IMG SRC="Buildings.BoundaryConditi62abdc2cbd8e9446AngleD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.IncidenceAngle">
<P></P><H3>Information</H3>

<p>
This component computes the solar incidence angle on a tilted surface using the solar hour angle and the declination angle as input.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>lat</TD><TD>&nbsp;</TD><TD>Latitude [rad]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>azi</TD><TD>&nbsp;</TD><TD>Surface azimuth. azi=-90 degree if surface outward unit normal points toward east; azi=0 if it points toward south [rad]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>til</TD><TD>&nbsp;</TD><TD>Surface tilt. til=90 degree for walls; til=0 for ceilings; til=180 for roof [rad]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>solHouAng</TD><TD>Solar hour angle [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>decAng</TD><TD>Declination [rad]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>incAng</TD><TD>Incidence angle on a tilted surfce [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> IncidenceAngle <font color="darkgreen">&quot;The solar incidence angle on a tilted surface&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<font color="blue">public </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lat <font color="darkgreen">&quot;Latitude&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> azi(displayUnit=&quot;degree&quot;) <font color="darkgreen">
    &quot;Surface azimuth. azi=-90 degree if surface outward unit normal points toward east; azi=0 if it points toward south&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> til(displayUnit=&quot;degree&quot;) <font color="darkgreen">
    &quot;Surface tilt. til=90 degree for walls; til=0 for ceilings; til=180 for roof&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> solHouAng(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Solar hour angle&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> decAng(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Declination&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> incAng(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Incidence angle on a tilted surfce&quot;</font>;</textblock>
<font color="blue">protected </font>
  Real dec_c=<font color="red">Modelica.Math.cos</font>(decAng);
  Real dec_s=<font color="red">Modelica.Math.sin</font>(decAng);
  Real sol_c=<font color="red">Modelica.Math.cos</font>(solHouAng);
  Real sol_s=<font color="red">Modelica.Math.sin</font>(solHouAng);
  Real lat_c=<font color="red">Modelica.Math.cos</font>(lat);
  Real lat_s=<font color="red">Modelica.Math.sin</font>(lat);
<font color="blue">equation </font>
  incAng =<font color="red"> Modelica.Math.acos</font>(<font color="red">Modelica.Math.cos</font>(til)*(dec_c*sol_c*lat_c + dec_s
    *lat_s) +<font color="red"> Modelica.Math.sin</font>(til)*(<font color="red">Modelica.Math.sin</font>(azi)*dec_c*sol_s +
    <font color="red">Modelica.Math.cos</font>(azi)*(dec_c*sol_c*lat_s - dec_s*lat_c))) <font color="darkgreen">&quot;(A.4.13)&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>IncidenceAngle;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SolarAzimuth<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditie01031344d4d5850imuthI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarAzimuth" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarAzimuth"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.SolarAzimuth</H2>
<B>Solar azimuth</B><p></P>
<IMG SRC="Buildings.BoundaryConditie01031344d4d5850imuthD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarAzimuth">
<P></P><H3>Information</H3>

<p>
This component computes the solar azimuth angle.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>lat</TD><TD>&nbsp;</TD><TD>Latitude [rad]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>zen</TD><TD>Zenith angle [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>solTim</TD><TD>Solar time [s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>solAzi</TD><TD>Solar Azimuth [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>decAng</TD><TD>Decline angle [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> SolarAzimuth <font color="darkgreen">&quot;Solar azimuth&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<font color="blue">public </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lat <font color="darkgreen">&quot;Latitude&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> zen(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Zenith angle&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> solTim(quantity=&quot;Time&quot;, unit=&quot;s&quot;) <font color="darkgreen">
    &quot;Solar time&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> solAzi(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Solar Azimuth&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> decAng(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Decline angle&quot;</font>;</textblock>

<font color="blue">protected </font>
  Real arg <font color="darkgreen">&quot;cos(solAzi) after data validity check&quot;</font>;
  Real tmp <font color="darkgreen">&quot;cos(solAzi) before data validity check&quot;</font>;
  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> day=86400 <font color="darkgreen">&quot;Number of seconds in a day&quot;</font>;
  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> polarCircle = 1.1617 <font color="darkgreen">
    &quot;Latitude of polar circle (66 degree 33 min 44 sec)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Boolean outsidePolarCircle = lat &lt; polarCircle<font color="blue"> and </font>lat &gt; -polarCircle <font color="darkgreen">
    &quot;Flag, true if latitude is outside polar region&quot;</font>;
<font color="blue">algorithm </font>
  tmp :=(<font color="red">Modelica.Math.sin</font>(lat)*<font color="red">Modelica.Math.cos</font>(zen) -<font color="red"> Modelica.Math.sin</font>(
    decAng))/(<font color="red">Modelica.Math.cos</font>(lat)*<font color="red">Modelica.Math.sin</font>(zen));

  arg :=<font color="red">min</font>(1.0,<font color="red"> max</font>(-1.0, tmp));

  solAzi :=<font color="red"> Modelica.Math.acos</font>(arg);<font color="darkgreen"> // Solar azimuth (A4.9a and b) as a positive number</font>

  <font color="blue">if </font>outsidePolarCircle<font color="blue"> then</font>
    <font color="darkgreen">// Outside the polar circle, the only non-differentiability is at night when the sun is set.</font>
    <font color="darkgreen">// Hence, we use noEvent.</font>
    <font color="blue">if </font><font color="red">noEvent</font>(solTim -<font color="red"> integer</font>(solTim/day)*day &lt; 43200)<font color="blue"> then</font>
      solAzi :=-solAzi;
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    <font color="darkgreen">// Inside the polar circle, there is a jump at (solar-)midnight when the sun can</font>
    <font color="darkgreen">// be above the horizon. Hence, we do not use noEvent(...)</font>
    <font color="blue">if </font>solTim -<font color="red"> integer</font>(solTim/day)*day &lt; 43200<font color="blue"> then</font>
      solAzi :=-solAzi;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SolarAzimuth;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SolarHourAngle<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi7be9dfb7042c797fAngleI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.SolarHourAngle</H2>
<B>Solar hour angle</B><p></P>
<IMG SRC="Buildings.BoundaryConditi7be9dfb7042c797fAngleD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle">
<P></P><H3>Information</H3>

<p>
This component computes the solar hour angle, which is defined as the angle between the circle that passes through an observer, the north pole and the south pole, 
and the circle that passes through the sun, the north and the south pole.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>solTim</TD><TD>Solar time [s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>solHouAng</TD><TD>Solar hour angle [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> SolarHourAngle <font color="darkgreen">&quot;Solar hour angle&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">public </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> solTim(quantity=&quot;Time&quot;, unit=&quot;s&quot;) <font color="darkgreen">
    &quot;Solar time&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> solHouAng(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Solar hour angle&quot;</font>;</textblock>
<font color="blue">equation </font>
  solHouAng = (solTim/3600 - 12)*2*Modelica.Constants.pi/24 <font color="darkgreen">
    &quot;Our unit is s instead of h in (A4.6)&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SolarHourAngle;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ZenithAngle<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditic05dbaf413fc87b1AngleI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.ZenithAngle</H2>
<B>Zenith angle</B><p></P>
<IMG SRC="Buildings.BoundaryConditic05dbaf413fc87b1AngleD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle">
<P></P><H3>Information</H3>

<p>
This component computes the zenith angle, which is the angle between the earth surface normal and the sun's beam. 
Input are the solar hour angle and the declination angle.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>lat</TD><TD>&nbsp;</TD><TD>Latitude [rad]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>solHouAng</TD><TD>Solar hour angle [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>decAng</TD><TD>Declination [rad]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>zen</TD><TD>Zenith angle [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ZenithAngle <font color="darkgreen">&quot;Zenith angle&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<font color="blue">public </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lat <font color="darkgreen">&quot;Latitude&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> solHouAng(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Solar hour angle&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> decAng(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Declination&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> zen(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Zenith angle&quot;</font>;</textblock>
<font color="blue">equation </font>
  zen =<font color="red">  Modelica.Math.acos</font>(<font color="red">Modelica.Math.cos</font>(lat)*<font color="red">Modelica.Math.cos</font>(decAng)*
    <font color="red">Modelica.Math.cos</font>(solHouAng) +<font color="red"> Modelica.Math.sin</font>(lat)*<font color="red">Modelica.Math.sin</font>(
    decAng)) <font color="darkgreen">&quot;(A4.8)&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ZenithAngle;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AltitudeAngle<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi0dcc6b7812f7c14aAngleI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.AltitudeAngle</H2>
<B>Solar altitude angle</B><p></P>
<IMG SRC="Buildings.BoundaryConditi0dcc6b7812f7c14aAngleD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle">
<P></P><H3>Information</H3>

<p>
This block computes the altitude angle of the sun with respect to a horizontal surface. 
The altitude angle is the angle between the sun ray and the projection of the ray 
on a horizontal surface.
It is the complementory angle to the zenith angle.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>zen</TD><TD>Zenith angle [rad]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>alt</TD><TD>Altitude angle [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> AltitudeAngle <font color="darkgreen">&quot;Solar altitude angle&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<textblock type="annotcomp" expanded="false"><font color="blue">public </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> zen(quantity=&quot;Angle&quot;, unit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Zenith angle&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> alt(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Altitude angle&quot;</font>;</textblock>
<font color="blue">equation </font>
  alt = (Modelica.Constants.pi/2) - zen;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>AltitudeAngle;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WallSolarAzimuth<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi1c0c2aea59196568imuthI.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.WallSolarAzimuth" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.WallSolarAzimuth"></A><A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses"
>Buildings.BoundaryConditions.SolarGeometry.BaseClasses</A>.WallSolarAzimuth</H2>
<B>Angle measured in a horizontal plane between the projection of the sun&#39;s rays and the normal to a vertical surface</B><p></P>
<IMG SRC="Buildings.BoundaryConditi1c0c2aea59196568imuthD.png" ALT="Buildings.BoundaryConditions.SolarGeometry.BaseClasses.WallSolarAzimuth">
<P></P><H3>Information</H3>

<p>
This block computes the wall solar azimuth angle. 
It is the angle between the projection of the sun ray on a horizontal surface 
and the line perpendicular to the wall. The value of this angle varies from <i>0</i> to <i>180</i> degrees. 
In the northern hemisphere at solar noon, the value of the wall solar azimuth angle is zero if the wall is facing south.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>incAng</TD><TD>Solar incidence angle [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>alt</TD><TD>Solar altitude angle (angle between sun ray and horizontal surface) [rad]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>verAzi</TD><TD>Angle between projection of sun&#39;s rays and normal to vertical surface [rad]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> WallSolarAzimuth <font color="darkgreen">
  &quot;Angle measured in a horizontal plane between the projection of the sun&#39;s rays and the normal to a vertical surface&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> incAng(quantity=&quot;Angle&quot;,
                                              unit=&quot;rad&quot;,
                                              displayUnit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Solar incidence angle&quot;</font>;
<A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> alt(quantity=&quot;Angle&quot;,
                                         unit=&quot;rad&quot;,
                                         displayUnit=&quot;rad&quot;) <font color="darkgreen">
    &quot;Solar altitude angle (angle between sun ray and horizontal surface)&quot;</font>;
<A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> verAzi(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">
    &quot;Angle between projection of sun&#39;s rays and normal to vertical surface&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> delta = 1*Modelica.Constants.pi/180 <font color="darkgreen">
    &quot;Small angle&quot;</font>;
  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> ninety= Modelica.Constants.pi/2-delta <font color="darkgreen">
    &quot;+89 degree&quot;</font>;
  <font color="blue">constant </font>Real deltaX = 1E-4 <font color="darkgreen">&quot;Small number used for smoothing&quot;</font>;
  Real alt_c <font color="darkgreen">&quot;Cosine of altitude, bounded away from zero&quot;</font>;
  Real rat <font color="darkgreen">&quot;Ratio of cosines&quot;</font>;
<font color="blue">equation </font>
  alt_c=<font color="red">Modelica.Math.cos</font>(<font color="red">Buildings.Utilities.Math.Functions.smoothLimit</font>(
        x=alt, l=-ninety, u=ninety, deltaX=delta));
  rat =<font color="red"> Modelica.Math.cos</font>(incAng)/alt_c;
  <font color="darkgreen">// Due to the smoothLimit, rat can be about 1E-3 greater than 1 or smaller than -1.</font>
  <font color="darkgreen">// Hence, below we use another call to smoothLimit to ensure that the argument of</font>
  <font color="darkgreen">// acos(.) is inside the interval [-1, 1].</font>
  verAzi=<font color="red">Modelica.Math.acos</font>(
       <font color="red">Buildings.Utilities.Math.Functions.smoothLimit</font>(x=rat, l=-1+deltaX, u=1-deltaX, deltaX=deltaX/10));

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>WallSolarAzimuth;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Thu Oct 24 15:07:48 2013.
</address></BODY>
</HTML>
