<HTML>
<HEAD>
<TITLE>Buildings.BoundaryConditions.WeatherData</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Weather data reader&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WeatherData<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.BoundaryConditions.WeatherData"></A><A HREF="Buildings_BoundaryConditions.html#Buildings.BoundaryConditions"
>Buildings.BoundaryConditions</A>.WeatherData</H2>
<B>Weather data reader</B>
<P></P>
<P></P><H3>Information</H3>

This package contains models to read weather data. It also contains
an expandable connector called <code>Bus</code> that
is used in the library to provide weather data to the different models.
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</A> (Icon for package containing variants).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi1a4ba17d6f304515GuideS.png" ALT="Buildings.BoundaryConditions.WeatherData.UsersGuide" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_WeatherData_UsersGuide.html#Buildings.BoundaryConditions.WeatherData.UsersGuide"
>UsersGuide</A>
</TD><TD>User&#39;s Guide</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditiad988c03c070a4c6rTMY3S.png" ALT="Buildings.BoundaryConditions.WeatherData.ReaderTMY3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.ReaderTMY3"
>ReaderTMY3</A>
</TD><TD>Reader for TMY3 weather data</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi4cf2958f71af316aa.BusS.png" ALT="Buildings.BoundaryConditions.WeatherData.Bus" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</A>
</TD><TD>Data bus that stores weather data</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi52f6ea0eb5aae28amplesS.png" ALT="Buildings.BoundaryConditions.WeatherData.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_WeatherData_Examples.html#Buildings.BoundaryConditions.WeatherData.Examples"
>Examples</A>
</TD><TD>Collection of models that illustrate model use and test models</TD></TR>
<TR><TD><IMG SRC="Buildings.BoundaryConditi5786a358b11ba81aassesS.png" ALT="Buildings.BoundaryConditions.WeatherData.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses"
>BaseClasses</A>
</TD><TD>Package with base classes for Buildings.BoundaryConditions.WeatherData</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ReaderTMY3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditiad988c03c070a4c6rTMY3I.png" ALT="Buildings.BoundaryConditions.WeatherData.ReaderTMY3" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.WeatherData.ReaderTMY3"></A><A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData"
>Buildings.BoundaryConditions.WeatherData</A>.ReaderTMY3</H2>
<B>Reader for TMY3 weather data</B><p></P>
<IMG SRC="Buildings.BoundaryConditiad988c03c070a4c6rTMY3D.png" ALT="Buildings.BoundaryConditions.WeatherData.ReaderTMY3">
<P></P><H3>Information</H3>

<p>
This component reads TMY3 weather data (Wilcox and Marion, 2008) or user specified weather data. 
</p>
<p>
The following parameters are automatically read from the weather file:
</p>
<ul>
<li>
The latitude of the weather station, <code>lat</code>,
</li>
<li>
the longitude of the weather station, <code>lon</code>, and
</li>
<li>
the time zone relative to Greenwich Mean Time, <code>timZone</code>.
</li>
</ul>
<p>
By default, the data bus contains the wet bulb temperature.
This introduces a nonlinear equation.
However, we have not observed an increase in computing time because
of this equation.
To disable the computation of the wet bulb temperature, set
<code>computeWetBulbTemperature=false</code>.
</p>
<p>
This model has the option of using a constant value, using the data from the weather file, 
or using data from an input connector for the following variables: 
atmospheric pressure, relative humidity, dry bulb temperature, 
global horizontal radiation, diffuse horizontal radiation, wind direction and wind speed.
</p>
<p>
By default, all data are obtained from the weather data file,
except for the atmospheric pressure, which is set to the
parameter <code>pAtm=101325</code> Pascals.
</p>
<p>
The parameter <code>*Sou</code> configures the source of the data.
For the atmospheric pressure, dry bulb temperature, relative humidity, wind speed and wind direction,
the enumeration
<A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>
Buildings.BoundaryConditions.Types.DataSource</a>
is used as follows:
</p>
<table summary="summary" border="1" cellspacing=0 cellpadding=2 style="border-collapse:collapse;">
<!-- ============================================== -->
<tr>
  <th>Parameter <code>*Sou</code>
  </th>
  <th>Data used to compute weather data.
  </th>
</tr>
<!-- ============================================== -->
<tr>
  <td>
    File
  </td>
  <td>
    Use data from file.
  </td>
</tr>
<!-- ============================================== -->
<tr>
  <td>
    Parameter
  </td>
  <td>
    Use value specified by the parameter.
  </td>
</tr>
<!-- ============================================== -->
<tr>
  <td>
    Input
  </td>
  <td>
    Use value from the input connector.
  </td>
</tr>
</table>
<p>
Because global, diffuse and direct radiation are related to each other, the parameter
<code>HSou</code> is treated differently.
It is set to a value of the enumeration
<A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.RadiationDataSource"
>
Buildings.BoundaryConditions.Types.RadiationDataSource</a>,
and allows the following configurations:
</p>
<table summary="summary" border="1" cellspacing=0 cellpadding=2 style="border-collapse:collapse;">
<!-- ============================================== -->
<tr>
  <th>Parameter <code>HSou</code>
  </th>
  <th>Data used to compute weather data.
  </th>
</tr>
<!-- ============================================== -->
<tr>
  <td>
    File
  </td>
  <td>
    Use data from file.
  </td>
</tr>
<!-- ============================================== -->
<tr>
  <td>
    Input_HGloHor_HDifHor
  </td>
  <td>
    Use global horizontal and diffuse horizontal radiation from input connector.
  </td>
</tr>
<tr>
  <td>
    Input_HDirNor_HDifHor
  </td>
  <td>
    Use direct normal and diffuse horizontal radiation from input connector.
  </td>
</tr>
<tr>
  <td>
    Input_HDirNor_HGloHor
  </td>
  <td>
    Use direct normal and global horizontal radiation from input connector.
  </td>
</tr>
</table>
<p>
<b>Notes</b>
</p>
<ol>
<li>
<p>
In HVAC systems, when the fan is off, changes in atmospheric pressure can cause small air flow rates
in the duct system due to change in pressure and hence in the mass of air that is stored
in air volumes (such as in fluid junctions or in the room model). 
This may increase computing time. Therefore, the default value for the atmospheric pressure is set to a constant.
Furthermore, if the initial pressure of air volumes are different
from the atmospheric pressure, then fast pressure transients can happen in the first few seconds of the simulation.
This can cause numerical problems for the solver. To avoid this problem, set the atmospheric pressure to the
same value as the medium default pressure, which is typically set to the parameter <code>Medium.p_default</code>.
For medium models for moist air and dry air, the default is
<code>Medium.p_default=101325</code> Pascals.
</p>
</li>
<li>
<p>
Different units apply depending on whether data are obtained from a file, or 
from a parameter or an input connector:
</p>
<ul>
<li>
When using TMY3 data from a file (e.g. <code>USA_IL_Chicago-OHare.Intl.AP.725300_TMY3.mos</code>), the units must be the same as the original TMY3 file used by EnergyPlus (e.g. 
<code>USA_IL_Chicago-OHare.Intl.AP.725300_TMY3.epw</code>). 
The TMY3 data used by EnergyPlus are in both SI units and non-SI units. 
If <code>Resources/bin/ConvertWeatherData.jar</code> is used to convert the <code>.epw</code> file to an <code>.mos</code> file, the units of the TMY3 data are preserved and the file can be directly
used by this data reader. 
The data reader will automatically convert units to the SI units used by Modelica.
For example, the dry bulb temperature <code>TDryBul</code> in TMY3 is in degree Celsius. 
The data reader will automatically convert the data to Kelvin. 
The wind direction <code>winDir</code> in TMY3 is degrees and will be automatically converted to radians.
</li>
<li>
When using data from a parameter or from an input connector,
the data must be in the SI units used by Modelica. 
For instance, the unit must be 
<code>Pa</code> for pressure,
<code>K</code> for temperature,
<code>W/m2</code> for solar radiations and
<code>rad</code> for wind direction.
</li>
</ul>
</li>
<li>
<p>
The ReaderTMY3 should only be used with TMY3 data. It contains a time shift for solar radiation data that is explained below. This time shift needs to be removed if the user may want to use the ReaderTMY3 for other weather data types. 
</p>
</li>
</ol>
<h4>Implementation</h4>
<p>
To read weather data from the TMY3 weather data file, there are
two data readers in this model. One data reader obtains all data
except solar radiation, and the other data reader reads only the
solar radiation data, shifted by <i>30</i> minutes.
The reason for this time shift is as follows:
The TMY3 weather data file contains for solar radiation the 
"...radiation received
on a horizontal surface during
the 60-minute period ending at
the timestamp."

Thus, as the figure below shows, a more accurate interpolation is obtained if 
time is shifted by <i>30</i> minutes prior to reading the weather data.   
</p>
<p align="center">
<img alt="image" src="../Resources/Images/BoundaryConditions/WeatherData/RadiationTimeShift.png" border="1" />
</p>
<h4>References</h4>
<ul>
<li>
Wilcox S. and W. Marion. <i>Users Manual for TMY3 Data Sets</i>. 
Technical Report, NREL/TP-581-43156, revised May 2008.
</li>
</ul>
<pre>
</PRE><P></P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>computeWetBulbTemperature</TD><TD>true</TD><TD>If true, then this model computes the wet bulb temperature</TD></TR>
<TR><TD>String</TD><TD>filNam</TD><TD>&quot;&quot;</TD><TD>Name of weather data file</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Data source</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>DataSource</A></TD><TD>pAtmSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Atmospheric pressure</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pAtm</TD><TD>101325</TD><TD>Atmospheric pressure (used if pAtmSou=Parameter) [Pa]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>DataSource</A></TD><TD>TDryBulSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Dry bulb temperature</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>TDryBul</TD><TD>293.15</TD><TD>Dry bulb temperature (used if TDryBul=Parameter) [K]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>DataSource</A></TD><TD>relHumSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Relative humidity</TD></TR>
<TR><TD>Real</TD><TD>relHum</TD><TD>0.5</TD><TD>Relative humidity (used if relHum=Parameter) [1]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>DataSource</A></TD><TD>winSpeSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Wind speed</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>winSpe</TD><TD>1</TD><TD>Wind speed (used if winSpe=Parameter) [m/s]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>DataSource</A></TD><TD>winDirSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Wind direction</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</A></TD><TD>winDir</TD><TD>1.0</TD><TD>Wind direction (used if winDir=Parameter) [rad]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.RadiationDataSource"
>RadiationDataSource</A></TD><TD>HSou</TD><TD>Buildings.BoundaryConditions...</TD><TD>Radiation</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Sky temperature</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.SkyTemperatureCalculation"
>SkyTemperatureCalculation</A></TD><TD>calTSky</TD><TD>Buildings.BoundaryConditions...</TD><TD>Computation of black-body sky temperature</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>pAtm_in</TD><TD>Input pressure [Pa]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TDryBul_in</TD><TD>Input dry bulb temperature [K]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>relHum_in</TD><TD>Input relative humidity [1]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>winSpe_in</TD><TD>Input wind speed [m/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>winDir_in</TD><TD>Input wind direction [rad]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>HGloHor_in</TD><TD>Input global horizontal radiation [W/m2]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>HDifHor_in</TD><TD>Input diffuse horizontal radiation [W/m2]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>HDirNor_in</TD><TD>Input direct normal radiation [W/m2]</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</A></TD><TD>weaBus</TD><TD>Weather Data Bus</TD></TR>
<TR><TD><A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.SolarSubBus"
>SolarSubBus</A></TD><TD>solBus</TD><TD>Sub bus with solar position</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ReaderTMY3 <font color="darkgreen">&quot;Reader for TMY3 weather data&quot;</font>

  <font color="blue">parameter </font>Boolean computeWetBulbTemperature = true <font color="darkgreen">
    &quot;If true, then this model computes the wet bulb temperature&quot;</font>;
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Atmospheric pressure</font>
  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>Buildings.BoundaryConditions.Types.DataSource</A> pAtmSou=Buildings.BoundaryConditions.Types.DataSource.Parameter <font color="darkgreen">
    &quot;Atmospheric pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> pAtm=101325 <font color="darkgreen">
    &quot;Atmospheric pressure (used if pAtmSou=Parameter)&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> pAtm_in(
    <font color="blue">final </font>quantity=&quot;Pressure&quot;,
    <font color="blue">final </font>unit=&quot;Pa&quot;,
    displayUnit=&quot;Pa&quot;) <font color="blue">if </font>(pAtmSou == Buildings.BoundaryConditions.Types.DataSource.Input) <font color="darkgreen">
    &quot;Input pressure&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Dry bulb temperature</font>
  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>Buildings.BoundaryConditions.Types.DataSource</A> TDryBulSou=Buildings.BoundaryConditions.Types.DataSource.File <font color="darkgreen">
    &quot;Dry bulb temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TDryBul(displayUnit=&quot;degC&quot;) = 293.15 <font color="darkgreen">
    &quot;Dry bulb temperature (used if TDryBul=Parameter)&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TDryBul_in(
    <font color="blue">final </font>quantity=&quot;ThermodynamicTemperature&quot;,
    <font color="blue">final </font>unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="blue">if </font>(TDryBulSou == Buildings.BoundaryConditions.Types.DataSource.Input) <font color="darkgreen">
    &quot;Input dry bulb temperature&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Relative humidity</font>
  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>Buildings.BoundaryConditions.Types.DataSource</A> relHumSou=Buildings.BoundaryConditions.Types.DataSource.File <font color="darkgreen">
    &quot;Relative humidity&quot;</font>;
  <font color="blue">parameter </font>Real relHum(
    min=0,
    max=1,
    unit=&quot;1&quot;) = 0.5 <font color="darkgreen">&quot;Relative humidity (used if relHum=Parameter)&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> relHum_in(
    min=0,
    max=1,
    unit=&quot;1&quot;) <font color="blue">if </font>(relHumSou == Buildings.BoundaryConditions.Types.DataSource.Input) <font color="darkgreen">
    &quot;Input relative humidity&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Wind speed</font>
  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>Buildings.BoundaryConditions.Types.DataSource</A> winSpeSou=Buildings.BoundaryConditions.Types.DataSource.File <font color="darkgreen">
    &quot;Wind speed&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</A> winSpe(min=0) = 1 <font color="darkgreen">
    &quot;Wind speed (used if winSpe=Parameter)&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> winSpe_in(
    <font color="blue">final </font>quantity=&quot;Velocity&quot;,
    <font color="blue">final </font>unit=&quot;m/s&quot;,
    min=0) <font color="blue">if </font>(winSpeSou == Buildings.BoundaryConditions.Types.DataSource.Input) <font color="darkgreen">
    &quot;Input wind speed&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Wind direction</font>
  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.DataSource"
>Buildings.BoundaryConditions.Types.DataSource</A> winDirSou=Buildings.BoundaryConditions.Types.DataSource.File <font color="darkgreen">
    &quot;Wind direction&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> winDir=1.0 <font color="darkgreen">
    &quot;Wind direction (used if winDir=Parameter)&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> winDir_in(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="blue">if </font>(winDirSou == Buildings.BoundaryConditions.Types.DataSource.Input) <font color="darkgreen">
    &quot;Input wind direction&quot;</font>;</textblock>

     <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.RadiationDataSource"
>Buildings.BoundaryConditions.Types.RadiationDataSource</A> HSou=Buildings.BoundaryConditions.Types.RadiationDataSource.File <font color="darkgreen">
    &quot;Radiation&quot;</font>;

  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Global horizontal radiation</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HGloHor_in(
    <font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
    <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="blue">if </font>(HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HGloHor_HDifHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HGloHor) <font color="darkgreen">
    &quot;Input global horizontal radiation&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Diffuse horizontal radiation</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HDifHor_in(
    <font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
    <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="blue">if </font>(HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HGloHor_HDifHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HDifHor) <font color="darkgreen">
    &quot;Input diffuse horizontal radiation&quot;</font>;</textblock>
  <font color="darkgreen">//--------------------------------------------------------------</font>
  <font color="darkgreen">// Direct normal radiation</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HDirNor_in(<font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
      <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="blue">if </font>
                          (HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HDifHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HGloHor) <font color="darkgreen">
    &quot;Input direct normal radiation&quot;</font>;</textblock>

  <font color="blue">parameter </font>String filNam=&quot;&quot; <font color="darkgreen">&quot;Name of weather data file&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lon(displayUnit=&quot;deg&quot;)=
    <font color="red">Buildings.BoundaryConditions.WeatherData.BaseClasses.getLongitudeTMY3</font>(
    filNam) <font color="darkgreen">&quot;Longitude&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</A> lat(displayUnit=&quot;deg&quot;)=
    <font color="red">Buildings.BoundaryConditions.WeatherData.BaseClasses.getLatitudeTMY3</font>(
    filNam) <font color="darkgreen">&quot;Latitude&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> timZon(displayUnit=&quot;h&quot;)=
    <font color="red">Buildings.BoundaryConditions.WeatherData.BaseClasses.getTimeZoneTMY3</font>(filNam) <font color="darkgreen">
    &quot;Time zone&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData.Bus"
>Bus</A> weaBus <font color="darkgreen">&quot;Weather Data Bus&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.SolarSubBus"
>BaseClasses.SolarSubBus</A> solBus <font color="darkgreen">&quot;Sub bus with solar position&quot;</font>;</textblock>

  <font color="blue">parameter </font><A HREF="Buildings_BoundaryConditions_Types.html#Buildings.BoundaryConditions.Types.SkyTemperatureCalculation"
>Buildings.BoundaryConditions.Types.SkyTemperatureCalculation</A>
    calTSky=Buildings.BoundaryConditions.Types.SkyTemperatureCalculation.TemperaturesAndSkyCover <font color="darkgreen">
    &quot;Computation of black-body sky temperature&quot;</font>;

  <font color="blue">constant </font>Real epsCos = 1e-6 <font color="darkgreen">&quot;Small value to avoid division by 0&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Tables.html#Modelica.Blocks.Tables.CombiTable1Ds"
>Modelica.Blocks.Tables.CombiTable1Ds</A> datRea(
    <font color="blue">final </font>tableOnFile=true,
    <font color="blue">final </font>tableName=&quot;tab1&quot;,
    <font color="blue">final </font>fileName=<font color="red">Buildings.BoundaryConditions.WeatherData.BaseClasses.getAbsolutePath</font>(filNam),
    <font color="blue">final </font>smoothness=Modelica.Blocks.Types.Smoothness.ContinuousDerivative,
    <font color="blue">final </font>columns={2,3,4,5,6,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,
        28,29,30}) <font color="darkgreen">&quot;Data reader&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckTemperature"
>Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckTemperature</A>
    cheTemDryBul <font color="darkgreen">&quot;Check dry bulb temperature &quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckTemperature"
>Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckTemperature</A>
    cheTemDewPoi <font color="darkgreen">&quot;Check dew point temperature&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRelativeHumidity"
>Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRelativeHumidity</A>
    conRelHum <font color="darkgreen">&quot;Convert the relative humidity from percentage to [0, 1] &quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckPressure"
>BaseClasses.CheckPressure</A> chePre <font color="darkgreen">&quot;Check the air pressure&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckSkyCover"
>BaseClasses.CheckSkyCover</A> cheTotSkyCov <font color="darkgreen">&quot;Check the total sky cover&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckSkyCover"
>BaseClasses.CheckSkyCover</A> cheOpaSkyCov <font color="darkgreen">&quot;Check the opaque sky cover&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckRadiation"
>BaseClasses.CheckRadiation</A> cheGloHorRad <font color="darkgreen">
    &quot;Check the global horizontal radiation&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckRadiation"
>BaseClasses.CheckRadiation</A> cheDifHorRad <font color="darkgreen">
    &quot;Check the diffuse horizontal radiation&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckRadiation"
>BaseClasses.CheckRadiation</A> cheDirNorRad <font color="darkgreen">&quot;Check the direct normal radiation&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckCeilingHeight"
>BaseClasses.CheckCeilingHeight</A> cheCeiHei <font color="darkgreen">&quot;Check the ceiling height&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckWindSpeed"
>BaseClasses.CheckWindSpeed</A> cheWinSpe <font color="darkgreen">&quot;Check the wind speed&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckRadiation"
>BaseClasses.CheckRadiation</A> cheHorRad <font color="darkgreen">&quot;Check the horizontal radiation&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckWindDirection"
>BaseClasses.CheckWindDirection</A> cheWinDir <font color="darkgreen">&quot;Check the wind direction&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_SkyTemperature.html#Buildings.BoundaryConditions.SkyTemperature.BlackBody"
>SkyTemperature.BlackBody</A> TBlaSky(<font color="blue">final </font>calTSky=calTSky) <font color="darkgreen">
    &quot;Check the sky black-body temperature&quot;</font>;
  <A HREF="Buildings_Utilities.html#Buildings.Utilities.SimulationTime"
>Utilities.SimulationTime</A> simTim <font color="darkgreen">&quot;Simulation time&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> add <font color="darkgreen">
    &quot;Add 30 minutes to time to shift weather data reader&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> con30mins(<font color="blue">final </font>k=1800) <font color="darkgreen">
    &quot;Constant used to shift weather data reader&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.LocalCivilTime"
>Buildings.BoundaryConditions.WeatherData.BaseClasses.LocalCivilTime</A> locTim(
      <font color="blue">final </font>lon=lon, <font color="blue">final </font>timZon=timZon) <font color="darkgreen">&quot;Local civil time&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Tables.html#Modelica.Blocks.Tables.CombiTable1Ds"
>Modelica.Blocks.Tables.CombiTable1Ds</A> datRea1(
    <font color="blue">final </font>tableOnFile=true,
    <font color="blue">final </font>tableName=&quot;tab1&quot;,
    <font color="blue">final </font>fileName=<font color="red">Buildings.BoundaryConditions.WeatherData.BaseClasses.getAbsolutePath</font>(filNam),
    <font color="blue">final </font>smoothness=Modelica.Blocks.Types.Smoothness.ContinuousDerivative,
    <font color="blue">final </font>columns=8:11) <font color="darkgreen">&quot;Data reader&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertTime"
>Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertTime</A> conTim1 <font color="darkgreen">
    &quot;Convert simulation time to calendar time&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertTime"
>BaseClasses.ConvertTime</A> conTim <font color="darkgreen">&quot;Convert simulation time to calendar time&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.EquationOfTime"
>BaseClasses.EquationOfTime</A> eqnTim <font color="darkgreen">&quot;Equation of time&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.SolarTime"
>BaseClasses.SolarTime</A> solTim <font color="darkgreen">&quot;Solar time&quot;</font>;</textblock>
  <font color="darkgreen">// Conditional connectors</font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> pAtm_in_internal(
    <font color="blue">final </font>quantity=&quot;Pressure&quot;,
    <font color="blue">final </font>unit=&quot;Pa&quot;,
    displayUnit=&quot;bar&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TDryBul_in_internal(
    <font color="blue">final </font>quantity=&quot;ThermodynamicTemperature&quot;,
    <font color="blue">final </font>unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> relHum_in_internal(
    <font color="blue">final </font>quantity=&quot;1&quot;,
    min=0,
    max=1) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> winSpe_in_internal(
    <font color="blue">final </font>quantity=&quot;Velocity&quot;,
    <font color="blue">final </font>unit=&quot;m/s&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> winDir_in_internal(
    <font color="blue">final </font>quantity=&quot;Angle&quot;,
    <font color="blue">final </font>unit=&quot;rad&quot;,
    displayUnit=&quot;deg&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HGloHor_in_internal(
    <font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
    <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HDifHor_in_internal(
    <font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
    <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> HDirNor_in_internal(
    <font color="blue">final </font>quantity=&quot;RadiantEnergyFluenceRate&quot;,
    <font color="blue">final </font>unit=&quot;W/m2&quot;) <font color="darkgreen">&quot;Needed to connect to conditional connector&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math_UnitConversions.html#Modelica.Blocks.Math.UnitConversions.From_deg"
>Modelica.Blocks.Math.UnitConversions.From_deg</A> conWinDir <font color="darkgreen">
    &quot;Convert the wind direction unit from [deg] to [rad]&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math_UnitConversions.html#Modelica.Blocks.Math.UnitConversions.From_degC"
>Modelica.Blocks.Math.UnitConversions.From_degC</A> conTDryBul;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRadiation"
>BaseClasses.ConvertRadiation</A> conHorRad;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math_UnitConversions.html#Modelica.Blocks.Math.UnitConversions.From_degC"
>Modelica.Blocks.Math.UnitConversions.From_degC</A> conTDewPoi <font color="darkgreen">
    &quot;Convert the dew point temperature form [degC] to [K]&quot;</font>;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRadiation"
>BaseClasses.ConvertRadiation</A> conDirNorRad;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRadiation"
>BaseClasses.ConvertRadiation</A> conGloHorRad;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.ConvertRadiation"
>BaseClasses.ConvertRadiation</A> conDifHorRad;
  <A HREF="Buildings_BoundaryConditions_WeatherData_BaseClasses.html#Buildings.BoundaryConditions.WeatherData.BaseClasses.CheckRelativeHumidity"
>BaseClasses.CheckRelativeHumidity</A> cheRelHum;
  <A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.AltitudeAngle"
>SolarGeometry.BaseClasses.AltitudeAngle</A> altAng <font color="darkgreen">&quot;Solar altitude angle&quot;</font>;
   <A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.ZenithAngle"
>SolarGeometry.BaseClasses.ZenithAngle</A> zenAng(
     <font color="blue">final </font>lat = lat) <font color="darkgreen">&quot;Zenith angle&quot;</font>;
   <A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.Declination"
>SolarGeometry.BaseClasses.Declination</A> decAng <font color="darkgreen">&quot;Declination angle&quot;</font>;
   <A HREF="Buildings_BoundaryConditions_SolarGeometry_BaseClasses.html#Buildings.BoundaryConditions.SolarGeometry.BaseClasses.SolarHourAngle"
>SolarGeometry.BaseClasses.SolarHourAngle</A>
    solHouAng;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> latitude(<font color="blue">final </font>k=lat) <font color="darkgreen">&quot;Latitude&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> longitude(<font color="blue">final </font>k=lon) <font color="darkgreen">&quot;Longitude&quot;</font>;</textblock>

  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Optional instanciation of a block that computes the wet bulb temperature.</font>
  <font color="darkgreen">// This block may be needed for evaporative cooling towers.</font>
  <font color="darkgreen">// By default, it is enabled. This introduces a nonlinear equation, but</font>
  <font color="darkgreen">// we have not observed an increase in computing time because of this equation.</font>
<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.TWetBul_TDryBulPhi"
>Buildings.Utilities.Psychrometrics.TWetBul_TDryBulPhi</A> tWetBul_TDryBulXi(
      <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Media_PerfectGases_MoistAir.html#Buildings.Media.PerfectGases.MoistAir"
>Buildings.Media.PerfectGases.MoistAir</A>,
      TDryBul(displayUnit=&quot;degC&quot;)) <font color="blue">if </font>computeWetBulbTemperature;</textblock>

<font color="blue">equation </font>
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select atmospheric pressure connector</font>
  <font color="blue">if </font>pAtmSou == Buildings.BoundaryConditions.Types.DataSource.Parameter<font color="blue"> then</font>
    pAtm_in_internal = pAtm;
  <font color="blue">elseif </font>pAtmSou == Buildings.BoundaryConditions.Types.DataSource.File<font color="blue"> then</font>
    <font color="red">connect</font>(datRea.y[4], pAtm_in_internal);
  <font color="blue">else</font>
    <font color="red">connect</font>(pAtm_in, pAtm_in_internal);
  <font color="blue">end if</font>;
  <font color="red">connect</font>(pAtm_in_internal, chePre.PIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select dry bulb temperature connector</font>
  <font color="blue">if </font>TDryBulSou == Buildings.BoundaryConditions.Types.DataSource.Parameter<font color="blue"> then</font>
    TDryBul_in_internal = TDryBul;
  <font color="blue">elseif </font>TDryBulSou == Buildings.BoundaryConditions.Types.DataSource.Input<font color="blue"> then</font>
    <font color="red">connect</font>(TDryBul_in, TDryBul_in_internal);
  <font color="blue">else</font>
    <font color="red">connect</font>(conTDryBul.y, TDryBul_in_internal);
  <font color="blue">end if</font>;
  <font color="red">connect</font>(TDryBul_in_internal, cheTemDryBul.TIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select relative humidity connector</font>
  <font color="blue">if </font>relHumSou == Buildings.BoundaryConditions.Types.DataSource.Parameter<font color="blue"> then</font>
    relHum_in_internal = relHum;
  <font color="blue">elseif </font>relHumSou == Buildings.BoundaryConditions.Types.DataSource.Input<font color="blue"> then</font>
    <font color="red">connect</font>(relHum_in, relHum_in_internal);
  <font color="blue">else</font>
    <font color="red">connect</font>(conRelHum.relHumOut, relHum_in_internal);
  <font color="blue">end if</font>;
  <font color="red">connect</font>(relHum_in_internal, cheRelHum.relHumIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select wind speed connector</font>
  <font color="blue">if </font>winSpeSou == Buildings.BoundaryConditions.Types.DataSource.Parameter<font color="blue"> then</font>
    winSpe_in_internal = winSpe;
  <font color="blue">elseif </font>winSpeSou == Buildings.BoundaryConditions.Types.DataSource.Input<font color="blue"> then</font>
    <font color="red">connect</font>(winSpe_in, winSpe_in_internal);
  <font color="blue">else</font>
    <font color="red">connect</font>(datRea.y[12], winSpe_in_internal);
  <font color="blue">end if</font>;
  <font color="red">connect</font>(winSpe_in_internal, cheWinSpe.winSpeIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select wind direction connector</font>
  <font color="blue">if </font>winDirSou == Buildings.BoundaryConditions.Types.DataSource.Parameter<font color="blue"> then</font>
    winDir_in_internal = winDir;
  <font color="blue">elseif </font>winDirSou == Buildings.BoundaryConditions.Types.DataSource.Input<font color="blue"> then</font>
    <font color="red">connect</font>(winDir_in, winDir_in_internal);
  <font color="blue">else</font>
    <font color="red">connect</font>(conWinDir.y, winDir_in_internal);
  <font color="blue">end if</font>;
  <font color="red">connect</font>(winDir_in_internal, cheWinDir.nIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select global horizontal radiation connector</font>
  <font color="blue">if </font>HSou ==  Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HGloHor_HDifHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HGloHor<font color="blue"> then</font>
    <font color="red">connect</font>(HGloHor_in, HGloHor_in_internal) <font color="darkgreen">
      &quot;Get HGloHor using user input file&quot;</font>;
  <font color="blue">elseif </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HDifHor<font color="blue"> then</font>
     HDirNor_in_internal*<font color="red">cos</font>(zenAng.zen)+HDifHor_in_internal = HGloHor_in_internal <font color="darkgreen">
      &quot;Calculate the HGloHor using HDirNor and HDifHor according to (A.4.14) and (A.4.15)&quot;</font>;
  <font color="blue">else</font>
    <font color="red">connect</font>(conGloHorRad.HOut, HGloHor_in_internal) <font color="darkgreen">
      &quot;Get HGloHor using weather data file&quot;</font>;
  <font color="blue">end if</font>;
  <font color="red">connect</font>(HGloHor_in_internal, cheGloHorRad.HIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select diffuse horizontal radiation connector</font>
  <font color="blue">if </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HGloHor_HDifHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HDifHor<font color="blue"> then</font>
    <font color="red"> connect</font>(HDifHor_in, HDifHor_in_internal) <font color="darkgreen">
      &quot;Get HDifHor using user input file&quot;</font>;
  <font color="blue">elseif </font> HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HGloHor<font color="blue"> then</font>
      HGloHor_in_internal - HDirNor_in_internal*<font color="red">cos</font>(zenAng.zen) = HDifHor_in_internal <font color="darkgreen">
      &quot;Calculate the HGloHor using HDirNor and HDifHor according to (A.4.14) and (A.4.15)&quot;</font>;
  <font color="blue">else</font>
    <font color="red">connect</font>(conDifHorRad.HOut, HDifHor_in_internal) <font color="darkgreen">
      &quot;Get HDifHor using weather data file&quot;</font>;
  <font color="blue">end if</font>;
  <font color="red">connect</font>(HDifHor_in_internal, cheDifHorRad.HIn);
  <font color="darkgreen">//---------------------------------------------------------------------------</font>
  <font color="darkgreen">// Select direct normal radiation connector</font>
  <font color="blue">if </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HGloHor<font color="blue"> or </font>HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HDirNor_HDifHor<font color="blue"> then</font>
    <font color="red"> connect</font>(HDirNor_in, HDirNor_in_internal) <font color="darkgreen">
      &quot;Get HDirNor using user input file&quot;</font>;
  <font color="blue">elseif </font> HSou == Buildings.BoundaryConditions.Types.RadiationDataSource.Input_HGloHor_HDifHor<font color="blue"> then</font>
      (HGloHor_in_internal -HDifHor_in_internal)/<font color="red">Buildings.Utilities.Math.Functions.smoothMax</font>(x1=<font color="red">cos</font>(zenAng.zen), x2=epsCos, deltaX=0.1*epsCos)
       = HDirNor_in_internal <font color="darkgreen">
      &quot;Calculate the HDirNor using HGloHor and HDifHor according to (A.4.14) and (A.4.15)&quot;</font>;
  <font color="blue">else</font>
    <font color="red">connect</font>(conDirNorRad.HOut, HDirNor_in_internal) <font color="darkgreen">
      &quot;Get HDirNor using weather data file&quot;</font>;
  <font color="blue">end if</font>;
  <font color="red">connect</font>(HDirNor_in_internal, cheDirNorRad.HIn);

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(chePre.POut, weaBus.pAtm);
  <font color="red">connect</font>(cheTotSkyCov.nOut, weaBus.nTot);
  <font color="red">connect</font>(cheOpaSkyCov.nOut, weaBus.nOpa);
  <font color="red">connect</font>(cheGloHorRad.HOut, weaBus.HGloHor);
  <font color="red">connect</font>(cheDifHorRad.HOut, weaBus.HDifHor);
  <font color="red">connect</font>(cheDirNorRad.HOut, weaBus.HDirNor);
  <font color="red">connect</font>(cheCeiHei.ceiHeiOut, weaBus.celHei);
  <font color="red">connect</font>(cheWinSpe.winSpeOut, weaBus.winSpe);
  <font color="red">connect</font>(cheHorRad.HOut, weaBus.radHorIR);
  <font color="red">connect</font>(cheWinDir.nOut, weaBus.winDir);
  <font color="red">connect</font>(cheOpaSkyCov.nOut, TBlaSky.nOpa);
  <font color="red">connect</font>(cheHorRad.HOut, TBlaSky.radHorIR);
  <font color="red">connect</font>(TBlaSky.TBlaSky, weaBus.TBlaSky);
  <font color="red">connect</font>(simTim.y, weaBus.cloTim);
  <font color="red">connect</font>(simTim.y, add.u2);
  <font color="red">connect</font>(con30mins.y, add.u1);
  <font color="red">connect</font>(add.y, conTim1.simTim);
  <font color="red">connect</font>(conTim1.calTim, datRea1.u);
  <font color="red">connect</font>(simTim.y, locTim.cloTim);
  <font color="red">connect</font>(simTim.y, conTim.simTim);
  <font color="red">connect</font>(conTim.calTim, datRea.u);
  <font color="red">connect</font>(simTim.y, eqnTim.nDay);
  <font color="red">connect</font>(eqnTim.eqnTim, solTim.equTim);
  <font color="red">connect</font>(locTim.locTim, solTim.locTim);
  <font color="red">connect</font>(solTim.solTim, weaBus.solTim);
  <font color="red">connect</font>(datRea.y[13], cheTotSkyCov.nIn);
  <font color="red">connect</font>(datRea.y[14], cheOpaSkyCov.nIn);
  <font color="red">connect</font>(datRea.y[16], cheCeiHei.ceiHeiIn);
  <font color="red">connect</font>(datRea.y[11], conWinDir.u);
  <font color="red">connect</font>(datRea1.y[1], conHorRad.HIn);
  <font color="red">connect</font>(conHorRad.HOut, cheHorRad.HIn);
  <font color="red">connect</font>(cheTemDryBul.TOut, TBlaSky.TDryBul);
  <font color="red">connect</font>(datRea.y[1], conTDryBul.u);
  <font color="red">connect</font>(datRea.y[2], conTDewPoi.u);
  <font color="red">connect</font>(conTDewPoi.y, cheTemDewPoi.TIn);
  <font color="red">connect</font>(cheTemDewPoi.TOut, weaBus.TDewPoi);
  <font color="red">connect</font>(TBlaSky.TDewPoi, cheTemDewPoi.TOut);
  <font color="red">connect</font>(datRea1.y[3], conDirNorRad.HIn);
  <font color="red">connect</font>(datRea1.y[2], conGloHorRad.HIn);
  <font color="red">connect</font>(datRea1.y[4], conDifHorRad.HIn);
  <font color="red">connect</font>(conRelHum.relHumIn, datRea.y[3]);
  <font color="red">connect</font>(cheRelHum.relHumOut, weaBus.relHum);
  <font color="red">connect</font>(cheTemDryBul.TOut, weaBus.TDryBul);
  <font color="red">connect</font>(decAng.decAng, zenAng.decAng);
  <font color="red">connect</font>(solHouAng.solHouAng, zenAng.solHouAng);
  <font color="red">connect</font>(solHouAng.solTim, solTim.solTim);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(decAng.nDay, simTim.y);
  <font color="red">connect</font>(zenAng.zen, altAng.zen);
  <font color="red">connect</font>(altAng.alt, solBus.alt);
  <font color="red">connect</font>(zenAng.zen, solBus.zen);
  <font color="red">connect</font>(solBus, weaBus.sol);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(decAng.decAng, solBus.dec);
  <font color="red">connect</font>(solHouAng.solHouAng, solBus.solHouAng);
  <font color="red">connect</font>(longitude.y, solBus.lon);
  <font color="red">connect</font>(latitude.y, solBus.lat);</textblock>

  <font color="darkgreen">// Connectors for wet bulb temperature.</font>
  <font color="darkgreen">// These are removed if computeWetBulbTemperature = false</font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(chePre.POut, tWetBul_TDryBulXi.p);
  <font color="red">connect</font>(tWetBul_TDryBulXi.TWetBul, weaBus.TWetBul);
  <font color="red">connect</font>(cheTemDryBul.TOut, tWetBul_TDryBulXi.TDryBul);
  <font color="red">connect</font>(cheRelHum.relHumOut, tWetBul_TDryBulXi.phi);</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ReaderTMY3;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Bus<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.BoundaryConditi4cf2958f71af316aa.BusI.png" ALT="Buildings.BoundaryConditions.WeatherData.Bus" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.BoundaryConditions.WeatherData.Bus"></A><A HREF="Buildings_BoundaryConditions_WeatherData.html#Buildings.BoundaryConditions.WeatherData"
>Buildings.BoundaryConditions.WeatherData</A>.Bus</H2>
<B>Data bus that stores weather data</B><p></P>
<IMG SRC="Buildings.BoundaryConditi4cf2958f71af316aa.BusD.png" ALT="Buildings.BoundaryConditions.WeatherData.Bus">
<P></P><H3>Information</H3>

<p>
This component is an expandable connector that is used to implement a bus that contains the weather data.
</p>
<pre>
</PRE><P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A> (Icon for signal bus).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">expandable connector</font> Bus <font color="darkgreen">&quot;Data bus that stores weather data&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Bus;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Thu Oct 24 15:08:00 2013.
</address></BODY>
</HTML>
