<HTML>
<HEAD>
<TITLE>Buildings.Fluid.Chillers</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Package with chiller models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Chillers<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.Chillers"></A><A HREF="Buildings_Fluid.html#Buildings.Fluid"
>Buildings.Fluid</A>.Chillers</H2>
<B>Package with chiller models</B>
<P></P>
<P></P><H3>Information</H3>

This package contains components models for chillers.
The model 
<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.Carnot"
>
Buildings.Fluid.Chillers.Carnot</a> computes the coefficient of performance
based on a change in the Carnot effectiveness.
The models
<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.ElectricReformulatedEIR"
>
Buildings.Fluid.Chillers.ElectricReformulatedEIR</a>
and
<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.ElectricEIR"
>
Buildings.Fluid.Chillers.ElectricEIR</a>
use performance curves from the package
<A HREF="Buildings_Fluid_Chillers_Data.html#Buildings.Fluid.Chillers.Data"
>
Buildings.Fluid.Chillers.Data</a>
to compute the chiller performance.
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</A> (Icon for package containing variants).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.CarnotS.png" ALT="Buildings.Fluid.Chillers.Carnot" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.Carnot"
>Carnot</A>
</TD><TD>Chiller with performance curve adjusted based on Carnot efficiency</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRS.png" ALT="Buildings.Fluid.Chillers.ElectricReformulatedEIR" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.ElectricReformulatedEIR"
>ElectricReformulatedEIR</A>
</TD><TD>Electric chiller based on the DOE-2.1 model, but with performance as a function of condenser leaving instead of entering temperature</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRS.png" ALT="Buildings.Fluid.Chillers.ElectricEIR" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.ElectricEIR"
>ElectricEIR</A>
</TD><TD>Electric chiller based on the DOE-2.1 model</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.ExamplesS.png" ALT="Buildings.Fluid.Chillers.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers_Examples.html#Buildings.Fluid.Chillers.Examples"
>Examples</A>
</TD><TD>Collection of models that illustrate model use and test models</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.DataS.png" ALT="Buildings.Fluid.Chillers.Data" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers_Data.html#Buildings.Fluid.Chillers.Data"
>Data</A>
</TD><TD>Performance data for electric chillers</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Chillers.BaseClassesS.png" ALT="Buildings.Fluid.Chillers.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Chillers_BaseClasses.html#Buildings.Fluid.Chillers.BaseClasses"
>BaseClasses</A>
</TD><TD>Package with base classes for Buildings.Fluid.Chillers</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Carnot<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Chillers.CarnotI.png" ALT="Buildings.Fluid.Chillers.Carnot" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Chillers.Carnot"></A><A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers"
>Buildings.Fluid.Chillers</A>.Carnot</H2>
<B>Chiller with performance curve adjusted based on Carnot efficiency</B><p></P>
<IMG SRC="Buildings.Fluid.Chillers.CarnotD.png" ALT="Buildings.Fluid.Chillers.Carnot">
<P></P><H3>Information</H3>

<p>
This is model of a chiller whose coefficient of performance (COP) changes
with temperatures in the same way as the Carnot efficiency changes.
The COP at the nominal conditions can be specified by a parameter, or
it can be computed by the model based on the Carnot effectiveness, in which
case
</p>
<p align="center" style="font-style:italic;">
  COP<sub>0</sub> = &eta;<sub>car</sub> COP<sub>car</sub>
= &eta;<sub>car</sub> T<sub>eva</sub> &frasl; (T<sub>con</sub>-T<sub>eva</sub>),
</p>
<p>
where <i>T<sub>eva</sub></i> is the evaporator temperature 
and <i>T<sub>con</sub></i> is the condenser temperature.
On the <code>Advanced</code> tab, a user can specify the temperature that
will be used as the evaporator (or condenser) temperature. The options
are the temperature of the fluid volume, of <code>port_a</code>, of
<code>port_b</code>, or the average temperature of <code>port_a</code> and
<code>port_b</code>.
</p>
<p>
The chiller COP is computed as the product
</p>
<p align="center" style="font-style:italic;">
  COP = &eta;<sub>car</sub> COP<sub>car</sub> &eta;<sub>PL</sub>,
</p>
<p>
where <i>&eta;<sub>car</sub></i> is the Carnot effectiveness, 
<i>COP<sub>car</sub></i> is the Carnot efficiency and
<i>&eta;<sub>PL</sub></i> is a polynomial in the control signal <i>y</i>
that can be used to take into account a change in <i>COP</i> at part load 
conditions.
</p>
<p>
On the <code>Dynamics</code> tag, the model can be parametrized to compute a transient
or steady-state response.
The transient response of the model is computed using a first
order differential equation for the evaporator and condenser fluid volumes.
The chiller outlet temperatures are equal to the temperatures of these lumped volumes.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"
>Interfaces.FourPortHeatMassExchanger</A> (Model transporting two fluid streams between four ports with storing mass or energy).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Power"
>Power</A></TD><TD>P_nominal</TD><TD>&nbsp;</TD><TD>Nominal compressor power (at y=1) [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>TemperatureDifference</A></TD><TD>dTEva_nominal</TD><TD>10</TD><TD>Temperature difference evaporator inlet-outlet [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>TemperatureDifference</A></TD><TD>dTCon_nominal</TD><TD>10</TD><TD>Temperature difference condenser outlet-inlet [K]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Efficiency</TD></TR>
<TR><TD>Boolean</TD><TD>use_eta_Carnot</TD><TD>true</TD><TD>Set to true to use Carnot efficiency</TD></TR>
<TR><TD>Real</TD><TD>etaCar</TD><TD>&nbsp;</TD><TD>Carnot effectiveness (=COP/COP_Carnot)</TD></TR>
<TR><TD>Real</TD><TD>COP_nominal</TD><TD>&nbsp;</TD><TD>Coefficient of performance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>TCon_nominal</TD><TD>303.15</TD><TD>Condenser temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>TEva_nominal</TD><TD>278.15</TD><TD>Evaporator temperature [K]</TD></TR>
<TR><TD>Real</TD><TD>a[:]</TD><TD>{1}</TD><TD>Coefficients for efficiency curve (need p(a=a, y=1)=1)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Temperature dependence</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.EfficiencyInput"
>EfficiencyInput</A></TD><TD>effInpEva</TD><TD>Buildings.Fluid.Types.Effici...</TD><TD>Temperatures of evaporator fluid used to compute Carnot efficiency</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.EfficiencyInput"
>EfficiencyInput</A></TD><TD>effInpCon</TD><TD>Buildings.Fluid.Types.Effici...</TD><TD>Temperatures of condenser fluid used to compute Carnot efficiency</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p1_start</TD><TD>Medium1.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T1_start</TD><TD>Medium1.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X1_start[Medium1.nX]</TD><TD>Medium1.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_start[Medium1.nC]</TD><TD>fill(0, Medium1.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_nominal[Medium1.nC]</TD><TD>fill(1E-2, Medium1.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p2_start</TD><TD>Medium2.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T2_start</TD><TD>Medium2.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X2_start[Medium2.nX]</TD><TD>Medium2.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_start[Medium2.nC]</TD><TD>fill(0, Medium2.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_nominal[Medium2.nC]</TD><TD>fill(1E-2, Medium2.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>y</TD><TD>Part load ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>P</TD><TD>Electric power consumed by compressor [W]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Carnot <font color="darkgreen">
  &quot;Chiller with performance curve adjusted based on Carnot efficiency&quot;</font>
 <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"
>Interfaces.FourPortHeatMassExchanger</A>(
    vol1(
      <font color="blue">final </font>prescribedHeatFlowRate = true),
    <font color="blue">redeclare </font><font color="blue">final </font><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</A> vol2);

  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.EfficiencyInput"
>Buildings.Fluid.Types.EfficiencyInput</A> effInpEva=
    Buildings.Fluid.Types.EfficiencyInput.volume <font color="darkgreen">
    &quot;Temperatures of evaporator fluid used to compute Carnot efficiency&quot;</font>;
  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.EfficiencyInput"
>Buildings.Fluid.Types.EfficiencyInput</A> effInpCon=
    Buildings.Fluid.Types.EfficiencyInput.port_a <font color="darkgreen">
    &quot;Temperatures of condenser fluid used to compute Carnot efficiency&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Power"
>Modelica.SIunits.Power</A> P_nominal <font color="darkgreen">
    &quot;Nominal compressor power (at y=1)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>Modelica.SIunits.TemperatureDifference</A> dTEva_nominal = 10 <font color="darkgreen">
    &quot;Temperature difference evaporator inlet-outlet&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>Modelica.SIunits.TemperatureDifference</A> dTCon_nominal = 10 <font color="darkgreen">
    &quot;Temperature difference condenser outlet-inlet&quot;</font>;
  <font color="darkgreen">// Efficiency</font>
  <font color="blue">parameter </font>Boolean use_eta_Carnot = true <font color="darkgreen">
    &quot;Set to true to use Carnot efficiency&quot;</font>;
  <font color="blue">parameter </font>Real etaCar(fixed=use_eta_Carnot) <font color="darkgreen">
    &quot;Carnot effectiveness (=COP/COP_Carnot)&quot;</font>;
  <font color="blue">parameter </font>Real COP_nominal(fixed=<font color="blue">not </font>use_eta_Carnot) <font color="darkgreen">
    &quot;Coefficient of performance&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TCon_nominal = 303.15 <font color="darkgreen">
    &quot;Condenser temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEva_nominal = 278.15 <font color="darkgreen">
    &quot;Evaporator temperature&quot;</font>;

  <font color="blue">parameter </font>Real a[:] = {1} <font color="darkgreen">
    &quot;Coefficients for efficiency curve (need p(a=a, y=1)=1)&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> y(min=0, max=1) <font color="darkgreen">&quot;Part load ratio&quot;</font>;</textblock>
  Real etaPL <font color="darkgreen">&quot;Efficiency due to part load of compressor (etaPL(y=1)=1&quot;</font>;
  Real COP(min=0) <font color="darkgreen">&quot;Coefficient of performance&quot;</font>;
  Real COPCar(min=0) <font color="darkgreen">&quot;Carnot efficiency&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QCon_flow <font color="darkgreen">&quot;Condenser heat input&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QEva_flow <font color="darkgreen">&quot;Evaporator heat input&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> P(<font color="blue">final </font>quantity=&quot;Power&quot;, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Electric power consumed by compressor&quot;</font>;</textblock>
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TCon <font color="darkgreen">
    &quot;Condenser temperature used to compute efficiency&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEva <font color="darkgreen">
    &quot;Evaporator temperature used to compute efficiency&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</A> preHeaFloEva <font color="darkgreen">
    &quot;Prescribed heat flow rate&quot;</font>;
  <A HREF="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</A> preHeaFloCon <font color="darkgreen">
    &quot;Prescribed heat flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> QEva_flow_in(y=QEva_flow) <font color="darkgreen">
    &quot;Evaporator heat flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> QCon_flow_in(y=QCon_flow) <font color="darkgreen">
    &quot;Condenser heat flow rate&quot;</font>;</textblock>

  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> staA1 <font color="darkgreen">&quot;Medium properties in port_a1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> staB1 <font color="darkgreen">&quot;Medium properties in port_b1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> staA2 <font color="darkgreen">&quot;Medium properties in port_a2&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> staB2 <font color="darkgreen">&quot;Medium properties in port_b2&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">assert</font>(dTEva_nominal&gt;0, &quot;Parameter dTEva_nominal must be positive.&quot;);
  <font color="red">assert</font>(dTCon_nominal&gt;0, &quot;Parameter dTCon_nominal must be positive.&quot;);
  <font color="blue">if </font>use_eta_Carnot<font color="blue"> then</font>
    COP_nominal = etaCar * TEva_nominal/(TCon_nominal-TEva_nominal);
  <font color="blue">else</font>
    etaCar = COP_nominal / (TEva_nominal/(TCon_nominal-TEva_nominal));
  <font color="blue">end if</font>;
  <font color="red">assert</font>(<font color="red">abs</font>(<font color="red">Buildings.Utilities.Math.Functions.polynomial</font>(
         a=a, x=y)-1) &lt; 0.01, &quot;Efficiency curve is wrong. Need etaPL(y=1)=1.&quot;);
  <font color="red">assert</font>(etaCar &gt; 0.1, &quot;Parameters lead to etaCar &lt; 0.1. Check parameters.&quot;);
  <font color="red">assert</font>(etaCar &lt; 1,   &quot;Parameters lead to etaCar &gt; 1. Check parameters.&quot;);
<font color="blue">equation </font>
  <font color="blue">if </font>allowFlowReversal1<font color="blue"> then</font>
    <font color="blue">if </font>homotopyInitialization<font color="blue"> then</font>
      staA1=<font color="red">Medium1.setState_phX</font>(port_a1.p,
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_a1.h_outflow),
                                   simplified=<font color="red">inStream</font>(port_a1.h_outflow)),
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_a1.Xi_outflow),
                                   simplified=<font color="red">inStream</font>(port_a1.Xi_outflow)));
      staB1=<font color="red">Medium1.setState_phX</font>(port_b1.p,
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_b1.h_outflow),
                                   simplified=port_b1.h_outflow),
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_b1.Xi_outflow),
                            simplified=port_b1.Xi_outflow));

    <font color="blue">else</font>
      staA1=<font color="red">Medium1.setState_phX</font>(port_a1.p,
                          <font color="red">actualStream</font>(port_a1.h_outflow),
                          <font color="red">actualStream</font>(port_a1.Xi_outflow));
      staB1=<font color="red">Medium1.setState_phX</font>(port_b1.p,
                          <font color="red">actualStream</font>(port_b1.h_outflow),
                          <font color="red">actualStream</font>(port_b1.Xi_outflow));
    <font color="blue">end if</font>;<font color="darkgreen"> // homotopyInitialization</font>
  <font color="blue">else</font><font color="darkgreen"> // reverse flow not allowed</font>
    staA1=<font color="red">Medium1.setState_phX</font>(port_a1.p,
                             <font color="red">inStream</font>(port_a1.h_outflow),
                             <font color="red">inStream</font>(port_a1.Xi_outflow));
    staB1=<font color="red">Medium1.setState_phX</font>(port_b1.p,
                             <font color="red">inStream</font>(port_b1.h_outflow),
                             <font color="red">inStream</font>(port_b1.Xi_outflow));
  <font color="blue">end if</font>;
  <font color="blue">if </font>allowFlowReversal2<font color="blue"> then</font>
    <font color="blue">if </font>homotopyInitialization<font color="blue"> then</font>
      staA2=<font color="red">Medium2.setState_phX</font>(port_a2.p,
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_a2.h_outflow),
                                   simplified=<font color="red">inStream</font>(port_a2.h_outflow)),
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_a2.Xi_outflow),
                                   simplified=<font color="red">inStream</font>(port_a2.Xi_outflow)));
      staB2=<font color="red">Medium2.setState_phX</font>(port_b2.p,
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_b2.h_outflow),
                                   simplified=port_b2.h_outflow),
                          <font color="red">homotopy</font>(actual=<font color="red">actualStream</font>(port_b2.Xi_outflow),
                            simplified=port_b2.Xi_outflow));

    <font color="blue">else</font>
      staA2=<font color="red">Medium2.setState_phX</font>(port_a2.p,
                          <font color="red">actualStream</font>(port_a2.h_outflow),
                          <font color="red">actualStream</font>(port_a2.Xi_outflow));
      staB2=<font color="red">Medium2.setState_phX</font>(port_b2.p,
                          <font color="red">actualStream</font>(port_b2.h_outflow),
                          <font color="red">actualStream</font>(port_b2.Xi_outflow));
    <font color="blue">end if</font>;<font color="darkgreen"> // homotopyInitialization</font>
  <font color="blue">else</font><font color="darkgreen"> // reverse flow not allowed</font>
    staA2=<font color="red">Medium2.setState_phX</font>(port_a2.p,
                             <font color="red">inStream</font>(port_a2.h_outflow),
                             <font color="red">inStream</font>(port_a2.Xi_outflow));
    staB2=<font color="red">Medium2.setState_phX</font>(port_b2.p,
                             <font color="red">inStream</font>(port_b2.h_outflow),
                             <font color="red">inStream</font>(port_b2.Xi_outflow));
  <font color="blue">end if</font>;
  <font color="darkgreen">// Set temperatures that will be used to compute Carnot efficiency</font>
  <font color="blue">if </font>effInpCon == Buildings.Fluid.Types.EfficiencyInput.volume<font color="blue"> then</font>
    TCon = vol1.heatPort.T;
  <font color="blue">elseif </font>effInpCon == Buildings.Fluid.Types.EfficiencyInput.port_a<font color="blue"> then</font>
    TCon =<font color="red"> Medium1.temperature</font>(staA1);
  <font color="blue">elseif </font>effInpCon == Buildings.Fluid.Types.EfficiencyInput.port_b<font color="blue"> then</font>
    TCon =<font color="red"> Medium1.temperature</font>(staB1);
  <font color="blue">else</font>
    TCon = 0.5 * (<font color="red">Medium1.temperature</font>(staA1)+<font color="red">Medium1.temperature</font>(staB1));
  <font color="blue">end if</font>;

  <font color="blue">if </font>effInpEva == Buildings.Fluid.Types.EfficiencyInput.volume<font color="blue"> then</font>
    TEva = vol2.heatPort.T;
  <font color="blue">elseif </font>effInpEva == Buildings.Fluid.Types.EfficiencyInput.port_a<font color="blue"> then</font>
    TEva =<font color="red"> Medium2.temperature</font>(staA2);
  <font color="blue">elseif </font>effInpEva == Buildings.Fluid.Types.EfficiencyInput.port_b<font color="blue"> then</font>
    TEva =<font color="red"> Medium2.temperature</font>(staB2);
  <font color="blue">else</font>
    TEva = 0.5 * (<font color="red">Medium2.temperature</font>(staA2)+<font color="red">Medium2.temperature</font>(staB2));
  <font color="blue">end if</font>;

  etaPL  =<font color="red"> Buildings.Utilities.Math.Functions.polynomial</font>(a=a, x=y);
  P = y * P_nominal;
  COPCar = TEva /<font color="red"> Buildings.Utilities.Math.Functions.smoothMax</font>(x1=1, x2=TCon-TEva, deltaX=0.25);
  COP = etaCar * COPCar * etaPL;
  -QEva_flow = COP * P;
  QCon_flow = P - QEva_flow;

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(QCon_flow_in.y, preHeaFloCon.Q_flow);
  <font color="red">connect</font>(preHeaFloCon.port, vol1.heatPort);
  <font color="red">connect</font>(QEva_flow_in.y, preHeaFloEva.Q_flow);
  <font color="red">connect</font>(preHeaFloEva.port, vol2.heatPort);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Carnot;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ElectricReformulatedEIR<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRI.png" ALT="Buildings.Fluid.Chillers.ElectricReformulatedEIR" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Chillers.ElectricReformulatedEIR"></A><A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers"
>Buildings.Fluid.Chillers</A>.ElectricReformulatedEIR</H2>
<B>Electric chiller based on the DOE-2.1 model, but with performance as a function of condenser leaving instead of entering temperature</B><p></P>
<IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRD.png" ALT="Buildings.Fluid.Chillers.ElectricReformulatedEIR">
<P></P><H3>Information</H3>

<p>
Model of an electric chiller, based on the model by 
Hydeman et al. (2002) that has been developed in the CoolTools project
and that is implemented in EnergyPlus as the model 
<code>Chiller:Electric:ReformulatedEIR</code>.
This empirical model is similar to 
<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.ElectricEIR"
>
Buildings.Fluid.Chillers.ElectricEIR</a>.
The difference is that to compute the performance, this model
uses the condenser leaving temperature instead of the entering temperature,
and it uses a bicubic polynomial to compute the part load performance.
</p>

<p>
This model uses three functions to predict capacity and power consumption:</p>
<ul>
<li>
A biquadratic function is used to predict cooling capacity as a function of
condenser leaving and evaporator leaving fluid temperature.
</li>
<li>
A bicubic function is used to predict power input to cooling capacity ratio 
as a function of condenser leaving temperature and part load ratio.
</li>
<li>
A biquadratic functions is used to predict power input to cooling capacity ratio as a function of
condenser leaving and evaporator leaving fluid temperature.
</li>
</ul>

<p>
These curves are stored in the data record <code>per</code> and are available from
<a href="Buildings.Fluid.Chillers.Data.ElectricReformulatedEIRChiller">
Buildings.Fluid.Chillers.Data.ElectricReformulatedEIRChiller</a>.
Additional performance curves can be developed using
two available techniques (Hydeman and Gillespie, 2002). The first technique is called the
Least-squares Linear Regression method and is used when sufficient performance data exist
to employ standard least-square linear regression techniques. The second technique is called
Reference Curve Method and is used when insufficient performance data exist to apply linear
regression techniques. A detailed description of both techniques can be found in 
Hydeman and Gillespie (2002).
</p>

<p>
The model takes as an input the set point for the leaving chilled water temperature, 
which is met if the chiller has sufficient capacity.
Thus, the model has a built-in, ideal temperature control.
The model has three tests on the part load ratio and the cycling ratio:</p>
<ol>
<li>
The test<pre>
  PLR1 =min(QEva_flow_set/QEva_flow_ava, per.PLRMax);
</pre>
ensures that the chiller capacity does not exceed the chiller capacity specified
by the parameter <code>per.PLRMax</code>.
</li>
<li>
The test <pre>
  CR = min(PLR1/per.PRLMin, 1.0);
</pre>
computes a cycling ratio. This ratio expresses the fraction of time
that a chiller would run if it were to cycle because its load is smaller than 
the minimal load at which it can operate. 
Note that this model continuously operates even if the part load ratio is below the minimum part load ratio. 
Its leaving evaporator and condenser temperature can therefore be considered as an 
average temperature between the modes where the compressor is off and on.
</li>
<li>
The test <pre>
  PLR2 = max(per.PLRMinUnl, PLR1);
</pre>
computes the part load ratio of the compressor. 
The assumption is that for a part load ratio below <code>per.PLRMinUnl</code>,
the chiller uses hot gas bypass to reduce the capacity, while the compressor
power draw does not change. 
</li>
</ol>

<p>
The electric power only contains the power for the compressor, but not any power for pumps or fans.
</p>
<p>
The model can be parametrized to compute a transient
or steady-state response.
The transient response of the boiler is computed using a first
order differential equation for the evaporator and condenser fluid volumes.
The chiller outlet temperatures are equal to the temperatures of these lumped volumes.
</p>

<h4>References</h4>
<ul>
<li>
Hydeman, M., N. Webb, P. Sreedharan, and S. Blanc. 2002. Development and Testing of a
Reformulated Regression-Based Electric Chiller Model. <i>ASHRAE Transactions</i>, HI-02-18-2.
</li>
<li>
Hydeman, M. and K.L. Gillespie. 2002. Tools and Techniques to Calibrate Electric Chiller
Component Models. <i>ASHRAE Transactions</i>, AC-02-9-1.
</li>
</ul>
<P></P>
Extends from <A HREF="Buildings_Fluid_Chillers_BaseClasses.html#Buildings.Fluid.Chillers.BaseClasses.PartialElectric"
>Buildings.Fluid.Chillers.BaseClasses.PartialElectric</A> (Partial model for electric chiller based on the model in DOE-2, CoolTools and EnergyPlus).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_Chillers_Data_ElectricReformulatedEIR.html#Buildings.Fluid.Chillers.Data.ElectricReformulatedEIR.Generic"
>Generic</A></TD><TD>per</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>mCon_flow_nominal</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>mEva_flow_nominal</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR><TD>Real</TD><TD>capFunT.start</TD><TD>1</TD><TD>Cooling capacity factor function of temperature curve</TD></TR>
<TR><TD>Real</TD><TD>EIRFunT.start</TD><TD>1</TD><TD>Power input to cooling capacity ratio function of temperature curve</TD></TR>
<TR><TD>Real</TD><TD>EIRFunPLR.start</TD><TD>1</TD><TD>Power input to cooling capacity ratio function of part load ratio</TD></TR>
<TR><TD>Real</TD><TD>PLR1.start</TD><TD>1</TD><TD>Part load ratio</TD></TR>
<TR><TD>Real</TD><TD>PLR2.start</TD><TD>1</TD><TD>Part load ratio</TD></TR>
<TR><TD>Real</TD><TD>CR.start</TD><TD>1</TD><TD>Cycling ratio</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p1_start</TD><TD>Medium1.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T1_start</TD><TD>273.15 + 25</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X1_start[Medium1.nX]</TD><TD>Medium1.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_start[Medium1.nC]</TD><TD>fill(0, Medium1.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_nominal[Medium1.nC]</TD><TD>fill(1E-2, Medium1.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p2_start</TD><TD>Medium2.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T2_start</TD><TD>273.15 + 5</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X2_start[Medium2.nX]</TD><TD>Medium2.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_start[Medium2.nC]</TD><TD>fill(0, Medium2.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_nominal[Medium2.nC]</TD><TD>fill(1E-2, Medium2.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>on</TD><TD>Set to true to enable compressor, or false to disable compressor</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TSet</TD><TD>Set point for leaving chilled water temperature [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>P</TD><TD>Electric power consumed by compressor [W]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ElectricReformulatedEIR <font color="darkgreen">
  &quot;Electric chiller based on the DOE-2.1 model, but with performance as a function of condenser leaving instead of entering temperature&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Chillers_BaseClasses.html#Buildings.Fluid.Chillers.BaseClasses.PartialElectric"
>Buildings.Fluid.Chillers.BaseClasses.PartialElectric</A>(
  <font color="blue">final </font>QEva_flow_nominal = per.QEva_flow_nominal,
  <font color="blue">final </font>COP_nominal= per.COP_nominal,
  <font color="blue">final </font>PLRMax= per.PLRMax,
  <font color="blue">final </font>PLRMinUnl= per.PLRMinUnl,
  <font color="blue">final </font>PLRMin= per.PLRMin,
  <font color="blue">final </font>etaMotor= per.etaMotor,
  <font color="blue">final </font>mEva_flow_nominal= per.mEva_flow_nominal,
  <font color="blue">final </font>mCon_flow_nominal= per.mCon_flow_nominal,
  <font color="blue">final </font>TEvaLvg_nominal= per.TEvaLvg_nominal);

  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Chillers_Data_ElectricReformulatedEIR.html#Buildings.Fluid.Chillers.Data.ElectricReformulatedEIR.Generic"
>Buildings.Fluid.Chillers.Data.ElectricReformulatedEIR.Generic</A> per <font color="darkgreen">
    &quot;Performance data&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Temperature_degC"
>Modelica.SIunits.Conversions.NonSIunits.Temperature_degC</A>
    TConLvg_nominal_degC=
    <font color="red">Modelica.SIunits.Conversions.to_degC</font>(per.TConLvg_nominal) <font color="darkgreen">
    &quot;Temperature of fluid leaving condenser at nominal condition&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Temperature_degC"
>Modelica.SIunits.Conversions.NonSIunits.Temperature_degC</A> TConLvg_degC <font color="darkgreen">
    &quot;Temperature of fluid leaving condenser&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Verify correctness of performance curves, and write warning if error is bigger than 10%</font>
  <font color="red">Buildings.Fluid.Chillers.BaseClasses.warnIfPerformanceOutOfBounds</font>(
     <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.capFunT,
     x1=TEvaLvg_nominal_degC, x2=TConLvg_nominal_degC),
     &quot;Capacity as a function of temperature &quot;,
     &quot;per.capFunT&quot;);
<font color="blue">equation </font>
  TConLvg_degC=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TConLvg);

  <font color="blue">if </font>on<font color="blue"> then</font>
    <font color="darkgreen">// Compute the chiller capacity fraction, using a biquadratic curve.</font>
    <font color="darkgreen">// Since the regression for capacity can have negative values (for unreasonable temperatures),</font>
    <font color="darkgreen">// we constrain its return value to be non-negative. This prevents the solver to pick the</font>
    <font color="darkgreen">// unrealistic solution.</font>
    capFunT =<font color="red"> max</font>(0,
       <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.capFunT, x1=TEvaLvg_degC, x2=TConLvg_degC));
<font color="darkgreen">/*    assert(capFunT &gt; 0.1, &quot;Error: Received capFunT = &quot; + String(capFunT)  + &quot;.\n&quot;
           + &quot;Coefficient for polynomial seem to be not valid for the encountered temperature range.\n&quot;
           + &quot;Temperatures are TConLvg_degC = &quot; + String(TConLvg_degC) + &quot; degC\n&quot;
           + &quot;                 TEvaLvg_degC = &quot; + String(TEvaLvg_degC) + &quot; degC&quot;);
*/</font>
    <font color="darkgreen">// Chiller energy input ratio biquadratic curve.</font>
    EIRFunT =<font color="red"> Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.EIRFunT, x1=TEvaLvg_degC, x2=TConLvg_degC);
    <font color="darkgreen">// Chiller energy input ratio bicubic curve</font>
    EIRFunPLR   =<font color="red"> Buildings.Utilities.Math.Functions.bicubic</font>(a=per.EIRFunPLR, x1=TConLvg_degC, x2=PLR2);
  <font color="blue">else</font>
    capFunT   = 0;
    EIRFunT   = 0;
    EIRFunPLR = 0;
  <font color="blue">end if</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ElectricReformulatedEIR;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ElectricEIR<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRI.png" ALT="Buildings.Fluid.Chillers.ElectricEIR" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Chillers.ElectricEIR"></A><A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers"
>Buildings.Fluid.Chillers</A>.ElectricEIR</H2>
<B>Electric chiller based on the DOE-2.1 model</B><p></P>
<IMG SRC="Buildings.Fluid.Chillers.e7420d146fd92f17edEIRD.png" ALT="Buildings.Fluid.Chillers.ElectricEIR">
<P></P><H3>Information</H3>

<p>
Model of an electric chiller, based on the DOE-2.1 chiller model and
the EnergyPlus chiller model <code>Chiller:Electric:EIR</code>.
</p>
<p> This model uses three functions to predict capacity and power consumption:
</p>
<ul>
<li>
A biquadratic function is used to predict cooling capacity as a function of
condenser entering and evaporator leaving fluid temperature.
</li>
<li>
A quadratic functions is used to predict power input to cooling capacity ratio with respect to the part load ratio.
</li>
<li>
A biquadratic functions is used to predict power input to cooling capacity ratio as a function of
condenser entering and evaporator leaving fluid temperature.
</li>
</ul>
<p>
These curves are stored in the data record <code>per</code> and are available from
<A HREF="Buildings_Fluid_Chillers_Data_ElectricEIR.html#Buildings.Fluid.Chillers.Data.ElectricEIR"
>
Buildings.Fluid.Chillers.Data.ElectricEIR</a>.
Additional performance curves can be developed using
two available techniques (Hydeman and Gillespie, 2002). The first technique is called the
Least-squares Linear Regression method and is used when sufficient performance data exist
to employ standard least-square linear regression techniques. The second technique is called
Reference Curve Method and is used when insufficient performance data exist to apply linear
regression techniques. A detailed description of both techniques can be found in 
Hydeman and Gillespie (2002).
</p>
<p>
The model takes as an input the set point for the leaving chilled water temperature, 
which is met if the chiller has sufficient capacity.
Thus, the model has a built-in, ideal temperature control.
The model has three tests on the part load ratio and the cycling ratio:
</p>
<ol>
<li>
The test<pre>
  PLR1 =min(QEva_flow_set/QEva_flow_ava, per.PLRMax);
</pre>
ensures that the chiller capacity does not exceed the chiller capacity specified
by the parameter <code>per.PLRMax</code>.
</li>
<li>
The test <pre>
  CR = min(PLR1/per.PRLMin, 1.0);
</pre>
computes a cycling ratio. This ratio expresses the fraction of time
that a chiller would run if it were to cycle because its load is smaller than the 
minimal load at which it can operate. 
Note that this model continuously operates even if the part load ratio is below the minimum part load ratio. 
Its leaving evaporator and condenser temperature can therefore be considered as an 
average temperature between the modes where the compressor is off and on.
</li>
<li>
The test <pre>
  PLR2 = max(per.PLRMinUnl, PLR1);
</pre>
computes the part load ratio of the compressor. 
The assumption is that for a part load ratio below <code>per.PLRMinUnl</code>,
the chiller uses hot gas bypass to reduce the capacity, while the compressor
power draw does not change. 
</li>
</ol>
<p>
The electric power only contains the power for the compressor, but not any power for pumps or fans.
</p>
<p>
The model can be parametrized to compute a transient
or steady-state response.
The transient response of the boiler is computed using a first
order differential equation for the evaporator and condenser fluid volumes.
The chiller outlet temperatures are equal to the temperatures of these lumped volumes.
</p>
<h4>References</h4>
<ul>
<li>
Hydeman, M. and K.L. Gillespie. 2002. Tools and Techniques to Calibrate Electric Chiller
Component Models. <i>ASHRAE Transactions</i>, AC-02-9-1.
</li>
</ul>
<P></P>
Extends from <A HREF="Buildings_Fluid_Chillers_BaseClasses.html#Buildings.Fluid.Chillers.BaseClasses.PartialElectric"
>Buildings.Fluid.Chillers.BaseClasses.PartialElectric</A> (Partial model for electric chiller based on the model in DOE-2, CoolTools and EnergyPlus).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_Chillers_Data_ElectricEIR.html#Buildings.Fluid.Chillers.Data.ElectricEIR.Generic"
>Generic</A></TD><TD>per</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>mCon_flow_nominal</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>mEva_flow_nominal</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR><TD>Real</TD><TD>capFunT.start</TD><TD>1</TD><TD>Cooling capacity factor function of temperature curve</TD></TR>
<TR><TD>Real</TD><TD>EIRFunT.start</TD><TD>1</TD><TD>Power input to cooling capacity ratio function of temperature curve</TD></TR>
<TR><TD>Real</TD><TD>EIRFunPLR.start</TD><TD>1</TD><TD>Power input to cooling capacity ratio function of part load ratio</TD></TR>
<TR><TD>Real</TD><TD>PLR1.start</TD><TD>1</TD><TD>Part load ratio</TD></TR>
<TR><TD>Real</TD><TD>PLR2.start</TD><TD>1</TD><TD>Part load ratio</TD></TR>
<TR><TD>Real</TD><TD>CR.start</TD><TD>1</TD><TD>Cycling ratio</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p1_start</TD><TD>Medium1.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T1_start</TD><TD>273.15 + 25</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X1_start[Medium1.nX]</TD><TD>Medium1.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_start[Medium1.nC]</TD><TD>fill(0, Medium1.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_nominal[Medium1.nC]</TD><TD>fill(1E-2, Medium1.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p2_start</TD><TD>Medium2.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T2_start</TD><TD>273.15 + 5</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X2_start[Medium2.nX]</TD><TD>Medium2.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_start[Medium2.nC]</TD><TD>fill(0, Medium2.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_nominal[Medium2.nC]</TD><TD>fill(1E-2, Medium2.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>on</TD><TD>Set to true to enable compressor, or false to disable compressor</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TSet</TD><TD>Set point for leaving chilled water temperature [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>P</TD><TD>Electric power consumed by compressor [W]</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ElectricEIR <font color="darkgreen">&quot;Electric chiller based on the DOE-2.1 model&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Chillers_BaseClasses.html#Buildings.Fluid.Chillers.BaseClasses.PartialElectric"
>Buildings.Fluid.Chillers.BaseClasses.PartialElectric</A>(
  <font color="blue">final </font>QEva_flow_nominal = per.QEva_flow_nominal,
  <font color="blue">final </font>COP_nominal= per.COP_nominal,
  <font color="blue">final </font>PLRMax= per.PLRMax,
  <font color="blue">final </font>PLRMinUnl= per.PLRMinUnl,
  <font color="blue">final </font>PLRMin= per.PLRMin,
  <font color="blue">final </font>etaMotor= per.etaMotor,
  <font color="blue">final </font>mEva_flow_nominal= per.mEva_flow_nominal,
  <font color="blue">final </font>mCon_flow_nominal= per.mCon_flow_nominal,
  <font color="blue">final </font>TEvaLvg_nominal= per.TEvaLvg_nominal);

  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Chillers_Data_ElectricEIR.html#Buildings.Fluid.Chillers.Data.ElectricEIR.Generic"
>Buildings.Fluid.Chillers.Data.ElectricEIR.Generic</A> per <font color="darkgreen">
    &quot;Performance data&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Temperature_degC"
>Modelica.SIunits.Conversions.NonSIunits.Temperature_degC</A>
    TConEnt_nominal_degC=
    <font color="red">Modelica.SIunits.Conversions.to_degC</font>(per.TConEnt_nominal) <font color="darkgreen">
    &quot;Temperature of fluid entering condenser at nominal condition&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Temperature_degC"
>Modelica.SIunits.Conversions.NonSIunits.Temperature_degC</A> TConEnt_degC <font color="darkgreen">
    &quot;Temperature of fluid entering condenser&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Verify correctness of performance curves, and write warning if error is bigger than 10%</font>
  <font color="red">Buildings.Fluid.Chillers.BaseClasses.warnIfPerformanceOutOfBounds</font>(
     <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.capFunT,
     x1=TEvaLvg_nominal_degC, x2=TConEnt_nominal_degC),
     &quot;Capacity as function of temperature &quot;,
     &quot;per.capFunT&quot;);
<font color="blue">equation </font>
  TConEnt_degC=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TConEnt);

  <font color="blue">if </font>on<font color="blue"> then</font>
    <font color="darkgreen">// Compute the chiller capacity fraction, using a biquadratic curve.</font>
    <font color="darkgreen">// Since the regression for capacity can have negative values (for unreasonable temperatures),</font>
    <font color="darkgreen">// we constrain its return value to be non-negative. This prevents the solver to pick the</font>
    <font color="darkgreen">// unrealistic solution.</font>
    capFunT =<font color="red"> max</font>(0,
       <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.capFunT, x1=TEvaLvg_degC, x2=TConEnt_degC));
<font color="darkgreen">/*    assert(capFunT &gt; 0.1, &quot;Error: Received capFunT = &quot; + String(capFunT)  + &quot;.\n&quot;
           + &quot;Coefficient for polynomial seem to be not valid for the encountered temperature range.\n&quot;
           + &quot;Temperatures are TConEnt_degC = &quot; + String(TConEnt_degC) + &quot; degC\n&quot;
           + &quot;                 TEvaLvg_degC = &quot; + String(TEvaLvg_degC) + &quot; degC&quot;);
*/</font>
    <font color="darkgreen">// Chiller energy input ratio biquadratic curve.</font>
    EIRFunT =<font color="red"> Buildings.Utilities.Math.Functions.biquadratic</font>(a=per.EIRFunT, x1=TEvaLvg_degC, x2=TConEnt_degC);
    <font color="darkgreen">// Chiller energy input ratio quadratic curve</font>
    EIRFunPLR   = per.EIRFunPLR[1]+per.EIRFunPLR[2]*PLR2+per.EIRFunPLR[3]*PLR2^2;
  <font color="blue">else</font>
    capFunT   = 0;
    EIRFunT   = 0;
    EIRFunPLR = 0;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ElectricEIR;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Thu Oct 24 15:08:15 2013.
</address></BODY>
</HTML>
