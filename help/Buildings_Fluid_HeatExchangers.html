<HTML>
<HEAD>
<TITLE>Buildings.Fluid.HeatExchangers</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Package with heat exchanger models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE HeatExchangers<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.HeatExchangers"></A><A HREF="Buildings_Fluid.html#Buildings.Fluid"
>Buildings.Fluid</A>.HeatExchangers</H2>
<B>Package with heat exchanger models</B>
<P></P>
<P></P><H3>Information</H3>

This package contains models for heat exchangers with and without humidity condensation.
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</A> (Icon for package containing variants).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.BoreholesS.png" ALT="Buildings.Fluid.HeatExchangers.Boreholes" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_Boreholes.html#Buildings.Fluid.HeatExchangers.Boreholes"
>Boreholes</A>
</TD><TD>Package with borehole heat exchangers</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.BoreholesS.png" ALT="Buildings.Fluid.HeatExchangers.CoolingTowers" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_CoolingTowers.html#Buildings.Fluid.HeatExchangers.CoolingTowers"
>CoolingTowers</A>
</TD><TD>Package with cooling tower models</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.BoreholesS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>DXCoils</A>
</TD><TD>DX(Direct Expansion) cooling coil models</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.BoreholesS.png" ALT="Buildings.Fluid.HeatExchangers.Radiators" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_Radiators.html#Buildings.Fluid.HeatExchangers.Radiators"
>Radiators</A>
</TD><TD>Package with radiators models for hydronic space heating systems</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.BoreholesS.png" ALT="Buildings.Fluid.HeatExchangers.RadiantSlabs" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_RadiantSlabs.html#Buildings.Fluid.HeatExchangers.RadiantSlabs"
>RadiantSlabs</A>
</TD><TD>Package with radiant slab models</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessS.png" ALT="Buildings.Fluid.HeatExchangers.ConstantEffectiveness" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.ConstantEffectiveness"
>ConstantEffectiveness</A>
</TD><TD>Heat exchanger with constant effectiveness</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessS.png" ALT="Buildings.Fluid.HeatExchangers.DryEffectivenessNTU" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryEffectivenessNTU"
>DryEffectivenessNTU</A>
</TD><TD>Heat exchanger with effectiveness - NTU relation and no moisture condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha6f338ce72407a60erFlowS.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilCounterFlow" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilCounterFlow"
>DryCoilCounterFlow</A>
</TD><TD>Counterflow coil with discretization along the flow paths and without humidity condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha6f338ce72407a60erFlowS.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilCounterFlow" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.WetCoilCounterFlow"
>WetCoilCounterFlow</A>
</TD><TD>Counterflow coil with discretization along the flow paths and humidity condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedS.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilDiscretized" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilDiscretized"
>DryCoilDiscretized</A>
</TD><TD>Coil with discretization along the flow paths and no humidity condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedS.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilDiscretized" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.WetCoilDiscretized"
>WetCoilDiscretized</A>
</TD><TD>Coil with discretization along the flow paths and humidity condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchaf13a6bf1f04387dcribedS.png" ALT="Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed"
>HeaterCoolerPrescribed</A>
</TD><TD>Heater or cooler with prescribed heat flow rate</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchangers.ExamplesS.png" ALT="Buildings.Fluid.HeatExchangers.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_Examples.html#Buildings.Fluid.HeatExchangers.Examples"
>Examples</A>
</TD><TD>Collection of models that illustrate model use and test models</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha65679176979eba56assesS.png" ALT="Buildings.Fluid.HeatExchangers.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>BaseClasses</A>
</TD><TD>Package with base classes for Buildings.Fluid.HeatExchangers</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ConstantEffectiveness<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessI.png" ALT="Buildings.Fluid.HeatExchangers.ConstantEffectiveness" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.ConstantEffectiveness"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.ConstantEffectiveness</H2>
<B>Heat exchanger with constant effectiveness</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessD.png" ALT="Buildings.Fluid.HeatExchangers.ConstantEffectiveness">
<P></P><H3>Information</H3>

<p>
Model for a heat exchanger with constant effectiveness.
</p>
<p>
This model transfers heat in the amount of
</p>
<p align="center" style="font-style:italic;">
  Q = Q<sub>max</sub> &epsilon;,
</p>
<p>
where <i>&epsilon;</i> is a constant effectiveness and 
<i>Q<sub>max</sub></i> is the maximum heat that can be transferred.
</p>
<p>
For a heat and moisture exchanger, use
<A HREF="Buildings_Fluid_MassExchangers.html#Buildings.Fluid.MassExchangers.ConstantEffectiveness"
>
Buildings.Fluid.MassExchangers.ConstantEffectiveness</a>
instead of this model.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness</A> (Partial model to implement heat exchangers based on effectiveness model).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q1_flow</TD><TD>eps*QMax_flow</TD><TD>Heat transfered into the medium 1 [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>mWat1_flow</TD><TD>0</TD><TD>Moisture mass flow rate added to the medium 1 [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q2_flow</TD><TD>-Q1_flow</TD><TD>Heat transfered into the medium 2 [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>mWat2_flow</TD><TD>0</TD><TD>Moisture mass flow rate added to the medium 2 [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly1</TD><TD>true</TD><TD>Set to true if sensible exchange only for medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly2</TD><TD>true</TD><TD>Set to true if sensible exchange only for medium 2</TD></TR>
<TR><TD>Real</TD><TD>eps</TD><TD>0.8</TD><TD>Heat exchanger effectiveness [1]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ConstantEffectiveness <font color="darkgreen">
  &quot;Heat exchanger with constant effectiveness&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness</A>(
    sensibleOnly1 = true,
    sensibleOnly2 = true,
    Q1_flow = eps * QMax_flow,
    Q2_flow = -Q1_flow,
    mWat1_flow = 0,
    mWat2_flow = 0);

  <font color="blue">parameter </font>Real eps(min=0, max=1, unit=&quot;1&quot;) = 0.8 <font color="darkgreen">
    &quot;Heat exchanger effectiveness&quot;</font>;
<font color="blue">equation </font>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ConstantEffectiveness;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DryEffectivenessNTU<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessI.png" ALT="Buildings.Fluid.HeatExchangers.DryEffectivenessNTU" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DryEffectivenessNTU"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.DryEffectivenessNTU</H2>
<B>Heat exchanger with effectiveness - NTU relation and no moisture condensation</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha5646c6cf54136ee9enessD.png" ALT="Buildings.Fluid.HeatExchangers.DryEffectivenessNTU">
<P></P><H3>Information</H3>

<p>
Model of a heat exchanger without humidity condensation. 
This model transfers heat in the amount of 
</p>
<p align="center" style="font-style:italic;">
  Q = Q<sub>max</sub>  &epsilon;<br/>
  &epsilon; = f(NTU, Z, flowRegime),
</p>
<p>
where
<i>Q<sub>max</sub></i> is the maximum heat that can be transferred,
<i>&epsilon;</i> is the heat transfer effectiveness, 
<i>NTU</i> is the Number of Transfer Units,
<i>Z</i> is the ratio of minimum to maximum capacity flow rate and
<i>flowRegime</i> is the heat exchanger flow regime.
such as
parallel flow, cross flow or counter flow.
</p>
<p>
The flow regimes depend on the heat exchanger configuration. All configurations
defined in
<A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerConfiguration"
>
Buildings.Fluid.Types.HeatExchangerConfiguration</a>
are supported.
</p>
<p>
For a heat and moisture exchanger, use
<A HREF="Buildings_Fluid_MassExchangers.html#Buildings.Fluid.MassExchangers.ConstantEffectiveness"
>
Buildings.Fluid.MassExchangers.ConstantEffectiveness</a>
instead of this model.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness</A> (Partial model to implement heat exchangers based on effectiveness model).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q1_flow</TD><TD>eps*QMax_flow</TD><TD>Heat transfered into the medium 1 [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>mWat1_flow</TD><TD>0</TD><TD>Moisture mass flow rate added to the medium 1 [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q2_flow</TD><TD>-Q1_flow</TD><TD>Heat transfered into the medium 2 [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>mWat2_flow</TD><TD>0</TD><TD>Moisture mass flow rate added to the medium 2 [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly1</TD><TD>true</TD><TD>Set to true if sensible exchange only for medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly2</TD><TD>true</TD><TD>Set to true if sensible exchange only for medium 2</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerConfiguration"
>HeatExchangerConfiguration</A></TD><TD>configuration</TD><TD>&nbsp;</TD><TD>Heat exchanger configuration</TD></TR>
<TR><TD>Real</TD><TD>r_nominal</TD><TD>2/3</TD><TD>Ratio between air-side and water-side convective heat transfer (hA-value) at nominal condition</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal heat transfer [W]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_a1_nominal</TD><TD>&nbsp;</TD><TD>Nominal temperature at port a1 [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_a2_nominal</TD><TD>&nbsp;</TD><TD>Nominal temperature at port a2 [K]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DryEffectivenessNTU <font color="darkgreen">
  &quot;Heat exchanger with effectiveness - NTU relation and no moisture condensation&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness</A>(
      sensibleOnly1=true, sensibleOnly2=true,
      Q1_flow = eps*QMax_flow,
      Q2_flow = -Q1_flow,
      mWat1_flow = 0,
      mWat2_flow = 0);
  <font color="blue">import </font>con = <A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerConfiguration"
>Buildings.Fluid.Types.HeatExchangerConfiguration</A>;
  <font color="blue">import </font>flo = <A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</A>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q_flow_nominal <font color="darkgreen">
    &quot;Nominal heat transfer&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T_a1_nominal <font color="darkgreen">
    &quot;Nominal temperature at port a1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T_a2_nominal <font color="darkgreen">
    &quot;Nominal temperature at port a2&quot;</font>;
  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerConfiguration"
>con</A> configuration <font color="darkgreen">&quot;Heat exchanger configuration&quot;</font>;
  <font color="blue">parameter </font>Real r_nominal(
    min=0,
    max=1) = 2/3 <font color="darkgreen">
    &quot;Ratio between air-side and water-side convective heat transfer (hA-value) at nominal condition&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil</A> hA(
    <font color="blue">final </font>r_nominal=r_nominal,
    <font color="blue">final </font>UA_nominal=UA_nominal,
    <font color="blue">final </font>m_flow_nominal_w=m1_flow_nominal,
    <font color="blue">final </font>m_flow_nominal_a=m2_flow_nominal,
    waterSideTemperatureDependent=false,
    airSideTemperatureDependent=false) <font color="darkgreen">
    &quot;Model for convective heat transfer coefficient&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> UA <font color="darkgreen">&quot;UA value&quot;</font>;
  Real eps(min=0, max=1) <font color="darkgreen">&quot;Heat exchanger effectiveness&quot;</font>;
  Real Z(min=0, max=1) <font color="darkgreen">&quot;Ratio of capacity flow rate (CMin/CMax)&quot;</font>;
  <font color="darkgreen">// NTU has been removed as NTU goes to infinity as CMin goes to zero.</font>
  <font color="darkgreen">// This quantity is not good for modeling.</font>
  <font color="darkgreen">//  Real NTU(min=0) &quot;Number of transfer units&quot;;</font>
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> UA_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal UA value&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real NTU_nominal(min=0, fixed=false) <font color="darkgreen">
    &quot;Nominal number of transfer units&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real eps_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal heat transfer effectiveness&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</A> cp1_nominal(fixed=false) <font color="darkgreen">
    &quot;Specific heat capacity of medium 1 at nominal condition&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</A> cp2_nominal(fixed=false) <font color="darkgreen">
    &quot;Specific heat capacity of medium 2 at nominal condition&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> C1_flow_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal capacity flow rate of Medium 1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> C2_flow_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal capacity flow rate of Medium 2&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> CMin_flow_nominal(fixed=false) <font color="darkgreen">
    &quot;Minimal capacity flow rate at nominal condition&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> CMax_flow_nominal(fixed=false) <font color="darkgreen">
    &quot;Maximum capacity flow rate at nominal condition&quot;</font>;
  <font color="blue">parameter </font>Real Z_nominal(
    min=0,
    max=1,
    fixed=false) <font color="darkgreen">&quot;Ratio of capacity flow rate at nominal condition&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T_b1_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal temperature at port b1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T_b2_nominal(fixed=false) <font color="darkgreen">
    &quot;Nominal temperature at port b2&quot;</font>;
  <font color="blue">parameter </font><A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>flo</A> flowRegime_nominal(fixed=false) <font color="darkgreen">
    &quot;Heat exchanger flow regime at nominal flow rates&quot;</font>;
  <A HREF="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>flo</A> flowRegime(fixed=false, start=flowRegime_nominal) <font color="darkgreen">
    &quot;Heat exchanger flow regime&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">assert</font>(m1_flow_nominal &gt; 0,
    &quot;m1_flow_nominal must be positive, m1_flow_nominal = &quot; +<font color="red"> String</font>(
    m1_flow_nominal));
  <font color="red">assert</font>(m2_flow_nominal &gt; 0,
    &quot;m2_flow_nominal must be positive, m2_flow_nominal = &quot; +<font color="red"> String</font>(
    m2_flow_nominal));
  cp1_nominal =<font color="red"> Medium1.specificHeatCapacityCp</font>(<font color="red">Medium1.setState_pTX</font>(
    Medium1.p_default,
    T_a1_nominal,
    Medium1.X_default));
  cp2_nominal =<font color="red"> Medium2.specificHeatCapacityCp</font>(<font color="red">Medium2.setState_pTX</font>(
    Medium2.p_default,
    T_a2_nominal,
    Medium2.X_default));
  <font color="darkgreen">// heat transfered from fluid 1 to 2 at nominal condition</font>
  Q_flow_nominal = m1_flow_nominal*cp1_nominal*(T_a1_nominal - T_b1_nominal);
  Q_flow_nominal = -m2_flow_nominal*cp2_nominal*(T_a2_nominal - T_b2_nominal);
  C1_flow_nominal = m1_flow_nominal*cp1_nominal;
  C2_flow_nominal = m2_flow_nominal*cp2_nominal;
  CMin_flow_nominal =<font color="red"> min</font>(C1_flow_nominal, C2_flow_nominal);
  CMax_flow_nominal =<font color="red"> max</font>(C1_flow_nominal, C2_flow_nominal);
  Z_nominal = CMin_flow_nominal/CMax_flow_nominal;
  eps_nominal =<font color="red"> abs</font>(Q_flow_nominal/((T_a1_nominal - T_a2_nominal)*
    CMin_flow_nominal));
  <font color="red">assert</font>(eps_nominal &gt; 0<font color="blue"> and </font>eps_nominal &lt; 1,
    &quot;eps_nominal out of bounds, eps_nominal = &quot; +<font color="red"> String</font>(eps_nominal) +
    &quot;\n  To achieve the required heat transfer rate at epsilon=0.8, set |T_a1_nominal-T_a2_nominal| = &quot;
     +<font color="red"> String</font>(<font color="red">abs</font>(Q_flow_nominal/0.8*CMin_flow_nominal)) +
    &quot;\n  or increase flow rates. The current parameters result in &quot; +
    &quot;\n  CMin_flow_nominal = &quot; +<font color="red"> String</font>(CMin_flow_nominal) +
    &quot;\n  CMax_flow_nominal = &quot; +<font color="red"> String</font>(CMax_flow_nominal));
  <font color="darkgreen">// Assign the flow regime for the given heat exchanger configuration and capacity flow rates</font>
  <font color="blue">if </font>(configuration == con.CrossFlowStream1MixedStream2Unmixed)<font color="blue"> then</font>
    flowRegime_nominal = <font color="blue">if </font>(C1_flow_nominal &lt; C2_flow_nominal)<font color="blue"> then </font>flo.CrossFlowCMinMixedCMaxUnmixed<font color="blue">
       else </font>flo.CrossFlowCMinUnmixedCMaxMixed;
  <font color="blue">elseif </font>(configuration == con.CrossFlowStream1UnmixedStream2Mixed)<font color="blue"> then</font>
    flowRegime_nominal = <font color="blue">if </font>(C1_flow_nominal &lt; C2_flow_nominal)<font color="blue"> then </font>flo.CrossFlowCMinUnmixedCMaxMixed<font color="blue">
       else </font>flo.CrossFlowCMinMixedCMaxUnmixed;
  <font color="blue">elseif </font>(configuration == con.ParallelFlow)<font color="blue"> then</font>
    flowRegime_nominal = flo.ParallelFlow;
  <font color="blue">elseif </font>(configuration == con.CounterFlow)<font color="blue"> then</font>
    flowRegime_nominal = flo.CounterFlow;
  <font color="blue">elseif </font>(configuration == con.CrossFlowUnmixed)<font color="blue"> then</font>
    flowRegime_nominal = flo.CrossFlowUnmixed;
  <font color="blue">else</font>
    flowRegime_nominal = 0;
    <font color="red">assert</font>(configuration &gt; 0<font color="blue"> and </font>configuration &lt; 6,
      &quot;Invalid heat exchanger configuration.&quot;);
  <font color="blue">end if</font>;
  <font color="darkgreen">// The equation sorter of Dymola 7.3 does not guarantee that the above assert is tested prior to the</font>
  <font color="darkgreen">// function call on the next line. Thus, we add the test on eps_nominal to avoid an error in ntu_epsilonZ</font>
  <font color="darkgreen">// for invalid input arguments</font>
  NTU_nominal = <font color="blue">if </font>(eps_nominal &gt; 0<font color="blue"> and </font>eps_nominal &lt; 1)<font color="blue"> then </font>
    <font color="red">Buildings.Fluid.HeatExchangers.BaseClasses.ntu_epsilonZ</font>(
    eps=eps_nominal,
    Z=Z_nominal,
    flowRegime=flowRegime_nominal)<font color="blue"> else </font>0;
  UA_nominal = NTU_nominal*CMin_flow_nominal;
<font color="blue">equation </font>
  <font color="darkgreen">// Assign the flow regime for the given heat exchanger configuration and capacity flow rates</font>
  <font color="blue">if </font>(configuration == con.ParallelFlow)<font color="blue"> then</font>
    flowRegime = <font color="blue">if </font>(C1_flow*C2_flow &gt;= 0)<font color="blue"> then </font>flo.ParallelFlow<font color="blue"> else </font>flo.CounterFlow;
  <font color="blue">elseif </font>(configuration == con.CounterFlow)<font color="blue"> then</font>
    flowRegime = <font color="blue">if </font>(C1_flow*C2_flow &gt;= 0)<font color="blue"> then </font>flo.CounterFlow<font color="blue"> else </font>flo.ParallelFlow;
  <font color="blue">elseif </font>(configuration == con.CrossFlowUnmixed)<font color="blue"> then</font>
    flowRegime = flo.CrossFlowUnmixed;
  <font color="blue">elseif </font>(configuration == con.CrossFlowStream1MixedStream2Unmixed)<font color="blue"> then</font>
    flowRegime = <font color="blue">if </font>(C1_flow &lt; C2_flow)<font color="blue"> then </font>flo.CrossFlowCMinMixedCMaxUnmixed<font color="blue">
       else </font>flo.CrossFlowCMinUnmixedCMaxMixed;
  <font color="blue">else</font>
    <font color="darkgreen">// have ( configuration == con.CrossFlowStream1UnmixedStream2Mixed)</font>
    flowRegime = <font color="blue">if </font>(C1_flow &lt; C2_flow)<font color="blue"> then </font>flo.CrossFlowCMinUnmixedCMaxMixed<font color="blue">
       else </font>flo.CrossFlowCMinMixedCMaxUnmixed;
  <font color="blue">end if</font>;
  <font color="darkgreen">// Convective heat transfer coefficient</font>
  hA.m1_flow = m1_flow;
  hA.m2_flow = m2_flow;
  hA.T_1 = T_in1;
  hA.T_2 = T_in2;
  UA = 1/(1/hA.hA_1 + 1/hA.hA_2);
  <font color="darkgreen">// effectiveness</font>
  (eps,Z) =<font color="red"> Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_C</font>(
    UA=UA,
    C1_flow=C1_flow,
    C2_flow=C2_flow,
    flowRegime=flowRegime,
    CMin_flow_nominal=CMin_flow_nominal,
    CMax_flow_nominal=CMax_flow_nominal,
    delta=delta);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DryEffectivenessNTU;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DryCoilCounterFlow<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha6f338ce72407a60erFlowI.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilCounterFlow" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DryCoilCounterFlow"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.DryCoilCounterFlow</H2>
<B>Counterflow coil with discretization along the flow paths and without humidity condensation</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha6f338ce72407a60erFlowD.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilCounterFlow">
<P></P><H3>Information</H3>

<p>
Model of a discretized coil without water vapor condensation.
The coil consists of two flow paths which are, at the design flow direction,
in opposite direction to model a counterflow heat exchanger.
The flow paths are discretized into <code>nEle</code> elements. 
Each element is modeled by an instance of
<a href="modelica://Buildings.Fluid.HeatExchangers.BaseClasses.HexElement">
Buildings.Fluid.HeatExchangers.BaseClasses.HexElement</a>.
Each element has a state variable for the metal. Depending
on the value of the boolean parameters <code>steadyState_1</code> and
<code>steadyState_2</code>, the fluid states are modeled dynamically or in steady
state.
</p>
<p>
The convective heat transfer coefficients can, for each fluid individually, be 
computed as a function of the flow rate and/or the temperature,
or assigned to a constant. This computation is done using an instance of
<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>
Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil</a>.
</p>
<p>
To model humidity condensation, use the model 
<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.WetCoilCounterFlow"
>
Buildings.Fluid.HeatExchangers.WetCoilCounterFlow</a> instead of this model, as
this model computes only sensible heat transfer.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Fluid.Interfaces.PartialFourPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A> (Parameters for flow resistance for models with four ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</A></TD><TD>UA_nominal</TD><TD>&nbsp;</TD><TD>Thermal conductance at nominal flow, used to compute heat capacity [W/K]</TD></TR>
<TR><TD>Real</TD><TD>r_nominal</TD><TD>2/3</TD><TD>Ratio between air-side and water-side convective heat transfer coefficient</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>20</TD><TD>Time constant at nominal flow for medium 1 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>1</TD><TD>Time constant at nominal flow for medium 2 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau_m</TD><TD>20</TD><TD>Time constant of metal at nominal UA value [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Integer</TD><TD>nEle</TD><TD>4</TD><TD>Number of pipe segments used for discretization</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance1</TD><TD>false</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance2</TD><TD>false</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics1</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics2</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 2</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Heat transfer</B></TD></TR>
<TR><TD>Boolean</TD><TD>waterSideFlowDependent</TD><TD>true</TD><TD>Set to false to make water-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>airSideFlowDependent</TD><TD>true</TD><TD>Set to false to make air-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>waterSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of temperature</TD></TR>
<TR><TD>Boolean</TD><TD>airSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make air-side hA independent of temperature</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DryCoilCounterFlow <font color="darkgreen">
  &quot;Counterflow coil with discretization along the flow paths and without humidity condensation&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Fluid.Interfaces.PartialFourPortInterface</A>(show_T=false);
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A>(
    <font color="blue">final </font>computeFlowResistance1=false,
    <font color="blue">final </font>computeFlowResistance2=false,
    from_dp1=false,
    from_dp2=false);

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> UA_nominal(min=0) <font color="darkgreen">
    &quot;Thermal conductance at nominal flow, used to compute heat capacity&quot;</font>;
  <font color="blue">parameter </font>Real r_nominal=2/3 <font color="darkgreen">
    &quot;Ratio between air-side and water-side convective heat transfer coefficient&quot;</font>;
  <font color="blue">parameter </font>Integer nEle(min=1) = 4 <font color="darkgreen">
    &quot;Number of pipe segments used for discretization&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics1=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Default formulation of energy balances for volume 1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics2=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Default formulation of energy balances for volume 2&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau1=20 <font color="darkgreen">
    &quot;Time constant at nominal flow for medium 1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau2=1 <font color="darkgreen">
    &quot;Time constant at nominal flow for medium 2&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau_m=20 <font color="darkgreen">
    &quot;Time constant of metal at nominal UA value&quot;</font>;

  <font color="blue">parameter </font>Boolean waterSideFlowDependent=true <font color="darkgreen">
    &quot;Set to false to make water-side hA independent of mass flow rate&quot;</font>;
  <font color="blue">parameter </font>Boolean airSideFlowDependent=true <font color="darkgreen">
    &quot;Set to false to make air-side hA independent of mass flow rate&quot;</font>;
  <font color="blue">parameter </font>Boolean waterSideTemperatureDependent=false <font color="darkgreen">
    &quot;Set to false to make water-side hA independent of temperature&quot;</font>;
  <font color="blue">parameter </font>Boolean airSideTemperatureDependent=false <font color="darkgreen">
    &quot;Set to false to make air-side hA independent of temperature&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q1_flow <font color="darkgreen">
    &quot;Heat transfered from solid into medium 1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q2_flow <font color="darkgreen">
    &quot;Heat transfered from solid into medium 2&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T1[nEle] <font color="darkgreen">&quot;Water temperature&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T2[nEle] <font color="darkgreen">&quot;Air temperature&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> T_m[nEle] <font color="darkgreen">&quot;Metal temperature&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>BaseClasses.HADryCoil</A> hA(
    <font color="blue">final </font>UA_nominal=UA_nominal,
    <font color="blue">final </font>m_flow_nominal_a=m2_flow_nominal,
    <font color="blue">final </font>m_flow_nominal_w=m1_flow_nominal,
    <font color="blue">final </font>waterSideTemperatureDependent=waterSideTemperatureDependent,
    <font color="blue">final </font>waterSideFlowDependent=waterSideFlowDependent,
    <font color="blue">final </font>airSideTemperatureDependent=airSideTemperatureDependent,
    <font color="blue">final </font>airSideFlowDependent=airSideFlowDependent,
    r_nominal=r_nominal) <font color="darkgreen">&quot;Model for convective heat transfer coefficient&quot;</font>;
<font color="blue">protected </font>
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureTwoPort"
>Buildings.Fluid.Sensors.TemperatureTwoPort</A> temSen_1(<font color="blue">redeclare </font><font color="blue">package</font> Medium
      = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    allowFlowReversal=allowFlowReversal1,
    m_flow_nominal=m1_flow_nominal) <font color="darkgreen">&quot;Temperature sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFlowRate"
>Buildings.Fluid.Sensors.MassFlowRate</A> masFloSen_1(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>) <font color="darkgreen">&quot;Mass flow rate sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureTwoPort"
>Buildings.Fluid.Sensors.TemperatureTwoPort</A> temSen_2(<font color="blue">redeclare </font><font color="blue">package</font> Medium
      = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal2,
    m_flow_nominal=m2_flow_nominal) <font color="darkgreen">&quot;Temperature sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFlowRate"
>Buildings.Fluid.Sensors.MassFlowRate</A> masFloSen_2(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>) <font color="darkgreen">&quot;Mass flow rate sensor&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gai_1(k=1/nEle) <font color="darkgreen">
    &quot;Gain medium-side 1 to take discretization into account&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gai_2(k=1/nEle) <font color="darkgreen">
    &quot;Gain medium-side 2 to take discretization into account&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <font color="blue">replaceable </font><A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"
>BaseClasses.HexElementSensible</A> ele[nEle]
  <font color="blue">constrainedby </font>BaseClasses.PartialHexElement(
    <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">package</font> Medium1 = Medium1,
    <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">package</font> Medium2 = Medium2,
    <font color="blue">each </font>allowFlowReversal1=allowFlowReversal1,
    <font color="blue">each </font>allowFlowReversal2=allowFlowReversal2,
    <font color="blue">each </font>tau1=tau1/nEle,
    <font color="blue">each </font>m1_flow_nominal=m1_flow_nominal,
    <font color="blue">each </font>tau2=tau2,
    <font color="blue">each </font>m2_flow_nominal=m2_flow_nominal,
    <font color="blue">each </font>tau_m=tau_m/nEle,
    <font color="blue">each </font>UA_nominal=UA_nominal/nEle,
    <font color="blue">each </font>energyDynamics1=energyDynamics1,
    <font color="blue">each </font>energyDynamics2=energyDynamics2,
    <font color="blue">each </font>deltaM1=deltaM1,
    <font color="blue">each </font>deltaM2=deltaM2,
    <font color="blue">each </font>from_dp1=from_dp1,
    <font color="blue">each </font>from_dp2=from_dp2,
    dp1_nominal={<font color="blue">if </font>i == 1<font color="blue"> then </font>dp1_nominal<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:nEle},
    dp2_nominal={<font color="blue">if </font>i == nEle<font color="blue"> then </font>dp2_nominal<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:nEle}) <font color="darkgreen">
    &quot;Heat exchanger element&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</A> rep1(nout=nEle) <font color="darkgreen">&quot;Signal replicator&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.Replicator"
>Modelica.Blocks.Routing.Replicator</A> rep2(nout=nEle) <font color="darkgreen">&quot;Signal replicator&quot;</font>;</textblock>

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">assert</font>(UA_nominal &gt; 0,
    &quot;Parameter UA_nominal is negative. Check heat exchanger parameters.&quot;);
<font color="blue">equation </font>
  Q1_flow =<font color="red"> sum</font>(ele[i].Q1_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nEle);
  Q2_flow =<font color="red"> sum</font>(ele[i].Q2_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nEle);
  T1[:] = ele[:].vol1.T;
  T2[:] = ele[:].vol2.T;
  T_m[:] = ele[:].mas.T;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(masFloSen_1.m_flow, hA.m1_flow);
  <font color="red">connect</font>(port_a2, masFloSen_2.port_a);
  <font color="red">connect</font>(masFloSen_2.port_b, temSen_2.port_a);
  <font color="red">connect</font>(temSen_2.T, hA.T_2);
  <font color="red">connect</font>(masFloSen_2.m_flow, hA.m2_flow);
  <font color="red">connect</font>(hA.hA_1, gai_1.u);
  <font color="red">connect</font>(hA.hA_2, gai_2.u);
  <font color="red">connect</font>(port_a1, masFloSen_1.port_a);
  <font color="red">connect</font>(masFloSen_1.port_b, temSen_1.port_a);
  <font color="red">connect</font>(temSen_1.T, hA.T_1);
  <font color="red">connect</font>(temSen_1.port_b, ele[1].port_a1);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(ele[nEle].port_b1, port_b1);
  <font color="red">connect</font>(temSen_2.port_b, ele[nEle].port_a2);
  <font color="red">connect</font>(ele[1].port_b2, port_b2);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:nEle - 1<font color="blue"> loop</font>
<textblock type="annotconnect" expanded="false">    <font color="red">connect</font>(ele[i].port_b1, ele[i + 1].port_a1);
    <font color="red">connect</font>(ele[i].port_a2, ele[i + 1].port_b2);</textblock>
  <font color="blue">end for</font>;

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(gai_1.y, rep1.u);
  <font color="red">connect</font>(rep1.y, ele.Gc_1);
  <font color="red">connect</font>(gai_2.y, rep2.u);
  <font color="red">connect</font>(rep2.y, ele.Gc_2);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DryCoilCounterFlow;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WetCoilCounterFlow<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha6f338ce72407a60erFlowI.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilCounterFlow" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.WetCoilCounterFlow"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.WetCoilCounterFlow</H2>
<B>Counterflow coil with discretization along the flow paths and humidity condensation</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha84a9dffc2670ce0erFlowD.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilCounterFlow">
<P></P><H3>Information</H3>

<p>
Model of a discretized coil with water vapor condensation.
The coil consists of two flow paths which are, at the design flow direction,
in opposite direction to model a counterflow heat exchanger.
The flow paths are discretized into <code>nEle</code> elements. 
Each element is modeled by an instance of
<a href="modelica://Buildings.Fluid.HeatExchangers.BaseClasses.HexElement">
Buildings.Fluid.HeatExchangers.BaseClasses.HexElement</a>.
Each element has a state variable for the metal. Depending
on the value of the boolean parameters <code>steadyState_1</code> and
<code>steadyState_2</code>, the fluid states are modeled dynamically or in steady
state.
</p>
<p>
The convective heat transfer coefficients can, for each fluid individually, be 
computed as a function of the flow rate and/or the temperature,
or assigned to a constant. This computation is done using an instance of
<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>
Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil</a>.
</p>
<p>
In this model, the water (or liquid) flow path
needs to be connected to <code>port_a1</code> and <code>port_b1</code>, and
the air flow path needs to be connected to the other two ports.
</p>
<p>
The mass transfer from the fluid 2 to the metal is computed using a similarity law between
heat and mass transfer, as implemented by the model
<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange"
>
Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange</a>. 
</p>
<p>
This model can only be used with medium models that
implement the function <code>enthalpyOfLiquid</code> and that contain
an integer variable <code>Water</code> whose value is the element number where
the water vapor is stored in the species concentration vector. Examples for
such media are
<A HREF="Buildings_Media_PerfectGases_MoistAir.html#Buildings.Media.PerfectGases.MoistAir"
>
Buildings.Media.PerfectGases.MoistAir</a> and
<A HREF="../../msl/3.2/help/Modelica_Media_Air_MoistAir.html#Modelica.Media.Air.MoistAir"
>
Modelica.Media.Air.MoistAir</a>.
</p>
<p>
To model this coil for conditions without humidity condensation, use the model 
<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilCounterFlow"
>
Buildings.Fluid.HeatExchangers.DryCoilCounterFlow</a> instead of this model.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilCounterFlow"
>Buildings.Fluid.HeatExchangers.DryCoilCounterFlow</A> (Counterflow coil with discretization along the flow paths and without humidity condensation).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</A></TD><TD>UA_nominal</TD><TD>&nbsp;</TD><TD>Thermal conductance at nominal flow, used to compute heat capacity [W/K]</TD></TR>
<TR><TD>Real</TD><TD>r_nominal</TD><TD>2/3</TD><TD>Ratio between air-side and water-side convective heat transfer coefficient</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>20</TD><TD>Time constant at nominal flow for medium 1 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>1</TD><TD>Time constant at nominal flow for medium 2 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau_m</TD><TD>20</TD><TD>Time constant of metal at nominal UA value [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Integer</TD><TD>nEle</TD><TD>4</TD><TD>Number of pipe segments used for discretization</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics1</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics2</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 2</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Heat transfer</B></TD></TR>
<TR><TD>Boolean</TD><TD>waterSideFlowDependent</TD><TD>true</TD><TD>Set to false to make water-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>airSideFlowDependent</TD><TD>true</TD><TD>Set to false to make air-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>waterSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of temperature</TD></TR>
<TR><TD>Boolean</TD><TD>airSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make air-side hA independent of temperature</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> WetCoilCounterFlow <font color="darkgreen">
  &quot;Counterflow coil with discretization along the flow paths and humidity condensation&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilCounterFlow"
>Buildings.Fluid.HeatExchangers.DryCoilCounterFlow</A>(
      <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">final </font><A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent"
>Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent</A>
                                                                  ele[nEle]);

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QSen2_flow <font color="darkgreen">
    &quot;Sensible heat input into air stream (negative if air is cooled)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QLat2_flow <font color="darkgreen">
    &quot;Latent heat input into air (negative if air is dehumidified)&quot;</font>;
  Real SHR(
    min=0,
    max=1,
    unit=&quot;1&quot;) <font color="darkgreen">&quot;Sensible to total heat ratio&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mWat_flow <font color="darkgreen">&quot;Water flow rate&quot;</font>;

<font color="blue">equation </font>
  mWat_flow =<font color="red"> sum</font>(ele[i].vol2.mWat_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nEle);
  QLat2_flow =<font color="red"> sum</font>(<font color="red">Medium2.enthalpyOfCondensingGas</font>(ele[i].vol2.heatPort.T)*ele[i].vol2.mWat_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nEle);
  Q2_flow = QSen2_flow + QLat2_flow;
  Q2_flow*SHR = QSen2_flow;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>WetCoilCounterFlow;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DryCoilDiscretized<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedI.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilDiscretized" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DryCoilDiscretized"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.DryCoilDiscretized</H2>
<B>Coil with discretization along the flow paths and no humidity condensation</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedD.png" ALT="Buildings.Fluid.HeatExchangers.DryCoilDiscretized">
<P></P><H3>Information</H3>

<p>
Model of a discretized coil with no water vapor condensation.
The coil consists of <code>nReg</code> registers
that are perpendicular to the air flow path. Each register consists of <code>nPipPar</code>
parallel pipes, and each pipe can be divided into <code>nPipSeg</code> pipe segments along
the pipe length. Thus, the smallest element of the coil consists of a pipe 
segment. Each pipe segment is modeled by an instance of
<a href="modelica://Buildings.Fluid.HeatExchangers.BaseClasses.HexElement">
Buildings.Fluid.HeatExchangers.BaseClasses.HexElement</a>.
Each element has a state variable for the metal. Depending
on the value of the boolean parameters <code>steadyState_1</code> and
<code>steadyState_2</code>, the fluid states are modeled dynamically or in steady
state.
If the parameter <code>steadyStateDuctConnection</code> is set the <code>false</code>, then
a mixing volume of length <code>dl</code> is added to the duct connection. This can
help reducing the dimension of the nonlinear system of equations.
</p>
<p>
The convective heat transfer coefficients can, for each fluid individually, be 
computed as a function of the flow rate and/or the temperature,
or assigned to a constant. This computation is done using an instance of
<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>
Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil</a>.
</p>
<p>
In this model, the water (or liquid) flow path
needs to be connected to <code>port_a1</code> and <code>port_b1</code>, and
the air flow path need to be connected to the other two ports.
</p>
<p>
To model humidity condensation, use the model 
<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.WetCoilDiscretized"
>
Buildings.Fluid.HeatExchangers.WetCoilDiscretized</a> instead of this model, as
this model computes only sensible heat transfer.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Fluid.Interfaces.PartialFourPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A> (Parameters for flow resistance for models with four ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</A></TD><TD>UA_nominal</TD><TD>&nbsp;</TD><TD>Thermal conductance at nominal flow, used to compute heat capacity [W/K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>20</TD><TD>Time constant at nominal flow for medium 1 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>1</TD><TD>Time constant at nominal flow for medium 2 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau_m</TD><TD>20</TD><TD>Time constant of metal at nominal UA value [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>mStart_flow_a1</TD><TD>m1_flow_nominal</TD><TD>Guess value for mass flow rate at port_a1 [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>mStart_flow_a2</TD><TD>m2_flow_nominal</TD><TD>Guess value for mass flow rate at port_a2 [kg/s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Integer</TD><TD>nReg</TD><TD>2</TD><TD>Number of registers</TD></TR>
<TR><TD>Integer</TD><TD>nPipPar</TD><TD>3</TD><TD>Number of parallel pipes in each register</TD></TR>
<TR><TD>Integer</TD><TD>nPipSeg</TD><TD>4</TD><TD>Number of pipe segments per register used for discretization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dh1</TD><TD>0.025</TD><TD>Hydraulic diameter for a single pipe [m]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dh2</TD><TD>1</TD><TD>Hydraulic diameter for duct [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR><TD>Boolean</TD><TD>use_dh1</TD><TD>false</TD><TD>Set to true to specify hydraulic diameter for pipe pressure drop</TD></TR>
<TR><TD>Boolean</TD><TD>use_dh2</TD><TD>false</TD><TD>Set to true to specify hydraulic diameter for duct pressure drop)</TD></TR>
<TR><TD>Real</TD><TD>ReC_1</TD><TD>4000</TD><TD>Reynolds number where transition to turbulent starts inside pipes</TD></TR>
<TR><TD>Real</TD><TD>ReC_2</TD><TD>4000</TD><TD>Reynolds number where transition to turbulent starts inside ducts</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance1</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance2</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics1</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics2</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>ductConnectionDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for duct connection</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dl</TD><TD>0.3</TD><TD>Length of mixing volume for duct connection [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Heat transfer</B></TD></TR>
<TR><TD>Boolean</TD><TD>waterSideFlowDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>airSideFlowDependent</TD><TD>false</TD><TD>Set to false to make air-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>waterSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of temperature</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DryCoilDiscretized <font color="darkgreen">
  &quot;Coil with discretization along the flow paths and no humidity condensation&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Fluid.Interfaces.PartialFourPortInterface</A>(show_T=false);
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A>(
    <font color="blue">final </font>computeFlowResistance1=true,
    <font color="blue">final </font>computeFlowResistance2=true,
    from_dp1 = false,
    from_dp2 = false);

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</A> UA_nominal(min=0) <font color="darkgreen">
    &quot;Thermal conductance at nominal flow, used to compute heat capacity&quot;</font>;
  <font color="blue">parameter </font>Integer nReg(min=2)=2 <font color="darkgreen">&quot;Number of registers&quot;</font>;
  <font color="blue">parameter </font>Integer nPipPar(min=1) = 3 <font color="darkgreen">
    &quot;Number of parallel pipes in each register&quot;</font>;
  <font color="blue">parameter </font>Integer nPipSeg(min=1) = 4 <font color="darkgreen">
    &quot;Number of pipe segments per register used for discretization&quot;</font>;
  <font color="blue">parameter </font>Boolean use_dh1 = false <font color="darkgreen">
    &quot;Set to true to specify hydraulic diameter for pipe pressure drop&quot;</font>;
  <font color="blue">parameter </font>Boolean use_dh2 = false <font color="darkgreen">
    &quot;Set to true to specify hydraulic diameter for duct pressure drop)&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics1=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Default formulation of energy balances for volume 1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics2=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Default formulation of energy balances for volume 2&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister"
>Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister</A> hexReg[nReg](
    <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">package</font> Medium1 = Medium1,
    <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">package</font> Medium2 = Medium2,
    <font color="blue">each </font><font color="blue">final </font>allowFlowReversal1=allowFlowReversal1,
    <font color="blue">each </font><font color="blue">final </font>allowFlowReversal2=allowFlowReversal2,
    <font color="blue">each </font><font color="blue">final </font>nPipPar=nPipPar,
    <font color="blue">each </font><font color="blue">final </font>nPipSeg=nPipSeg,
    <font color="blue">each </font><font color="blue">final </font>m1_flow_nominal=m1_flow_nominal/nPipPar,
    <font color="blue">each </font><font color="blue">final </font>m2_flow_nominal=m1_flow_nominal/nPipPar/nPipSeg,
    <font color="blue">each </font>tau1=tau1,
    <font color="blue">each </font>tau2=tau2,
    <font color="blue">each </font>tau_m=tau_m,
    <font color="blue">each </font><font color="blue">final </font>energyDynamics1=energyDynamics1,
    <font color="blue">each </font><font color="blue">final </font>energyDynamics2=energyDynamics2,
    <font color="blue">each </font>from_dp1=from_dp1,
    <font color="blue">each </font>linearizeFlowResistance1=linearizeFlowResistance1,
    <font color="blue">each </font>deltaM1=deltaM1,
    <font color="blue">each </font>from_dp2=from_dp2,
    <font color="blue">each </font>linearizeFlowResistance2=linearizeFlowResistance2,
    <font color="blue">each </font>deltaM2=deltaM2,
    <font color="blue">each </font>dp1_nominal=0,
    <font color="blue">each </font>dp2_nominal=0,
    <font color="blue">each </font><font color="blue">final </font>UA_nominal=UA_nominal/nReg) <font color="darkgreen">&quot;Heat exchanger register&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance"
>Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance</A>
    pipMan_a(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    <font color="blue">final </font>nPipPar=nPipPar,
    <font color="blue">final </font>m_flow_nominal=m1_flow_nominal,
    <font color="blue">final </font>dp_nominal=dp1_nominal,
    <font color="blue">final </font>dh=dh1,
    <font color="blue">final </font>ReC=ReC_1,
    <font color="blue">final </font>mStart_flow_a=mStart_flow_a1,
    <font color="blue">final </font>linearized=linearizeFlowResistance1,
    <font color="blue">final </font>use_dh=use_dh1,
    <font color="blue">final </font>deltaM=deltaM1,
    <font color="blue">final </font>from_dp=from_dp1,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal1) <font color="darkgreen">&quot;Pipe manifold at port a&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance"
>Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance</A> pipMan_b(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    <font color="blue">final </font>nPipPar=nPipPar,
    <font color="blue">final </font>mStart_flow_a=-mStart_flow_a1,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal1) <font color="darkgreen">&quot;Pipe manifold at port b&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance"
>Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance</A> ducMan_b(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    <font color="blue">final </font>nPipPar=nPipPar,
    <font color="blue">final </font>nPipSeg=nPipSeg,
    <font color="blue">final </font>mStart_flow_a=-mStart_flow_a2,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal2) <font color="darkgreen">&quot;Duct manifold at port b&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance"
>Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance</A>
    ducMan_a(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    <font color="blue">final </font>nPipPar = nPipPar,
    <font color="blue">final </font>nPipSeg = nPipSeg,
    <font color="blue">final </font>m_flow_nominal=m2_flow_nominal,
    <font color="blue">final </font>dp_nominal=dp2_nominal,
    <font color="blue">final </font>dh=dh2,
    <font color="blue">final </font>ReC=ReC_2,
    <font color="blue">final </font>dl=dl,
    <font color="blue">final </font>mStart_flow_a=mStart_flow_a2,
    <font color="blue">final </font>linearized=linearizeFlowResistance2,
    <font color="blue">final </font>use_dh=use_dh2,
    <font color="blue">final </font>deltaM=deltaM2,
    <font color="blue">final </font>from_dp=from_dp2,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal2,
    <font color="blue">final </font>energyDynamics=ductConnectionDynamics) <font color="darkgreen">&quot;Duct manifold at port a&quot;</font>;</textblock>
<font color="blue">public </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> dh1=0.025 <font color="darkgreen">
    &quot;Hydraulic diameter for a single pipe&quot;</font>;
  <font color="blue">parameter </font>Real ReC_1=4000 <font color="darkgreen">
    &quot;Reynolds number where transition to turbulent starts inside pipes&quot;</font>;
  <font color="blue">parameter </font>Real ReC_2=4000 <font color="darkgreen">
    &quot;Reynolds number where transition to turbulent starts inside ducts&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m1_flow_nominal <font color="darkgreen">
    &quot;Mass flow rate at port_a1 for all pipes&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> dh2=1 <font color="darkgreen">&quot;Hydraulic diameter for duct&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q1_flow <font color="darkgreen">
    &quot;Heat transfered from solid into medium 1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q2_flow <font color="darkgreen">
    &quot;Heat transfered from solid into medium 2&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau1=20 <font color="darkgreen">
    &quot;Time constant at nominal flow for medium 1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau2=1 <font color="darkgreen">
    &quot;Time constant at nominal flow for medium 2&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau_m=20 <font color="darkgreen">
    &quot;Time constant of metal at nominal UA value&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader"
>BaseClasses.CoilHeader</A> hea1[<font color="red">div</font>(nReg,2)](
      <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">final </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
      <font color="blue">each </font><font color="blue">final </font>nPipPar = nPipPar,
      <font color="blue">each </font><font color="blue">final </font>mStart_flow_a=mStart_flow_a1,
      <font color="blue">each </font>allowFlowReversal=allowFlowReversal1) <font color="blue">if </font>
      nReg &gt; 1 <font color="darkgreen">&quot;Pipe header to redirect flow into next register&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader"
>BaseClasses.CoilHeader</A> hea2[<font color="red">div</font>(nReg,2)-1](
      <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">final </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
      <font color="blue">each </font><font color="blue">final </font>nPipPar = nPipPar,
      <font color="blue">each </font><font color="blue">final </font>mStart_flow_a=mStart_flow_a1,
      <font color="blue">each </font>allowFlowReversal=allowFlowReversal1) <font color="blue">if </font>
      nReg &gt; 2 <font color="darkgreen">&quot;Pipe header to redirect flow into next register&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gai_1(k=1/nReg) <font color="darkgreen">
    &quot;Gain medium-side 1 to take discretization into account&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gai_2(k=1/nReg) <font color="darkgreen">
    &quot;Gain medium-side 2 to take discretization into account&quot;</font>;</textblock>
<font color="blue">public </font>
  <font color="blue">parameter </font>Boolean waterSideFlowDependent = false <font color="darkgreen">
    &quot;Set to false to make water-side hA independent of mass flow rate&quot;</font>;
  <font color="blue">parameter </font>Boolean airSideFlowDependent = false <font color="darkgreen">
    &quot;Set to false to make air-side hA independent of mass flow rate&quot;</font>;
  <font color="blue">parameter </font>Boolean waterSideTemperatureDependent = false <font color="darkgreen">
    &quot;Set to false to make water-side hA independent of temperature&quot;</font>;
  <font color="blue">constant </font>Boolean airSideTemperatureDependent = false <font color="darkgreen">
    &quot;Set to false to make air-side hA independent of temperature&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>BaseClasses.HADryCoil</A> hA(
    <font color="blue">final </font>UA_nominal=UA_nominal,
    <font color="blue">final </font>m_flow_nominal_a=m2_flow_nominal,
    <font color="blue">final </font>m_flow_nominal_w=m1_flow_nominal,
    <font color="blue">final </font>waterSideTemperatureDependent=waterSideTemperatureDependent,
    <font color="blue">final </font>waterSideFlowDependent=waterSideFlowDependent,
    <font color="blue">final </font>airSideTemperatureDependent=airSideTemperatureDependent,
    <font color="blue">final </font>airSideFlowDependent=airSideFlowDependent) <font color="darkgreen">
    &quot;Model for convective heat transfer coefficient&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">constant </font>Boolean allowCondensation = false <font color="darkgreen">
    &quot;Set to false to compute sensible heat transfer only&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureTwoPort"
>Buildings.Fluid.Sensors.TemperatureTwoPort</A> temSen_1(
                                              <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal1,
    m_flow_nominal=m1_flow_nominal) <font color="darkgreen">&quot;Temperature sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFlowRate"
>Buildings.Fluid.Sensors.MassFlowRate</A> masFloSen_1(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>, <font color="blue">final </font>allowFlowReversal=allowFlowReversal1) <font color="darkgreen">
    &quot;Mass flow rate sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.TemperatureTwoPort"
>Buildings.Fluid.Sensors.TemperatureTwoPort</A> temSen_2(
                                              <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    m_flow_nominal=m2_flow_nominal,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal2) <font color="darkgreen">&quot;Temperature sensor&quot;</font>;
  <A HREF="Buildings_Fluid_Sensors.html#Buildings.Fluid.Sensors.MassFlowRate"
>Buildings.Fluid.Sensors.MassFlowRate</A> masFloSen_2(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>, <font color="blue">final </font>allowFlowReversal=allowFlowReversal2) <font color="darkgreen">
    &quot;Mass flow rate sensor&quot;</font>;</textblock>
<font color="blue">public </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> ductConnectionDynamics=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Default formulation of energy balances for duct connection&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> dl=0.3 <font color="darkgreen">
    &quot;Length of mixing volume for duct connection&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mStart_flow_a1=m1_flow_nominal <font color="darkgreen">
    &quot;Guess value for mass flow rate at port_a1&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mStart_flow_a2=m2_flow_nominal <font color="darkgreen">
    &quot;Guess value for mass flow rate at port_a2&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">assert</font>(UA_nominal&gt;0,     &quot;Parameter UA_nominal is negative. Check heat exchanger parameters.&quot;);
<font color="blue">equation </font>
  Q1_flow =<font color="red"> sum</font>(hexReg[i].Q1_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nReg);
  Q2_flow =<font color="red"> sum</font>(hexReg[i].Q2_flow <font color="blue">for </font>i<font color="blue"> in </font>1:nReg);

  <font color="darkgreen">// air stream connections</font>
  <font color="blue">for </font>i<font color="blue"> in </font>2:nReg<font color="blue"> loop</font>
<textblock type="annotconnect" expanded="false">    <font color="red">connect</font>(hexReg[i].port_a2, hexReg[i-1].port_b2);</textblock>
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(ducMan_a.port_b, hexReg[1].port_a2);
  <font color="red">connect</font>(hexReg[nReg].port_b2, ducMan_b.port_b);
  <font color="red">connect</font>(pipMan_a.port_b, hexReg[1].port_a1);
  <font color="red">connect</font>(hexReg[nReg].port_b1, pipMan_b.port_b);
  <font color="red">connect</font>(pipMan_b.port_a, port_b1);
  <font color="red">connect</font>(ducMan_b.port_a, port_b2);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:2:nReg<font color="blue"> loop</font>

  <font color="darkgreen">// header after first hex register</font>
<textblock type="annotconnect" expanded="false">    <font color="red">connect</font>(hexReg[i].port_b1, hea1[<font color="red">div</font>((i+1),2)].port_a);
    <font color="red">connect</font>(hea1[<font color="red">div</font>((i+1),2)].port_b, hexReg[i+1].port_b1);</textblock>
  <font color="blue">end for</font>;
  <font color="darkgreen">// header after 2nd hex register</font>
  <font color="blue">for </font>i<font color="blue"> in </font>2:2:(nReg-1)<font color="blue"> loop</font>
<textblock type="annotconnect" expanded="false">    <font color="red">connect</font>(hexReg[i].port_a1, hea2[<font color="red">div</font>(i,2)].port_a);
    <font color="red">connect</font>(hea2[<font color="red">div</font>(i,2)].port_b, hexReg[i+1].port_a1);</textblock>
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(masFloSen_1.m_flow, hA.m1_flow);
  <font color="red">connect</font>(port_a2, masFloSen_2.port_a);
  <font color="red">connect</font>(masFloSen_2.port_b, temSen_2.port_a);
  <font color="red">connect</font>(temSen_2.port_b, ducMan_a.port_a);
  <font color="red">connect</font>(temSen_2.T, hA.T_2);
  <font color="red">connect</font>(masFloSen_2.m_flow, hA.m2_flow);
  <font color="red">connect</font>(hA.hA_1, gai_1.u);
  <font color="red">connect</font>(hA.hA_2, gai_2.u);</textblock>
  <font color="blue">for </font>i<font color="blue"> in </font>1:nReg<font color="blue"> loop</font>
<textblock type="annotconnect" expanded="false">    <font color="red">connect</font>(gai_1.y, hexReg[i].Gc_1);
    <font color="red">connect</font>(gai_2.y, hexReg[i].Gc_2);</textblock>
  <font color="blue">end for</font>;
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(port_a1, masFloSen_1.port_a);
  <font color="red">connect</font>(masFloSen_1.port_b, temSen_1.port_a);
  <font color="red">connect</font>(temSen_1.port_b, pipMan_a.port_a);
  <font color="red">connect</font>(temSen_1.T, hA.T_1);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DryCoilDiscretized;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WetCoilDiscretized<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedI.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilDiscretized" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.WetCoilDiscretized"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.WetCoilDiscretized</H2>
<B>Coil with discretization along the flow paths and humidity condensation</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExcha49e904f1a46cb934tizedD.png" ALT="Buildings.Fluid.HeatExchangers.WetCoilDiscretized">
<P></P><H3>Information</H3>

<p>
Model of a discretized coil with humidity condensation.
This model is identical to 
<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilDiscretized"
>
Buildings.Fluid.HeatExchangers.DryCoilDiscretized</a>
but in addition, the mass transfer from fluid 2 to the metal is computed.
The mass transfer is computed using a similarity law between
heat and mass transfer, as implemented by the model
<A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange"
>
Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange</a>. 
See this model for details.
</p>
<p>
This model can only be used with medium models that
implement the function <code>enthalpyOfLiquid</code> and that contain
an integer variable <code>Water</code> whose value is the element number where
the water vapor is stored in the species concentration vector. Examples for
such media are
<A HREF="Buildings_Media_PerfectGases_MoistAir.html#Buildings.Media.PerfectGases.MoistAir"
>
Buildings.Media.PerfectGases.MoistAir</a> and
<A HREF="../../msl/3.2/help/Modelica_Media_Air_MoistAir.html#Modelica.Media.Air.MoistAir"
>
Modelica.Media.Air.MoistAir</a>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilDiscretized"
>DryCoilDiscretized</A> (Coil with discretization along the flow paths and no humidity condensation).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</A></TD><TD>UA_nominal</TD><TD>&nbsp;</TD><TD>Thermal conductance at nominal flow, used to compute heat capacity [W/K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>20</TD><TD>Time constant at nominal flow for medium 1 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>1</TD><TD>Time constant at nominal flow for medium 2 [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau_m</TD><TD>20</TD><TD>Time constant of metal at nominal UA value [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>mStart_flow_a1</TD><TD>m1_flow_nominal</TD><TD>Guess value for mass flow rate at port_a1 [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>mStart_flow_a2</TD><TD>m2_flow_nominal</TD><TD>Guess value for mass flow rate at port_a2 [kg/s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Integer</TD><TD>nReg</TD><TD>2</TD><TD>Number of registers</TD></TR>
<TR><TD>Integer</TD><TD>nPipPar</TD><TD>3</TD><TD>Number of parallel pipes in each register</TD></TR>
<TR><TD>Integer</TD><TD>nPipSeg</TD><TD>4</TD><TD>Number of pipe segments per register used for discretization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dh1</TD><TD>0.025</TD><TD>Hydraulic diameter for a single pipe [m]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dh2</TD><TD>1</TD><TD>Hydraulic diameter for duct [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR><TD>Boolean</TD><TD>use_dh1</TD><TD>false</TD><TD>Set to true to specify hydraulic diameter for pipe pressure drop</TD></TR>
<TR><TD>Boolean</TD><TD>use_dh2</TD><TD>false</TD><TD>Set to true to specify hydraulic diameter for duct pressure drop)</TD></TR>
<TR><TD>Real</TD><TD>ReC_1</TD><TD>4000</TD><TD>Reynolds number where transition to turbulent starts inside pipes</TD></TR>
<TR><TD>Real</TD><TD>ReC_2</TD><TD>4000</TD><TD>Reynolds number where transition to turbulent starts inside ducts</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics1</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics2</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for volume 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>ductConnectionDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Default formulation of energy balances for duct connection</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dl</TD><TD>0.3</TD><TD>Length of mixing volume for duct connection [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Heat transfer</B></TD></TR>
<TR><TD>Boolean</TD><TD>waterSideFlowDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>airSideFlowDependent</TD><TD>false</TD><TD>Set to false to make air-side hA independent of mass flow rate</TD></TR>
<TR><TD>Boolean</TD><TD>waterSideTemperatureDependent</TD><TD>false</TD><TD>Set to false to make water-side hA independent of temperature</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> WetCoilDiscretized <font color="darkgreen">
  &quot;Coil with discretization along the flow paths and humidity condensation&quot;</font>
  <font color="darkgreen">// When replacing the volume, the Medium is constrained so that the enthalpyOfLiquid</font>
  <font color="darkgreen">// function is known. Otherwise, checkModel(...) will fail</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.DryCoilDiscretized"
>DryCoilDiscretized</A>(
    <font color="blue">each </font>hexReg(<font color="blue">redeclare </font><font color="blue">final </font><A HREF="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent"
>Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent</A>
                                                                    ele[nPipPar, nPipSeg]),
    temSen_1(m_flow_nominal=m1_flow_nominal),
    temSen_2(m_flow_nominal=m2_flow_nominal));
<textblock type="annotcomp" expanded="false">
<font color="blue">end </font>WetCoilDiscretized;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE HeaterCoolerPrescribed<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchaf13a6bf1f04387dcribedI.png" ALT="Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed"></A><A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</A>.HeaterCoolerPrescribed</H2>
<B>Heater or cooler with prescribed heat flow rate</B><p></P>
<IMG SRC="Buildings.Fluid.HeatExchaf13a6bf1f04387dcribedD.png" ALT="Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed">
<P></P><H3>Information</H3>

<p>
Model for an ideal heater or cooler with prescribed heat flow rate to the medium.
</p>
<p>
This model adds heat in the amount of <code>Q_flow = u Q_flow_nominal</code> to the medium.
The input signal <code>u</code> and the nominal heat flow rate <code>Q_flow_nominal</code> 
can be positive or negative.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</A> (Partial model transporting one fluid stream with storing mass or energy).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>HeatFlowRate</A></TD><TD>Q_flow_nominal</TD><TD>&nbsp;</TD><TD>Heat flow rate at u=1, positive for heating [W]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp.start</TD><TD>0</TD><TD>Pressure difference between port_a and port_b [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau</TD><TD>30</TD><TD>Time constant at nominal flow (if energyDynamics &lt;&gt; SteadyState) [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_start</TD><TD>Medium.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>Medium.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Control input</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> HeaterCoolerPrescribed <font color="darkgreen">
  &quot;Heater or cooler with prescribed heat flow rate&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</A>(
    <font color="blue">redeclare </font><font color="blue">final </font><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</A> vol,
    <font color="blue">final </font>showDesignFlowDirection=false);

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q_flow_nominal <font color="darkgreen">
    &quot;Heat flow rate at u=1, positive for heating&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> u <font color="darkgreen">&quot;Control input&quot;</font>;
<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_Thermal_HeatTransfer_Sources.html#Modelica.Thermal.HeatTransfer.Sources.PrescribedHeatFlow"
>Modelica.Thermal.HeatTransfer.Sources.PrescribedHeatFlow</A> preHea <font color="darkgreen">
    &quot;Prescribed heat flow&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gai(k=Q_flow_nominal) <font color="darkgreen">&quot;Gain&quot;</font>;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(u, gai.u);
  <font color="red">connect</font>(gai.y, preHea.Q_flow);
  <font color="red">connect</font>(preHea.port, vol.heatPort);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>HeaterCoolerPrescribed;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Thu Oct 24 15:08:32 2013.
</address></BODY>
</HTML>
