<HTML>
<HEAD>
<TITLE>Buildings.Utilities.Math.Functions.Examples</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Collection of models that illustrate model use and test models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Examples<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Utilities.Math.Functions.Examples"></A><A HREF="Buildings_Utilities_Math_Functions.html#Buildings.Utilities.Math.Functions"
>Buildings.Utilities.Math.Functions</A>.Examples</H2>
<B>Collection of models that illustrate model use and test models</B>
<P></P>
<P></P><H3>Information</H3>

<p>
This package contains examples for the use of models that can be found in
<A HREF="Buildings_Utilities_Math_Functions.html#Buildings.Utilities.Math.Functions"
>
Buildings.Utilities.Math.Functions</a>.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage"
>Modelica.Icons.ExamplesPackage</A> (Icon for packages containing runnable examples).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.InverseXRegularized" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.InverseXRegularized"
>InverseXRegularized</A>
</TD><TD>Test problem for function that replaces 1/x around the origin by a twice continuously differentiable function</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.PolynomialDerivativeCheck" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.PolynomialDerivativeCheck"
>PolynomialDerivativeCheck</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.PowerLinearized" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.PowerLinearized"
>PowerLinearized</A>
</TD><TD>Test problem for function that linearizes y=x^n below some threshold</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPower" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.RegNonZeroPower"
>RegNonZeroPower</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivative_2_Check" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivative_2_Check"
>RegNonZeroPowerDerivative_2_Check</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivativeCheck" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivativeCheck"
>RegNonZeroPowerDerivativeCheck</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.SmoothExponentialDerivativeCheck" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.SmoothExponentialDerivativeCheck"
>SmoothExponentialDerivativeCheck</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.SpliceFunction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.SpliceFunction"
>SpliceFunction</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.SpliceFunctionDerivativeCheck" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.SpliceFunctionDerivativeCheck"
>SpliceFunctionDerivativeCheck</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedS.png" ALT="Buildings.Utilities.Math.Functions.Examples.CubicHermite" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples.CubicHermite"
>CubicHermite</A>
</TD><TD>Test problem for cubic hermite splines</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE InverseXRegularized<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.InverseXRegularized" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.InverseXRegularized"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.InverseXRegularized</H2>
<B>Test problem for function that replaces 1/x around the origin by a twice continuously differentiable function</B><p></P>
<P></P><H3>Information</H3>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>delta</TD><TD>0.5</TD><TD>Small value for approximation</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> InverseXRegularized <font color="darkgreen">
  &quot;Test problem for function that replaces 1/x around the origin by a twice continuously differentiable function&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  Real x <font color="darkgreen">&quot;Indepedent variable&quot;</font>;
  <font color="blue">parameter </font>Real delta = 0.5 <font color="darkgreen">&quot;Small value for approximation&quot;</font>;
  Real y <font color="darkgreen">&quot;Function value&quot;</font>;
  Real xInv <font color="darkgreen">&quot;Function value&quot;</font>;
<font color="blue">equation </font>
  x=2*time-1;
  xInv = <font color="blue">if </font>(<font color="red"> abs</font>(x) &gt; 0.1)<font color="blue">   then </font>1 / x<font color="blue"> else </font>0;
  y =<font color="red"> Buildings.Utilities.Math.Functions.inverseXRegularized</font>(x=x, delta=delta);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>InverseXRegularized;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PolynomialDerivativeCheck<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.PolynomialDerivativeCheck" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.PolynomialDerivativeCheck"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.PolynomialDerivativeCheck</H2>
<P></P><H3>Information</H3>

<p>
This example checks whether the function derivative
is implemented correctly. If the derivative implementation
is incorrect, the model will stop with an assert statement.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PolynomialDerivativeCheck
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  Real x;
  Real y;
<font color="blue">initial </font><font color="blue">equation </font>
   y=x;
<font color="blue">equation </font>
  x=<font color="red">Buildings.Utilities.Math.Functions.polynomial</font>(x=time-2, a={2, 4, -4, 5});
  <font color="red">der</font>(y)=<font color="red">der</font>(x);
  <font color="darkgreen">// Trigger an error if the derivative implementation is incorrect.</font>
  <font color="red">assert</font>(<font color="red">abs</font>(x-y) &lt; 1E-2, &quot;Model has an error.&quot;);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PolynomialDerivativeCheck;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PowerLinearized<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.PowerLinearized" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.PowerLinearized"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.PowerLinearized</H2>
<B>Test problem for function that linearizes y=x^n below some threshold</B><p></P>
<P></P><H3>Information</H3>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PowerLinearized <font color="darkgreen">
  &quot;Test problem for function that linearizes y=x^n below some threshold&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  Real T4(start=300^4) <font color="darkgreen">&quot;Temperature raised to 4-th power&quot;</font>;
  Real T <font color="darkgreen">&quot;Temperature&quot;</font>;
  Real TExact <font color="darkgreen">&quot;Temperature&quot;</font>;
<font color="blue">equation </font>
  T = (1+500*time);
  T =<font color="red"> Buildings.Utilities.Math.Functions.powerLinearized</font>(x=T4, x0=243.15^4, n=0.25);
  TExact =<font color="red"> abs</font>(T4)^(1/4);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PowerLinearized;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RegNonZeroPower<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPower" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPower"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.RegNonZeroPower</H2>
<P></P><H3>Information</H3>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RegNonZeroPower
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  Real y <font color="darkgreen">&quot;Function value&quot;</font>;
<font color="blue">equation </font>
  y=<font color="red">Buildings.Utilities.Math.Functions.regNonZeroPower</font>(
                                             time, 0.3, 0.5);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>RegNonZeroPower;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RegNonZeroPowerDerivative_2_Check<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivative_2_Check" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivative_2_Check"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.RegNonZeroPowerDerivative_2_Check</H2>
<P></P><H3>Information</H3>

<p>
This example checks whether the function derivative
is implemented correctly. If the derivative implementation
is not correct, the model will stop with an assert statement.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>n</TD><TD>0.33</TD><TD>Exponent</TD></TR>
<TR><TD>Real</TD><TD>delta</TD><TD>0.1</TD><TD>Abscissa value where transition occurs</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RegNonZeroPowerDerivative_2_Check
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

 <font color="blue">parameter </font>Real n=0.33 <font color="darkgreen">&quot;Exponent&quot;</font>;
 <font color="blue">parameter </font>Real delta = 0.1 <font color="darkgreen">&quot;Abscissa value where transition occurs&quot;</font>;

  Real x;
  Real y;
<font color="blue">initial </font><font color="blue">equation </font>
   y=x;
<font color="blue">equation </font>
  x=<font color="red">Buildings.Utilities.Math.Functions.BaseClasses.der_regNonZeroPower</font>(
                                                             time,n, delta, time);
  <font color="red">der</font>(y)=<font color="red">der</font>(x);
  <font color="red">assert</font>(<font color="red">abs</font>(x-y) &lt; 1E-2, &quot;Model has an error&quot;);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>RegNonZeroPowerDerivative_2_Check;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RegNonZeroPowerDerivativeCheck<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivativeCheck" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.RegNonZeroPowerDerivativeCheck"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.RegNonZeroPowerDerivativeCheck</H2>
<P></P><H3>Information</H3>

<p>
This example checks whether the function derivative
is implemented correctly. If the derivative implementation
is not correct, the model will stop with an assert statement.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>n</TD><TD>0.33</TD><TD>Exponent</TD></TR>
<TR><TD>Real</TD><TD>delta</TD><TD>0.1</TD><TD>Abscissa value where transition occurs</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RegNonZeroPowerDerivativeCheck
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
 <font color="blue">parameter </font>Real n=0.33 <font color="darkgreen">&quot;Exponent&quot;</font>;
 <font color="blue">parameter </font>Real delta = 0.1 <font color="darkgreen">&quot;Abscissa value where transition occurs&quot;</font>;

  Real x;
  Real y;
<font color="blue">initial </font><font color="blue">equation </font>
   y=x;
<font color="blue">equation </font>
  x=<font color="red">Buildings.Utilities.Math.Functions.regNonZeroPower</font>(
                                             time,n, delta);
  <font color="red">der</font>(y)=<font color="red">der</font>(x);
  <font color="red">assert</font>(<font color="red">abs</font>(x-y) &lt; 1E-2, &quot;Model has an error&quot;);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>RegNonZeroPowerDerivativeCheck;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SmoothExponentialDerivativeCheck<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.SmoothExponentialDerivativeCheck" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.SmoothExponentialDerivativeCheck"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.SmoothExponentialDerivativeCheck</H2>
<P></P><H3>Information</H3>

<p>
This example checks whether the function derivative
is implemented correctly. If the derivative implementation
is not correct, the model will stop with an assert statement.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SmoothExponentialDerivativeCheck
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

  Real x;
  Real y;
  Real ex <font color="darkgreen">&quot;exact function value&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
   y=x;
<font color="blue">equation </font>
  x=<font color="red">Buildings.Utilities.Math.Functions.smoothExponential</font>(
                                               x=time-2, delta=0.5);
  <font color="red">der</font>(y)=<font color="red">der</font>(x);
  <font color="red">assert</font>(<font color="red">abs</font>(x-y) &lt; 1E-2, &quot;Model has an error&quot;);
  ex=<font color="red">exp</font>(-<font color="red">abs</font>(time-2));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SmoothExponentialDerivativeCheck;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SpliceFunction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.SpliceFunction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.SpliceFunction"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.SpliceFunction</H2>
<P></P><H3>Information</H3>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SpliceFunction
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

  Real y <font color="darkgreen">&quot;Function value&quot;</font>;
<font color="blue">equation </font>
  y=<font color="red">Buildings.Utilities.Math.Functions.spliceFunction</font>(
                                            pos=10, neg=-10, x=time-0.4, deltax=0.2);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SpliceFunction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SpliceFunctionDerivativeCheck<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.SpliceFunctionDerivativeCheck" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.SpliceFunctionDerivativeCheck"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.SpliceFunctionDerivativeCheck</H2>
<P></P><H3>Information</H3>

<p>
This example checks whether the function derivative
is implemented correctly. If the derivative implementation
is not correct, the model will stop with an assert statement.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SpliceFunctionDerivativeCheck
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

  Real x;
  Real y;
<font color="blue">initial </font><font color="blue">equation </font>
   y=x;
<font color="blue">equation </font>
  x=<font color="red">Buildings.Utilities.Math.Functions.spliceFunction</font>(
                                            10, -10, time+0.1, 0.2);
  <font color="red">der</font>(y)=<font color="red">der</font>(x);
  <font color="red">assert</font>(<font color="red">abs</font>(x-y) &lt; 1E-2, &quot;Model has an error&quot;);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SpliceFunctionDerivativeCheck;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CubicHermite<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Utilities.Math.213e3c199de7cb86rizedI.png" ALT="Buildings.Utilities.Math.Functions.Examples.CubicHermite" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Utilities.Math.Functions.Examples.CubicHermite"></A><A HREF="Buildings_Utilities_Math_Functions_Examples.html#Buildings.Utilities.Math.Functions.Examples"
>Buildings.Utilities.Math.Functions.Examples</A>.CubicHermite</H2>
<B>Test problem for cubic hermite splines</B><p></P>
<P></P><H3>Information</H3>

<p>
This example demonstrates the use of the function for cubic hermite interpolation
and linear extrapolation.
The example use interpolation with two different settings: One settings
produces a monotone cubic hermite, whereas the other setting
does not enforce monotonicity.
The resulting plot should look as shown below, where for better visibility, the support points have been marked with black dots.
Notice that the red curve is monotone increasing.
</p>
<p align="center"><img alt="image" src="../Resources/Images/Utilities/Math/Functions/Examples/cubicHermite.png"/></p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>xd[:]</TD><TD>{-1,1,5,6}</TD><TD>Support points</TD></TR>
<TR><TD>Real</TD><TD>yd[size(xd, 1)]</TD><TD>{-1,1,2,10}</TD><TD>Support points</TD></TR>
<TR><TD>Real</TD><TD>d[size(xd, 1)]</TD><TD>&nbsp;</TD><TD>Derivatives at the support points</TD></TR>
<TR><TD>Real</TD><TD>dMonotone[size(xd, 1)]</TD><TD>&nbsp;</TD><TD>Derivatives at the support points</TD></TR>
<TR><TD>Boolean</TD><TD>ensureMonotonicity</TD><TD>true</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> CubicHermite <font color="darkgreen">&quot;Test problem for cubic hermite splines&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  <font color="blue">parameter </font>Real[:] xd={-1,1,5,6} <font color="darkgreen">&quot;Support points&quot;</font>;
  <font color="blue">parameter </font>Real[<font color="red">size</font>(xd, 1)] yd={-1,1,2,10} <font color="darkgreen">&quot;Support points&quot;</font>;
  <font color="blue">parameter </font>Real[<font color="red">size</font>(xd, 1)] d(<font color="blue">each </font>fixed=false) <font color="darkgreen">
    &quot;Derivatives at the support points&quot;</font>;
  <font color="blue">parameter </font>Real[<font color="red">size</font>(xd, 1)] dMonotone(<font color="blue">each </font>fixed=false) <font color="darkgreen">
    &quot;Derivatives at the support points&quot;</font>;
  <font color="blue">parameter </font>Boolean ensureMonotonicity=true;
  Real x <font color="darkgreen">&quot;Independent variable&quot;</font>;
  Real y <font color="darkgreen">&quot;Dependent variable without monotone interpolation&quot;</font>;
  Real yMonotone <font color="darkgreen">&quot;Dependent variable with monotone interpolation&quot;</font>;
  Integer i <font color="darkgreen">&quot;Integer to select data interval&quot;</font>;
<font color="blue">initial </font><font color="blue">algorithm </font>
  <font color="darkgreen">// Get the derivative values at the support points</font>
  d :=<font color="red"> Buildings.Utilities.Math.Functions.splineDerivatives</font>(
    x=xd,
    y=yd,
    ensureMonotonicity=false);
  dMonotone :=<font color="red"> Buildings.Utilities.Math.Functions.splineDerivatives</font>(x=xd, y=yd,
      ensureMonotonicity=true);
<font color="blue">algorithm </font>
  x := xd[1] + time*1.2*(xd[<font color="red">size</font>(xd, 1)] - xd[1]) - 0.5;
  <font color="darkgreen">// i is a counter that is used to pick the derivative of d or dMonotonic</font>
  <font color="darkgreen">// that correspond to the interval that contains x</font>
  i := 1;
  <font color="blue">for </font>j<font color="blue"> in </font>1:<font color="red">size</font>(xd, 1) - 1<font color="blue"> loop</font>
    <font color="blue">if </font>x &gt; xd[j]<font color="blue"> then</font>
      i := j;
    <font color="blue">end if</font>;
  <font color="blue">end for</font>;
  <font color="darkgreen">// Extrapolate or interpolate the data</font>
  y :=<font color="red"> Buildings.Utilities.Math.Functions.cubicHermiteLinearExtrapolation</font>(
    x=x,
    x1=xd[i],
    x2=xd[i + 1],
    y1=yd[i],
    y2=yd[i + 1],
    y1d=d[i],
    y2d=d[i + 1]);
  yMonotone :=
    <font color="red">Buildings.Utilities.Math.Functions.cubicHermiteLinearExtrapolation</font>(
    x=x,
    x1=xd[i],
    x2=xd[i + 1],
    y1=yd[i],
    y2=yd[i + 1],
    y1d=dMonotone[i],
    y2d=dMonotone[i + 1]);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CubicHermite;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Thu Oct 24 15:13:44 2013.
</address></BODY>
</HTML>
