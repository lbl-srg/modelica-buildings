{
  "within": "Buildings.Fluid.MixingVolumes",
  "class_definition": [
    {
      "class_prefixes": "model",
      "class_specifier": {
        "long_class_specifier": {
          "identifier": "MixingVolume",
          "description_string": "Mixing volume with inlet and outlet ports (flow reversal is allowed)",
          "composition": {
            "element_list": [
              {
                "extends_clause": {
                  "name": "Buildings.Fluid.MixingVolumes.BaseClasses.PartialMixingVolume",
                  "class_modification": [
                    {
                      "element_modification_or_replaceable": {
                        "final": true,
                        "element_modification": {
                          "name": "initialize_p",
                          "modification": {
                            "equal": true,
                            "expression": {
                              "simple_expression": "not Medium.singleState"
                            }
                          }
                        }
                      }
                    },
                    {
                      "element_modification_or_replaceable": {
                        "element_modification": {
                          "name": "steBal",
                          "modification": {
                            "class_modification": [
                              {
                                "element_modification_or_replaceable": {
                                  "final": true,
                                  "element_modification": {
                                    "name": "use_C_flow",
                                    "modification": {
                                      "equal": true,
                                      "expression": {
                                        "simple_expression": "use_C_flow"
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "element_modification_or_replaceable": {
                        "element_modification": {
                          "name": "dynBal",
                          "modification": {
                            "class_modification": [
                              {
                                "element_modification_or_replaceable": {
                                  "final": true,
                                  "element_modification": {
                                    "name": "use_C_flow",
                                    "modification": {
                                      "equal": true,
                                      "expression": {
                                        "simple_expression": "use_C_flow"
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_prefix": "parameter",
                  "type_specifier": "Boolean",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "use_C_flow",
                        "modification": {
                          "equal": true,
                          "expression": {
                            "simple_expression": "false"
                          }
                        }
                      },
                      "description": {
                        "description_string": "Set to true to enable input connector for trace substance",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "Evaluate",
                                "modification": {
                                  "equal": true,
                                  "expression": {
                                    "simple_expression": "true"
                                  }
                                }
                              }
                            }
                          },
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "Dialog",
                                "modification": {
                                  "class_modification": [
                                    {
                                      "element_modification_or_replaceable": {
                                        "element_modification": {
                                          "name": "tab",
                                          "modification": {
                                            "equal": true,
                                            "expression": {
                                              "simple_expression": "\"Advanced\""
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "heatPort",
                        "modification": {
                          "class_modification": [
                            {
                              "element_modification_or_replaceable": {
                                "element_modification": {
                                  "name": "T",
                                  "modification": {
                                    "class_modification": [
                                      {
                                        "element_modification_or_replaceable": {
                                          "element_modification": {
                                            "name": "start",
                                            "modification": {
                                              "equal": true,
                                              "expression": {
                                                "simple_expression": "T_start"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          ]
                        }
                      },
                      "description": {
                        "description_string": "Heat port for heat exchange with the control volume",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "Placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -110,
                                        "y": -10
                                      },
                                      {
                                        "x": -90,
                                        "y": 10
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Modelica.Blocks.Interfaces.RealInput",
                  "array_subscripts": [
                    {
                      "expression": {
                        "simple_expression": "Medium.nC"
                      }
                    }
                  ],
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "C_flow"
                      },
                      "condition_attribute": {
                        "expression": {
                          "simple_expression": "use_C_flow"
                        }
                      },
                      "description": {
                        "description_string": "Trace substance mass flow rate added to the medium",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "Placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -140,
                                        "y": -80
                                      },
                                      {
                                        "x": -100,
                                        "y": -40
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ],
            "element_sections": [
              {
                "equation_section": {
                  "equation": [
                    {
                      "connect_clause": {
                        "from": [
                          {
                            "dot_op": false,
                            "identifier": "heaFloSen"
                          },
                          {
                            "dot_op": true
                          },
                          {
                            "dot_op": false,
                            "identifier": "port_a"
                          }
                        ],
                        "to": [
                          {
                            "dot_op": false,
                            "identifier": "heatPort"
                          }
                        ]
                      },
                      "description": {
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "Line": {
                                  "points": [
                                    {
                                      "x": -90,
                                      "y": 0
                                    },
                                    {
                                      "x": -96,
                                      "y": 0
                                    },
                                    {
                                      "x": -100,
                                      "y": 0
                                    }
                                  ],
                                  "color": {
                                    "r": 191,
                                    "g": 0,
                                    "b": 0
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    },
                    {
                      "connect_clause": {
                        "from": [
                          {
                            "dot_op": false,
                            "identifier": "C_flow"
                          }
                        ],
                        "to": [
                          {
                            "dot_op": false,
                            "identifier": "steBal"
                          },
                          {
                            "dot_op": true
                          },
                          {
                            "dot_op": false,
                            "identifier": "C_flow"
                          }
                        ]
                      },
                      "description": {
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "Line": {
                                  "points": [
                                    {
                                      "x": -120,
                                      "y": -60
                                    },
                                    {
                                      "x": -80,
                                      "y": -60
                                    },
                                    {
                                      "x": 12,
                                      "y": -60
                                    },
                                    {
                                      "x": 12,
                                      "y": 6
                                    },
                                    {
                                      "x": 18,
                                      "y": 6
                                    }
                                  ],
                                  "color": {
                                    "r": 0,
                                    "g": 0,
                                    "b": 127
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    },
                    {
                      "connect_clause": {
                        "from": [
                          {
                            "dot_op": false,
                            "identifier": "C_flow"
                          }
                        ],
                        "to": [
                          {
                            "dot_op": false,
                            "identifier": "dynBal"
                          },
                          {
                            "dot_op": true
                          },
                          {
                            "dot_op": false,
                            "identifier": "C_flow"
                          }
                        ]
                      },
                      "description": {
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "Line": {
                                  "points": [
                                    {
                                      "x": -120,
                                      "y": -60
                                    },
                                    {
                                      "x": -52,
                                      "y": -60
                                    },
                                    {
                                      "x": 52,
                                      "y": -60
                                    },
                                    {
                                      "x": 52,
                                      "y": 6
                                    },
                                    {
                                      "x": 58,
                                      "y": 6
                                    }
                                  ],
                                  "color": {
                                    "r": 0,
                                    "g": 0,
                                    "b": 127
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ],
            "annotation": [
              {
                "element_modification_or_replaceable": {
                  "element_modification": {
                    "name": "defaultComponentName",
                    "modification": {
                      "equal": true,
                      "expression": {
                        "simple_expression": "\"vol\""
                      }
                    }
                  }
                }
              },
              {
                "element_modification_or_replaceable": {
                  "element_modification": {
                    "name": "Documentation",
                    "modification": {
                      "class_modification": [
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "name": "info",
                              "modification": {
                                "equal": true,
                                "expression": {
                                  "simple_expression": "\"<html>\n<p>\nThis model represents an instantaneously mixed volume.\nPotential and kinetic energy at the port are neglected,\nand there is no pressure drop at the ports.\nThe volume can exchange heat through its <code>heatPort</code>.\n</p>\n<p>\nThe volume can be parameterized as a steady-state model or as\ndynamic model.</p>\n<p>\nTo increase the numerical robustness of the model, the constant\n<code>prescribedHeatFlowRate</code> can be set by the user.\nThis constant only has an effect if the model has exactly two fluid ports connected,\nand if it is used as a steady-state model.\nUse the following settings:\n</p>\n<ul>\n<li>Set <code>prescribedHeatFlowRate=true</code> if the <i>only</i> means of heat transfer\nat the <code>heatPort</code> is a prescribed heat flow rate that\nis <i>not</i> a function of the temperature difference\nbetween the medium and an ambient temperature. Examples include an ideal electrical heater,\na pump that rejects heat into the fluid stream, or a chiller that removes heat based on a performance curve.\nIf the <code>heatPort</code> is not connected, then set <code>prescribedHeatFlowRate=true</code> as\nin this case, <code>heatPort.Q_flow=0</code>.\n</li>\n<li>Set <code>prescribedHeatFlowRate=false</code> if there is heat flow at the <code>heatPort</code>\ncomputed as <i>K * (T-heatPort.T)</i>, for some temperature <i>T</i> and some conductance <i>K</i>,\nwhich may itself be a function of temperature or mass flow rate.<br/>\nIf there is a combination of <i>K * (T-heatPort.T)</i> and a prescribed heat flow rate,\nfor example a solar collector that dissipates heat to the ambient and receives heat from\nthe solar radiation, then set <code>prescribedHeatFlowRate=false</code>.\n</li>\n</ul>\n<h4>Options</h4>\n<p>\nThe parameter <code>mSenFac</code> can be used to increase the thermal mass of this model\nwithout increasing its volume. This way, species concentrations are still calculated\ncorrectly even though the thermal mass increases. The additional thermal mass is calculated\nbased on the density and the value of the function <code>HeatCapacityCp</code>\nof the medium state <code>state_default</code>. <br/>\nThis parameter can for instance be useful in a pipe model when the developer wants to\nlump the pipe thermal mass to the fluid volume. By default <code>mSenFac = 1</code>, hence\nthe mass is unchanged. For higher values of <code>mSenFac</code>, the mass will be scaled proportionally.\n</p>\n<p>\nSet the parameter <code>use_C_flow = true</code> to enable an input connector for the trace substance flow rate.\nThis allows to directly add or subtract trace substances such as\nCO2 to the volume.\nSee\n<a href=\\\"modelica://Buildings.Fluid.Sensors.Examples.PPM\\\">Buildings.Fluid.Sensors.Examples.PPM</a>\nfor an example.\n</p>\n<h4>Implementation</h4>\n<p>\nIf the model is operated in steady-state and has two fluid ports connected,\nthen the same energy and mass balance implementation is used as in\nsteady-state component models, i.e., the use of <code>actualStream</code>\nis not used for the properties at the port.\n</p>\n<p>\nThe implementation of these balance equations is done in the instances\n<code>dynBal</code> for the dynamic balance and <code>steBal</code>\nfor the steady-state balance. Both models use the same input variables:\n</p>\n<ul>\n<li>\nThe variable <code>Q_flow</code> is used to add sensible <i>and</i> latent heat to the fluid.\nFor example, <code>Q_flow</code> participates in the steady-state energy balance<pre>\n    port_b.h_outflow = inStream(port_a.h_outflow) + Q_flow * m_flowInv;\n</pre>\nwhere <code>m_flowInv</code> approximates the expression <code>1/m_flow</code>.\n</li>\n<li>\nThe variable <code>mXi_flow</code> is used to add a species mass flow rate to the fluid.\n</li>\n</ul>\n<p>\nFor the rationale of selecting different energy and mass balances, and for the\nuse of <code>prescribedHeatFlowRate</code>, see the documentation of\n<a href=\\\"modelica://Buildings.Fluid.MixingVolumes.BaseClasses.PartialMixingVolume\\\">\nBuildings.Fluid.MixingVolumes.BaseClasses.PartialMixingVolume</a>.\n</p>\n<p>\nFor simple models that uses this model, see\n<a href=\\\"modelica://Buildings.Fluid.HeatExchangers.HeaterCooler_u\\\">\nBuildings.Fluid.HeatExchangers.HeaterCooler_u</a> and\n<a href=\\\"modelica://Buildings.Fluid.Humidifiers.Humidifier_u\\\">\nBuildings.Fluid.Humidifiers.Humidifier_u</a>.\n</p>\n\n</html>\""
                                }
                              }
                            }
                          }
                        },
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "name": "revisions",
                              "modification": {
                                "equal": true,
                                "expression": {
                                  "simple_expression": "\"<html>\n<ul>\n<li>\nOctober 19, 2017, by Michael Wetter:<br/>\nSet <code>initialize_p</code> to <code>final</code> so that it does not\nappear as a user-selectable parameter. This is done because\n<code>initialize_p</code> has been changed from a <code>constant</code>\nto a <code>parameter</code> for\n<a href=\\\"https://github.com/lbl-srg/modelica-buildings/issues/1013\\\">Buildings, issue 1013</a>.\n</li>\n<li>\nApril 11, 2017, by Michael Wetter:<br/>\nChanged comment of heat port, as this needs to be the total heat flow\nrate in order to be able to use this model for modeling steam humidifiers\nand adiabatic humidifiers.<br/>\nRemoved blocks <code>QSen_flow</code> and\n<code>QLat_flow</code>.<br/>\nThis is for issue\n<a href=\\\"https://github.com/lbl-srg/modelica-buildings/issues/704\\\">Buildings #704</a>.\n</li>\n<li>\nApril 11, 2016 by Michael Wetter:<br/>\nCorrected wrong hyperlink in documentation for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/450\\\">issue 450</a>.\n</li>\n<li>\nJanuary 19, 2016, by Michael Wetter:<br/>\nUpdated documentation due to the addition of an input for trace substance\nin the mixing volume.\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/372\\\">\nissue 372</a>.\n</li>\n<li>\nJanuary 17, 2016, by Michael Wetter:<br/>\nRemoved <code>protected</code> block <code>masExc</code> as\nthis revision introduces a conditional connector for the\nmoisture flow rate in the energy and mass balance models.\nThis change was done to use the same modeling concept for the\nmoisture input as is used for the trace substance input.\n</li>\n<li>\nDecember 2, 2015, by Filip Jorissen:<br/>\nChanged code for handling trace substance insertions using input <code>C_flow</code>.\n</li>\n<li>\nMay 1, 2015 by Michael Wetter<br/>\nSet <code>final</code> keyword for <code>masExc(final k=0)</code>.\nThis addresses\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/230\\\">\nissue 230</a>.\n</li>\n<li>\nFebruary 11, 2014 by Michael Wetter:<br/>\nRedesigned implementation of latent and sensible heat flow rates\nas port of the correction of issue\n<a href=\\\"https://github.com/lbl-srg/modelica-buildings/issues/197\\\">#197</a>.\n</li>\n<li>\nFebruary 7, 2012 by Michael Wetter:<br/>\nRevised base classes for conservation equations in <code>Buildings.Fluid.Interfaces</code>.\n</li>\n<li>\nSeptember 17, 2011 by Michael Wetter:<br/>\nRemoved instance <code>medium</code> as this is already used in <code>dynBal</code>.\nRemoving the base properties led to 30% faster computing time for a solar thermal system\nthat contains many fluid volumes.\n</li>\n<li>\nSeptember 13, 2011 by Michael Wetter:<br/>\nChanged in declaration of <code>medium</code> the parameter assignment\n<code>preferredMediumStates=true</code> to\n<code>preferredMediumStates= not (energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState)</code>.\nOtherwise, for a steady-state model, Dymola 2012 may differentiate the model to obtain <code>T</code>\nas a state. See ticket Dynasim #13596.\n</li>\n<li>\nJuly 26, 2011 by Michael Wetter:<br/>\nRevised model to use new declarations from\n<a href=\\\"modelica://Buildings.Fluid.Interfaces.LumpedVolumeDeclarations\\\">\nBuildings.Fluid.Interfaces.LumpedVolumeDeclarations</a>.\n</li>\n<li>\nJuly 14, 2011 by Michael Wetter:<br/>\nAdded start values for mass and internal energy of dynamic balance\nmodel.\n</li>\n<li>\nMay 25, 2011 by Michael Wetter:<br/>\n<ul>\n<li>\nChanged implementation of balance equation. The new implementation uses a different model if\nexactly two fluid ports are connected, and in addition, the model is used as a steady-state\ncomponent. For this model configuration, the same balance equations are used as were used\nfor steady-state component models, i.e., instead of <code>actualStream(...)</code>, the\n<code>inStream(...)</code> formulation is used.\nThis changed required the introduction of a new parameter <code>m_flow_nominal</code> which\nis used for smoothing in the steady-state balance equations of the model with two fluid ports.\n</li>\n<li>\nAnother revision was the removal of the parameter <code>use_HeatTransfer</code> as there is\nno noticeable overhead in always having the <code>heatPort</code> connector present.\n</li>\n</ul>\n</li>\n<li>\nJuly 30, 2010 by Michael Wetter:<br/>\nAdded nominal value for <code>mC</code> to avoid wrong trajectory\nwhen concentration is around 1E-7.\nSee also <a href=\\\"https://trac.modelica.org/Modelica/ticket/393\\\">\nhttps://trac.modelica.org/Modelica/ticket/393</a>.\n</li>\n<li>\nFebruary 7, 2010 by Michael Wetter:<br/>\nSimplified model and its base classes by removing the port data\nand the vessel area.\nEliminated the base class <code>PartialLumpedVessel</code>.\n</li>\n<li>\nOctober 12, 2009 by Michael Wetter:<br/>\nChanged base class to\n<a href=\\\"modelica://Buildings.Fluid.MixingVolumes.BaseClasses.ClosedVolume\\\">\nBuildings.Fluid.MixingVolumes.BaseClasses.ClosedVolume</a>.\n</li>\n</ul>\n</html>\""
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              },
              {
                "element_modification_or_replaceable": {
                  "element_modification": {
                    "name": "Icon",
                    "modification": {
                      "class_modification": [
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "coordinateSystem": {
                                "extent": [
                                  {
                                    "x": -100,
                                    "y": -100
                                  },
                                  {
                                    "x": 100,
                                    "y": 100
                                  }
                                ],
                                "preserveAspectRatio": "false"
                              }
                            }
                          }
                        },
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "graphics": [
                                {
                                  "name": "Text",
                                  "attribute": {
                                    "extent": [
                                      {
                                        "x": -152,
                                        "y": 100
                                      },
                                      {
                                        "x": 148,
                                        "y": 140
                                      }
                                    ],
                                    "textString": "\"%name\"",
                                    "textColor": {
                                      "r": 0,
                                      "g": 0,
                                      "b": 255
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  ],
  "modelicaFile": "Buildings/Fluid/MixingVolumes/MixingVolume.mo",
  "fullMoFilePath": "/home/reituag/gitrepo/modelica-buildings/Buildings/Fluid/MixingVolumes/MixingVolume.mo",
  "checksum": "e29a2536559718c13e9175d8cec257e0"
}