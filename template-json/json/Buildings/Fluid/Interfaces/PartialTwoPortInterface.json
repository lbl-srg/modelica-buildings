{
  "within": "Buildings.Fluid.Interfaces",
  "class_definition": [
    {
      "class_prefixes": "partial model",
      "class_specifier": {
        "long_class_specifier": {
          "identifier": "PartialTwoPortInterface",
          "description_string": "Partial model with two ports and declaration of quantities that are used by many models",
          "composition": {
            "element_list": [
              {
                "extends_clause": {
                  "name": "Buildings.Fluid.Interfaces.PartialTwoPort",
                  "class_modification": [
                    {
                      "element_modification_or_replaceable": {
                        "element_modification": {
                          "name": "port_a",
                          "modification": {
                            "class_modification": [
                              {
                                "element_modification_or_replaceable": {
                                  "element_modification": {
                                    "name": "p",
                                    "modification": {
                                      "class_modification": [
                                        {
                                          "element_modification_or_replaceable": {
                                            "element_modification": {
                                              "name": "start",
                                              "modification": {
                                                "equal": true,
                                                "expression": {
                                                  "simple_expression": "Medium.p_default"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "element_modification_or_replaceable": {
                        "element_modification": {
                          "name": "port_b",
                          "modification": {
                            "class_modification": [
                              {
                                "element_modification_or_replaceable": {
                                  "element_modification": {
                                    "name": "p",
                                    "modification": {
                                      "class_modification": [
                                        {
                                          "element_modification_or_replaceable": {
                                            "element_modification": {
                                              "name": "start",
                                              "modification": {
                                                "equal": true,
                                                "expression": {
                                                  "simple_expression": "Medium.p_default"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_prefix": "parameter",
                  "type_specifier": "Modelica.Units.SI.MassFlowRate",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "m_flow_nominal"
                      },
                      "description": {
                        "description_string": "Nominal mass flow rate",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "Dialog",
                                "modification": {
                                  "class_modification": [
                                    {
                                      "element_modification_or_replaceable": {
                                        "element_modification": {
                                          "name": "group",
                                          "modification": {
                                            "equal": true,
                                            "expression": {
                                              "simple_expression": "\"Nominal condition\""
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_prefix": "parameter",
                  "type_specifier": "Modelica.Units.SI.MassFlowRate",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "m_flow_small",
                        "modification": {
                          "class_modification": [
                            {
                              "element_modification_or_replaceable": {
                                "element_modification": {
                                  "name": "min",
                                  "modification": {
                                    "equal": true,
                                    "expression": {
                                      "simple_expression": "0"
                                    }
                                  }
                                }
                              }
                            }
                          ],
                          "equal": true,
                          "expression": {
                            "simple_expression": "0.0001*abs(m_flow_nominal)"
                          }
                        }
                      },
                      "description": {
                        "description_string": "Small mass flow rate for regularization of zero flow",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "Dialog",
                                "modification": {
                                  "class_modification": [
                                    {
                                      "element_modification_or_replaceable": {
                                        "element_modification": {
                                          "name": "tab",
                                          "modification": {
                                            "equal": true,
                                            "expression": {
                                              "simple_expression": "\"Advanced\""
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_prefix": "parameter",
                  "type_specifier": "Boolean",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "show_T",
                        "modification": {
                          "equal": true,
                          "expression": {
                            "simple_expression": "false"
                          }
                        }
                      },
                      "description": {
                        "description_string": "= true, if actual temperature at port is computed",
                        "annotation": [
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "Dialog",
                                "modification": {
                                  "class_modification": [
                                    {
                                      "element_modification_or_replaceable": {
                                        "element_modification": {
                                          "name": "tab",
                                          "modification": {
                                            "equal": true,
                                            "expression": {
                                              "simple_expression": "\"Advanced\""
                                            }
                                          }
                                        }
                                      }
                                    },
                                    {
                                      "element_modification_or_replaceable": {
                                        "element_modification": {
                                          "name": "group",
                                          "modification": {
                                            "equal": true,
                                            "expression": {
                                              "simple_expression": "\"Diagnostics\""
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          {
                            "element_modification_or_replaceable": {
                              "element_modification": {
                                "name": "HideResult",
                                "modification": {
                                  "equal": true,
                                  "expression": {
                                    "simple_expression": "true"
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Modelica.Units.SI.MassFlowRate",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "m_flow",
                        "modification": {
                          "class_modification": [
                            {
                              "element_modification_or_replaceable": {
                                "element_modification": {
                                  "name": "start",
                                  "modification": {
                                    "equal": true,
                                    "expression": {
                                      "simple_expression": "_m_flow_start"
                                    }
                                  }
                                }
                              }
                            }
                          ],
                          "equal": true,
                          "expression": {
                            "simple_expression": "port_a.m_flow"
                          }
                        }
                      },
                      "description": {
                        "description_string": "Mass flow rate from port_a to port_b (m_flow > 0 is design flow direction)"
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Modelica.Units.SI.PressureDifference",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "dp",
                        "modification": {
                          "class_modification": [
                            {
                              "element_modification_or_replaceable": {
                                "element_modification": {
                                  "name": "start",
                                  "modification": {
                                    "equal": true,
                                    "expression": {
                                      "simple_expression": "_dp_start"
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "element_modification_or_replaceable": {
                                "element_modification": {
                                  "name": "displayUnit",
                                  "modification": {
                                    "equal": true,
                                    "expression": {
                                      "simple_expression": "\"Pa\""
                                    }
                                  }
                                }
                              }
                            }
                          ],
                          "equal": true,
                          "expression": {
                            "simple_expression": "port_a.p -port_b.p"
                          }
                        }
                      },
                      "description": {
                        "description_string": "Pressure difference between port_a and port_b"
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Medium.ThermodynamicState",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "sta_a",
                        "modification": {
                          "equal": true,
                          "expression": {
                            "if_expression": {
                              "if_elseif": [
                                {
                                  "condition": {
                                    "simple_expression": "allowFlowReversal"
                                  },
                                  "then": {
                                    "simple_expression": {
                                      "function_call": {
                                        "name": "Medium.setState_phX",
                                        "arguments": [
                                          {
                                            "name": "port_a.p"
                                          },
                                          {
                                            "name": "noEvent(actualStream(port_a.h_outflow)),noEvent(actualStream(port_a.Xi_outflow))"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              ],
                              "else_expression": {
                                "simple_expression": {
                                  "function_call": {
                                    "name": "Medium.setState_phX",
                                    "arguments": [
                                      {
                                        "name": "port_a.p"
                                      },
                                      {
                                        "name": "noEvent(inStream(port_a.h_outflow)),noEvent(inStream(port_a.Xi_outflow))"
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "condition_attribute": {
                        "expression": {
                          "simple_expression": "show_T"
                        }
                      },
                      "description": {
                        "description_string": "Medium properties in port_a"
                      }
                    }
                  ]
                }
              },
              {
                "component_clause": {
                  "type_specifier": "Medium.ThermodynamicState",
                  "component_list": [
                    {
                      "declaration": {
                        "identifier": "sta_b",
                        "modification": {
                          "equal": true,
                          "expression": {
                            "if_expression": {
                              "if_elseif": [
                                {
                                  "condition": {
                                    "simple_expression": "allowFlowReversal"
                                  },
                                  "then": {
                                    "simple_expression": {
                                      "function_call": {
                                        "name": "Medium.setState_phX",
                                        "arguments": [
                                          {
                                            "name": "port_b.p"
                                          },
                                          {
                                            "name": "noEvent(actualStream(port_b.h_outflow)),noEvent(actualStream(port_b.Xi_outflow))"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              ],
                              "else_expression": {
                                "simple_expression": {
                                  "function_call": {
                                    "name": "Medium.setState_phX",
                                    "arguments": [
                                      {
                                        "name": "port_b.p"
                                      },
                                      {
                                        "name": "noEvent(port_b.h_outflow),noEvent(port_b.Xi_outflow)"
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "condition_attribute": {
                        "expression": {
                          "simple_expression": "show_T"
                        }
                      },
                      "description": {
                        "description_string": "Medium properties in port_b"
                      }
                    }
                  ]
                }
              }
            ],
            "element_sections": [
              {
                "protected_element_list": [
                  {
                    "final": true,
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Modelica.Units.SI.MassFlowRate",
                      "component_list": [
                        {
                          "declaration": {
                            "identifier": "_m_flow_start",
                            "modification": {
                              "equal": true,
                              "expression": {
                                "simple_expression": "0"
                              }
                            }
                          },
                          "description": {
                            "description_string": "Start value for m_flow, used to avoid a warning if not set in m_flow, and to avoid m_flow.start in parameter window"
                          }
                        }
                      ]
                    }
                  },
                  {
                    "final": true,
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Modelica.Units.SI.PressureDifference",
                      "component_list": [
                        {
                          "declaration": {
                            "identifier": "_dp_start",
                            "modification": {
                              "class_modification": [
                                {
                                  "element_modification_or_replaceable": {
                                    "element_modification": {
                                      "name": "displayUnit",
                                      "modification": {
                                        "equal": true,
                                        "expression": {
                                          "simple_expression": "\"Pa\""
                                        }
                                      }
                                    }
                                  }
                                }
                              ],
                              "equal": true,
                              "expression": {
                                "simple_expression": "0"
                              }
                            }
                          },
                          "description": {
                            "description_string": "Start value for dp, used to avoid a warning if not set in dp, and to avoid dp.start in parameter window"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            ],
            "annotation": [
              {
                "element_modification_or_replaceable": {
                  "element_modification": {
                    "name": "preferredView",
                    "modification": {
                      "equal": true,
                      "expression": {
                        "simple_expression": "\"info\""
                      }
                    }
                  }
                }
              },
              {
                "element_modification_or_replaceable": {
                  "element_modification": {
                    "name": "Documentation",
                    "modification": {
                      "class_modification": [
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "name": "info",
                              "modification": {
                                "equal": true,
                                "expression": {
                                  "simple_expression": "\"<html>\n<p>\nThis component defines the interface for models with two fluid ports.\nIt is similar to\n<a href=\\\"Modelica://Modelica.Fluid.Interfaces.PartialTwoPortTransport\\\">\nModelica.Fluid.Interfaces.PartialTwoPortTransport</a>, but it does not\ninclude the species balance\n</p>\n<pre>\n  port_b.Xi_outflow = inStream(port_a.Xi_outflow);\n</pre>\n<p>\nThus, it can be used as a base class for a heat <i>and</i> mass transfer component\n</p>\n<p>\nThe partial model extends\n<a href=\\\"modelica://Buildings.Fluid.Interfaces.PartialTwoPort\\\">\nBuildings.Fluid.Interfaces.PartialTwoPort</a>\nand adds quantities that are used by many models such as\n<code>m_flow_nominal</code>, <code>m_flow</code> and <code>dp</code>.\n</p>\n<p>\nThe model is used by other models in this package that add heat transfer,\nmass transfer and pressure drop equations. See for example\n<a href=\\\"modelica://Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger\\\">\nBuildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger</a>.\n</p>\n</html>\""
                                }
                              }
                            }
                          }
                        },
                        {
                          "element_modification_or_replaceable": {
                            "element_modification": {
                              "name": "revisions",
                              "modification": {
                                "equal": true,
                                "expression": {
                                  "simple_expression": "\"<html>\n<ul>\n<li>\nSeptember 22, 2023, by Michael Wetter:<br/>\nImproved documentation.<br/>\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/1796\\\">IBPSA, #1796</a>.\n</li>\n<li>\nFebruary 2, 2022, by Hongxiang Fu:<br/>\nIf <code>allowFlowReversal==false</code>, replaced <code>actualStream()</code>\nwith <code>inStream()</code> for <code>sta_a</code> and\nremoved <code>actualStream()</code> for <code>sta_b</code>.<br/>\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/1578\\\">IBPSA, #1578</a>.\n</li>\n<li>\nMarch 30, 2021, by Michael Wetter:<br/>\nAdded annotation <code>HideResult=true</code>.<br/>\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/1459\\\">IBPSA, #1459</a>.\n</li>\n<li>\nNovember 3, 2016, by Michael Wetter:<br/>\nRenamed protected parameter <code>m_flow_start</code> to avoid\na name clash with\n<a href=\\\"modelica://Buildings.Fluid.Movers.FlowControlled_m_flow\\\">\nBuildings.Fluid.Movers.FlowControlled_m_flow</a>\nwhich leads to an error as the definition were different,\nand also renamed protected parameter <code>dp_start</code>.\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/552\\\">#552</a>\n<br/>\nMoved computation of pressure drop to variable assignment so that\nthe model won't mix graphical with textual modeling if used as a base\nclass for a graphically implemented model.\n</li>\n<li>\nNovember 3, 2016, by Michael Wetter:<br/>\nRemoved start values for mass flow rate and pressure difference\nto simplify the parameter window.<br/>\nThis is for\n<a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/552\\\">#552</a>.\n</li>\n<li>\nJanuary 22, 2016, by Michael Wetter:<br/>\nCorrected type declaration of pressure difference.\nThis is\nfor <a href=\\\"https://github.com/ibpsa/modelica-ibpsa/issues/404\\\">#404</a>.\n</li>\n<li>\nOctober 3, 2014, by Michael Wetter:<br/>\nChanged assignment of nominal value to avoid in OpenModelica the warning\nalias set with different nominal values.\n</li>\n<li>\nNovember 12, 2013 by Michael Wetter:<br/>\nRemoved <code>import Modelica.Constants;</code> statement.\n</li>\n<li>\nNovember 11, 2013 by Michael Wetter:<br/>\nRemoved the parameter <code>homotopyInitialization</code>\nas it is no longer used in this model.\n</li>\n<li>\nNovember 10, 2013 by Michael Wetter:<br/>\nIn the computation of <code>sta_a</code> and <code>sta_b</code>,\nremoved the branch that uses the homotopy operator.\nThe rational is that these variables are conditionally enables (because\nof <code>... if show_T</code>). Therefore, the Modelica Language Specification\ndoes not allow for these variables to be used in any equation. Hence,\nthe use of the homotopy operator is not needed here.\n</li>\n<li>\nOctober 10, 2013 by Michael Wetter:<br/>\nAdded <code>noEvent</code> to the computation of the states at the port.\nThis is correct, because the states are only used for reporting, but not\nto compute any other variable.\nUse of the states to compute other variables would violate the Modelica\nlanguage, as conditionally removed variables must not be used in any equation.\n</li>\n<li>\nOctober 8, 2013 by Michael Wetter:<br/>\nRemoved the computation of <code>V_flow</code> and removed the parameter\n<code>show_V_flow</code>.\nThe reason is that the computation of <code>V_flow</code> required\nthe use of <code>sta_a</code> (to compute the density),\nbut <code>sta_a</code> is also a variable that is conditionally\nenabled. However, this was not correct Modelica syntax as conditional variables\ncan only be used in a <code>connect</code>\nstatement, not in an assignment. Dymola 2014 FD01 beta3 is checking\nfor this incorrect syntax. Hence, <code>V_flow</code> was removed as its\nconditional implementation would require a rather cumbersome implementation\nthat uses a new connector that carries the state of the medium.\n</li>\n<li>\nApril 26, 2013 by Marco Bonvini:<br/>\nMoved the definition of <code>dp</code> because it causes some problem with PyFMI.\n</li>\n<li>\nMarch 27, 2012 by Michael Wetter:<br/>\nChanged condition to remove <code>sta_a</code> to also\ncompute the state at the inlet port if <code>show_V_flow=true</code>.\nThe previous implementation resulted in a translation error\nif <code>show_V_flow=true</code>, but worked correctly otherwise\nbecause the erroneous function call is removed if  <code>show_V_flow=false</code>.\n</li>\n<li>\nMarch 27, 2011 by Michael Wetter:<br/>\nAdded <code>homotopy</code> operator.\n</li>\n<li>\nMarch 21, 2010 by Michael Wetter:<br/>\nChanged pressure start value from <code>system.p_start</code>\nto <code>Medium.p_default</code> since HVAC models may have water and\nair, which are typically at different pressures.\n</li>\n<li>\nSeptember 19, 2008 by Michael Wetter:<br/>\nAdded equations for the mass balance of extra species flow,\ni.e., <code>C</code> and <code>mC_flow</code>.\n</li>\n<li>\nMarch 11, 2008, by Michael Wetter:<br/>\nFirst implementation.\n</li>\n</ul>\n</html>\""
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  ],
  "modelicaFile": "Buildings/Fluid/Interfaces/PartialTwoPortInterface.mo",
  "fullMoFilePath": "/home/reituag/gitrepo/modelica-buildings/Buildings/Fluid/Interfaces/PartialTwoPortInterface.mo",
  "checksum": "eaf384d1ebfae3a1cc8a1ecfe93dfd3a"
}