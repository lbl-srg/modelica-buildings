<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Airflow.Multizone.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with base classes for Buildings.Airflow.Multizone&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone.BaseClasses"></a><a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.BaseClasses</h2>
<p>
<b>Package with base classes for Buildings.Airflow.Multizone</b><br>
</p>
<h3>Information</h3>

<p>
This package contains base classes that are used to construct the models in
<a href="Buildings_Airflow_Multizone.html#Buildings.Airflow.Multizone"
>Buildings.Airflow.Multizone</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizoda3011a77fd2d484tizedS.png" alt="Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"
>DoorDiscretized</a>
</td>
<td>Door model using discretization along height coordinate</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo597abee92285ce4etanceS.png" alt="Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance"
>PowerLawResistance</a>
</td>
<td>Flow resistance that uses the power law</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo2f220ba89863259eementS.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement"
>TwoWayFlowElement</a>
</td>
<td>Flow resistance that uses the power law</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo2f220ba89863259eementS.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy"
>TwoWayFlowElementBuoyancy</a>
</td>
<td>Flow resistance that uses the power law</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo2c973effaec92287lFlowS.png" alt="Buildings.Airflow.Multizone.BaseClasses.ZonalFlow" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"
>ZonalFlow</a>
</td>
<td>Flow across zonal boundaries of a room</td>
</tr>
<tr>
<td><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>ErrorControl</a>
</td>
<td>Interface that defines parameters for error control</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo52205058b73861fferLawS.png" alt="Buildings.Airflow.Multizone.BaseClasses.powerLaw" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.powerLaw"
>powerLaw</a>
</td>
<td>Power law used in orifice equations</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo52205058b73861fferLawS.png" alt="Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM"
>powerLawFixedM</a>
</td>
<td>Power law used in orifice equations when m is constant</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo52205058b73861fferLawS.png" alt="Buildings.Airflow.Multizone.BaseClasses.windPressureLowRise" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.windPressureLowRise"
>windPressureLowRise</a>
</td>
<td>Wind pressure coefficient for low-rise buildings</td>
</tr>
<tr>
<td><img src="Buildings.Airflow.Multizo8d2387b85bb9e0d6mplesS.png" alt="Buildings.Airflow.Multizone.BaseClasses.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Airflow_Multizone_BaseClasses_Examples.html#Buildings.Airflow.Multizone.BaseClasses.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DoorDiscretized<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizoda3011a77fd2d484tizedI.png" alt="Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.DoorDiscretized</h2>
<p>
<b>Door model using discretization along height coordinate</b>
<br>
<br><img src="Buildings.Airflow.Multizoda3011a77fd2d484tizedD.png" alt="Buildings.Airflow.Multizone.BaseClasses.DoorDiscretized">
</p>
<h3>Information</h3>

<p>
This is a partial model for the bi-directional air flow through a door.
</p>
<p>
To compute the bi-directional flow, 
the door is discretize along the height coordinate, and uses
an orifice equation to compute the flow for each compartment.
</p>
<p>
The compartment area <code>dA</code> is a variable, which allows
using the model for a door that can be open or closed.
</p>

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy"
>Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy</a> (Flow resistance that uses the power law).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>vZer</td><td>0.001</td><td>Minimum velocity to prevent zero flow. Recommended: 0.001 [m/s]</td></tr>
<tr><td>Integer</td><td>nCom</td><td>10</td><td>Number of compartments for the discretization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.01</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended: 0.01 [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a1_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a1 [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a2_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a2 [kg/m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Geometry</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wOpe</td><td>0.9</td><td>Width of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hOpe</td><td>2.1</td><td>Height of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hA</td><td>2.7/2</td><td>Height of reference pressure zone A [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hB</td><td>2.7/2</td><td>Height of reference pressure zone B [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td>Real</td><td>CD</td><td>0.65</td><td>Discharge coefficient</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> DoorDiscretized <span style="color: #006400">
  &quot;Door model using discretization along height coordinate&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy"
>Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy</a>;

  <span style="color: blue">parameter </span>Integer nCom=10 <span style="color: #006400">&quot;Number of compartments for the discretization&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_turbulent(min=0) = 0.01 <span style="color: #006400">
    &quot;Pressure difference where laminar and turbulent flow relation coincide. Recommended: 0.01&quot;</span>;
  <span style="color: blue">parameter </span>Real CD=0.65 <span style="color: #006400">&quot;|Orifice characteristics|Discharge coefficient&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dpAB[nCom](<span style="color: blue">each </span>nominal=1) <span style="color: #006400">
    &quot;Pressure difference between compartments&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> v[nCom](<span style="color: blue">each </span>nominal=0.01) <span style="color: #006400">
    &quot;Velocity in compartment from A to B&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> vTop <span style="color: #006400">&quot;Velocity at top of opening from A to B&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> vBot <span style="color: #006400">&quot;Velocity at bottom of opening from A to B&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dh=hOpe/nCom <span style="color: #006400">&quot;Height of each compartment&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>Modelica.SIunits.AbsolutePressure</a> pA[nCom](<span style="color: blue">each </span>nominal=101325) <span style="color: #006400">
    &quot;Pressure in compartments of room A&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>Modelica.SIunits.AbsolutePressure</a> pB[nCom](<span style="color: blue">each </span>nominal=101325) <span style="color: #006400">
    &quot;Pressure in compartments of room B&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> dV_flow[nCom] <span style="color: #006400">
    &quot;Volume flow rate through compartment from A to B&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> dVAB_flow[nCom] <span style="color: #006400">
    &quot;Volume flow rate through compartment from A to B if positive&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> dVBA_flow[nCom] <span style="color: #006400">
    &quot;Volume flow rate through compartment from B to A if positive&quot;</span>;

  Real m(min=0.5, max=1) <span style="color: #006400">&quot;Flow exponent, m=0.5 for turbulent, m=1 for laminar&quot;</span>;
  Real kVal <span style="color: #006400">&quot;Flow coefficient for each compartment, k = V_flow/ dp^m&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> dA <span style="color: #006400">&quot;Compartment area&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_default=<span style="color: red">Medium.setState_pTX</span>(
      T=Medium.T_default,
      p=Medium.p_default,
      X=Medium.X_default);
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_default=<span style="color: red">Medium.density</span>(sta_default) <span style="color: #006400">
    &quot;Density, used to compute fluid volume&quot;</span>;

<span style="color: blue">equation </span>
  dA = A/nCom;

  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nCom<span style="color: blue"> loop</span>
    <span style="color: #006400">// pressure drop in each compartment</span>
    pA[i] = port_a1.p + rho_a1_inflow*Modelica.Constants.g_n*(hA - (i - 0.5)*dh);
    pB[i] = port_a2.p + rho_a2_inflow*Modelica.Constants.g_n*(hB - (i - 0.5)*dh);
    dpAB[i] = pA[i] - pB[i];
    v[i] = dV_flow[i]/dA;
    <span style="color: #006400">// assignment of net volume flows</span>
    dVAB_flow[i] = dV_flow[i]*
      <span style="color: red">Buildings.Utilities.Math.Functions.smoothHeaviside</span>(x=dV_flow[i], delta=
      VZer_flow/nCom) + VZer_flow/nCom;
    dVBA_flow[i] = -dV_flow[i] + dVAB_flow[i] + 2*VZer_flow/nCom;
  <span style="color: blue">end for</span>;
  <span style="color: #006400">// add positive and negative flows</span>
  VAB_flow =<span style="color: red"> ones</span>(nCom)*dVAB_flow;
  VBA_flow =<span style="color: red"> ones</span>(nCom)*dVBA_flow;
  vTop = v[nCom];
  vBot = v[1];
<span style="color: blue">end </span>DoorDiscretized;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PowerLawResistance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo597abee92285ce4etanceI.png" alt="Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.PowerLawResistance</h2>
<p>
<b>Flow resistance that uses the power law</b>
<br>
<br><img src="Buildings.Airflow.Multizo597abee92285ce4etanceD.png" alt="Buildings.Airflow.Multizone.BaseClasses.PowerLawResistance">
</p>
<h3>Information</h3>

<p>
This model describes the mass flow rate and pressure difference relation
of an orifice in the form
<PRE>
    V_flow = k * dp^m,
</PRE>
where <code>k</code> is a variable and
<code>m</code> a parameter.
For turbulent flow, set <code>m=1/2</code> and
for laminar flow, set <code>m=1</code>. 
<P>
The model is used as a base for the interzonal air flow models.

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</a> (Partial model transporting fluid between two ports without storing mass or energy), <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a> (Interface that defines parameters for error control).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td>Real</td><td>m</td><td>&nbsp;</td><td>Flow exponent, m=0.5 for turbulent, m=1 for laminar</td></tr>
<tr><td>Boolean</td><td>useDefaultProperties</td><td>true</td><td>Set to false to use density and viscosity based on actual medium state, rather than using default values</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.1</td><td>Pressure difference where laminar and turbulent flow relation coincide. Recommended = 0.1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>lWet</td><td>sqrt(A)</td><td>Wetted perimeter used for Reynolds number calculation [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>rho_default*k*dp_turbulent</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow.start</td><td>0</td><td>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp.start</td><td>0</td><td>Pressure difference between port_a and port_b [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Orifice characteristics</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</a></td><td>A</td><td>&nbsp;</td><td>Area of orifice [m2]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_small</td><td>1E-4*abs(m_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b</td><td>Fluid connector b (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PowerLawResistance <span style="color: #006400">
  &quot;Flow resistance that uses the power law&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</a>(
    <span style="color: blue">final </span>m_flow_nominal=rho_default*k*dp_turbulent,
    <span style="color: blue">final </span>showDesignFlowDirection=false);
  <span style="color: blue">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">&quot;|Orifice characteristics|Area of orifice&quot;</span>;

  <span style="color: blue">parameter </span>Real m(min=0.5, max=1) <span style="color: #006400">
    &quot;Flow exponent, m=0.5 for turbulent, m=1 for laminar&quot;</span>;
  <span style="color: blue">parameter </span>Boolean useDefaultProperties=true <span style="color: #006400">
    &quot;Set to false to use density and viscosity based on actual medium state, rather than using default values&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_turbulent(min=0, displayUnit=&quot;Pa&quot;) = 0.1 <span style="color: #006400">
    &quot;Pressure difference where laminar and turbulent flow relation coincide. Recommended = 0.1&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> lWet=<span style="color: red">sqrt</span>(A) <span style="color: #006400">
    &quot;Wetted perimeter used for Reynolds number calculation&quot;</span>;

  <span style="color: blue">parameter </span>Boolean homotopyInitialization = true <span style="color: #006400">&quot;= true, use homotopy method&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> V_flow <span style="color: #006400">
    &quot;Volume flow rate through the component&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> v(nominal=1) <span style="color: #006400">&quot;Average velocity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho <span style="color: #006400">&quot;Fluid density at port_a&quot;</span>;
  Real Re <span style="color: #006400">&quot;Reynolds number&quot;</span>;

<span style="color: blue">protected </span>
  <span style="color: blue">constant </span>Real gamma(min=1) = 1.5 <span style="color: #006400">
    &quot;Normalized flow rate where dphi(0)/dpi intersects phi(1)&quot;</span>;

  <span style="color: blue">parameter </span>Real k <span style="color: #006400">&quot;Flow coefficient, k = V_flow/ dp^m&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_default=<span style="color: red">Medium.setState_pTX</span>(
      T=Medium.T_default,
      p=Medium.p_default,
      X=Medium.X_default) <span style="color: #006400">
    &quot;State of the medium at the medium default properties&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_default=<span style="color: red">Medium.density</span>(sta_default) <span style="color: #006400">
    &quot;Density at the medium default properties&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> dynVis_default=
    <span style="color: red">Medium.dynamicViscosity</span>(sta_default) <span style="color: #006400">
    &quot;Dynamic viscosity at the medium default properties&quot;</span>;

  <span style="color: blue">parameter </span>Real a = gamma <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue">parameter </span>Real b = 1/8*m^2 - 3*gamma - 3/2*m + 35.0/8 <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue">parameter </span>Real c = -1/4*m^2 + 3*gamma + 5/2*m - 21.0/4 <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  <span style="color: blue">parameter </span>Real d = 1/8*m^2 - gamma - m + 15.0/8 <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta <span style="color: #006400">&quot;State of the medium in the component&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> dynVis <span style="color: #006400">&quot;Dynamic viscosity&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</a> mExc <span style="color: #006400">
    &quot;Air mass exchanged (for purpose of error control only)&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">equation </span>
  mExc=0;
<span style="color: blue">equation </span>
  <span style="color: blue">if </span>forceErrorControlOnFlow<span style="color: blue"> then</span>
    <span style="color: red">der</span>(mExc) = port_a.m_flow;
  <span style="color: blue">else</span>
    <span style="color: red">der</span>(mExc) = 0;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>useDefaultProperties<span style="color: blue"> then</span>
    sta    = sta_default;
    rho    = rho_default;
    dynVis = dynVis_default;
  <span style="color: blue">else</span>
    sta    = <span style="color: blue">if </span>homotopyInitialization<span style="color: blue"> then </span>
                <span style="color: red">Medium.setState_phX</span>(port_a.p,
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">actualStream</span>(port_a.h_outflow),
                                   simplified=<span style="color: red">inStream</span>(port_a.h_outflow)),
                          <span style="color: red">homotopy</span>(actual=<span style="color: red">actualStream</span>(port_a.Xi_outflow),
                                   simplified=<span style="color: red">inStream</span>(port_a.Xi_outflow)))<span style="color: blue">
             else </span>
               <span style="color: red">Medium.setState_phX</span>(port_a.p,
                          <span style="color: red">actualStream</span>(port_a.h_outflow),
                          <span style="color: red">actualStream</span>(port_a.Xi_outflow));

    rho    =<span style="color: red"> Medium.density</span>(sta);
    dynVis =<span style="color: red"> Medium.dynamicViscosity</span>(sta);
  <span style="color: blue">end if</span>;

  V_flow =<span style="color: red"> Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM</span>(
    k=k,
    dp=dp,
    m=m,
    a=a,
    b=b,
    c=c,
    d=d,
    dp_turbulent=dp_turbulent);

  port_a.m_flow = rho*V_flow;
  v = V_flow/A;
  Re = v*lWet*rho/dynVis;

  <span style="color: #006400">// Isenthalpic state transformation (no storage and no loss of energy)</span>
  port_a.h_outflow =<span style="color: red"> inStream</span>(port_b.h_outflow);
  port_b.h_outflow =<span style="color: red"> inStream</span>(port_a.h_outflow);

  <span style="color: #006400">// Mass balance (no storage)</span>
  port_a.m_flow + port_b.m_flow = 0;

  <span style="color: #006400">// Transport of substances</span>
  port_a.Xi_outflow =<span style="color: red"> inStream</span>(port_b.Xi_outflow);
  port_b.Xi_outflow =<span style="color: red"> inStream</span>(port_a.Xi_outflow);

  port_a.C_outflow =<span style="color: red"> inStream</span>(port_b.C_outflow);
  port_b.C_outflow =<span style="color: red"> inStream</span>(port_a.C_outflow);
<span style="color: blue">end </span>PowerLawResistance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TwoWayFlowElement<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo2f220ba89863259eementI.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.TwoWayFlowElement</h2>
<p>
<b>Flow resistance that uses the power law</b>
<br>
<br><img src="Buildings.Airflow.Multizo2f220ba89863259eementD.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement">
</p>
<h3>Information</h3>

<p>
This is a partial model for models that describe the bi-directional
air flow through large openings.
<P>
Models that extend this model need to compute 
<code>mAB_flow</code> and <code>mBA_flow</code>,
or alternatively <code>VAB_flow</code> and <code>VBA_flow</code>,
and the face area <code>area</code>.
The face area is a variable to allow this partial model to be used
for doors that can be open or closed as a function of an input signal.

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</a> (Partial model transporting fluid between two ports without storing mass or energy), <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a> (Interface that defines parameters for error control).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>&nbsp;</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>vZer</td><td>0.001</td><td>Minimum velocity to prevent zero flow. Recommended: 0.001 [m/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>10/3600*1.2</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>m1_flow_nominal</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>false</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>false</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td>Medium 2 in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>&nbsp;</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> TwoWayFlowElement <span style="color: #006400">
  &quot;Flow resistance that uses the power law&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</a>(
    <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium1 = <a href="Buildings_Airflow_Multizone_BaseClasses_Medium.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement.Medium"
>Medium</a>,
    <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium2 = <a href="Buildings_Airflow_Multizone_BaseClasses_Medium.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement.Medium"
>Medium</a>,
    <span style="color: blue">final </span>allowFlowReversal1=false,
    <span style="color: blue">final </span>allowFlowReversal2=false,
    <span style="color: blue">final </span>m1_flow_nominal=10/3600*1.2,
    <span style="color: blue">final </span>m2_flow_nominal=m1_flow_nominal);
  <span style="color: blue">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a>;

  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> VAB_flow(nominal=0.001) <span style="color: #006400">
    &quot;Volume flow rate from A to B if positive&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> VBA_flow(nominal=0.001) <span style="color: #006400">
    &quot;Volume flow rate from B to A if positive&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mAB_flow(nominal=0.001) <span style="color: #006400">
    &quot;Mass flow rate from A to B if positive&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mBA_flow(nominal=0.001) <span style="color: #006400">
    &quot;Mass flow rate from B to A if positive&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> vAB(nominal=0.01) <span style="color: #006400">&quot;Average velocity from A to B&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> vBA(nominal=0.01) <span style="color: #006400">&quot;Average velocity from B to A&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_a1_inflow(start=1.2) <span style="color: #006400">
    &quot;Density of air flowing in from port_a1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_a2_inflow(start=1.2) <span style="color: #006400">
    &quot;Density of air flowing in from port_a2&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A <span style="color: #006400">&quot;Face area&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</a> vZer=0.001 <span style="color: #006400">
    &quot;Minimum velocity to prevent zero flow. Recommended: 0.001&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> VZer_flow(fixed=false) <span style="color: #006400">
    &quot;Minimum net volume flow rate to prevent zero flow&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</a> mExcAB(start=0, fixed=true) <span style="color: #006400">
    &quot;Air mass exchanged (for purpose of error control only)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</a> mExcBA(start=0, fixed=true) <span style="color: #006400">
    &quot;Air mass exchanged (for purpose of error control only)&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: #006400">// enforcing error control on both direction rather than on the sum only</span>
  <span style="color: #006400">// gives higher robustness. The reason may be that for bi-directional flow,</span>
  <span style="color: #006400">// (VAB_flow - VBA_flow) may be close to zero.</span>
  <span style="color: blue">if </span>forceErrorControlOnFlow<span style="color: blue"> then</span>
    <span style="color: red">der</span>(mExcAB) = mAB_flow;
    <span style="color: red">der</span>(mExcBA) = mBA_flow;
  <span style="color: blue">else</span>
    <span style="color: red">der</span>(mExcAB) = 0;
    <span style="color: red">der</span>(mExcBA) = 0;
  <span style="color: blue">end if</span>;
  rho_a1_inflow =<span style="color: red"> Medium.density</span>(state_a1_inflow);
  rho_a2_inflow =<span style="color: red"> Medium.density</span>(state_a2_inflow);
  VZer_flow = vZer*A;

  mAB_flow = rho_a1_inflow*VAB_flow;
  mBA_flow = rho_a2_inflow*VBA_flow;
  <span style="color: #006400">// Average velocity (using the whole orifice area)</span>
  vAB = VAB_flow/A;
  vBA = VBA_flow/A;

  port_a1.m_flow = mAB_flow;
  port_a2.m_flow = mBA_flow;

  <span style="color: #006400">// Energy balance (no storage, no heat loss/gain)</span>
  port_a1.h_outflow =<span style="color: red"> inStream</span>(port_b1.h_outflow);
  port_b1.h_outflow =<span style="color: red"> inStream</span>(port_a1.h_outflow);
  port_a2.h_outflow =<span style="color: red"> inStream</span>(port_b2.h_outflow);
  port_b2.h_outflow =<span style="color: red"> inStream</span>(port_a2.h_outflow);

  <span style="color: #006400">// Mass balance (no storage)</span>
  port_a1.m_flow = -port_b1.m_flow;
  port_a2.m_flow = -port_b2.m_flow;

  port_a1.Xi_outflow =<span style="color: red"> inStream</span>(port_b1.Xi_outflow);
  port_b1.Xi_outflow =<span style="color: red"> inStream</span>(port_a1.Xi_outflow);
  port_a2.Xi_outflow =<span style="color: red"> inStream</span>(port_b2.Xi_outflow);
  port_b2.Xi_outflow =<span style="color: red"> inStream</span>(port_a2.Xi_outflow);

  <span style="color: #006400">// Transport of trace substances</span>
  port_a1.C_outflow =<span style="color: red"> inStream</span>(port_b1.C_outflow);
  port_b1.C_outflow =<span style="color: red"> inStream</span>(port_a1.C_outflow);
  port_a2.C_outflow =<span style="color: red"> inStream</span>(port_b2.C_outflow);
  port_b2.C_outflow =<span style="color: red"> inStream</span>(port_a2.C_outflow);

<span style="color: blue">end </span>TwoWayFlowElement;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE TwoWayFlowElementBuoyancy<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo2f220ba89863259eementI.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.TwoWayFlowElementBuoyancy</h2>
<p>
<b>Flow resistance that uses the power law</b>
<br>
<br><img src="Buildings.Airflow.Multizo2f220ba89863259eementD.png" alt="Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElementBuoyancy">
</p>
<h3>Information</h3>

<p>
This is a partial model for models that describe the bi-directional
air flow through large openings.
<P>
Models that extend this model need to compute 
<code>mAB_flow</code> and <code>mBA_flow</code>,
or alternatively <code>VAB_flow</code> and <code>VBA_flow</code>,
and the face area <code>area</code>.
The face area is a variable to allow this partial model to be used
for doors that can be open or closed as a function of an input signal.

<p>Extends from <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement"
>Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement</a> (Flow resistance that uses the power law).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>&nbsp;</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</a></td><td>vZer</td><td>0.001</td><td>Minimum velocity to prevent zero flow. Recommended: 0.001 [m/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a1_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a1 [kg/m3]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</a></td><td>rho_a2_inflow.start</td><td>1.2</td><td>Density of air flowing in from port_a2 [kg/m3]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Geometry</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>wOpe</td><td>0.9</td><td>Width of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hOpe</td><td>2.1</td><td>Height of opening [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hA</td><td>2.7/2</td><td>Height of reference pressure zone A [m]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>hB</td><td>2.7/2</td><td>Height of reference pressure zone B [m]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> TwoWayFlowElementBuoyancy <span style="color: #006400">
  &quot;Flow resistance that uses the power law&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement"
>Buildings.Airflow.Multizone.BaseClasses.TwoWayFlowElement</a>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> wOpe=0.9 <span style="color: #006400">&quot;|Geometry|Width of opening&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> hOpe=2.1 <span style="color: #006400">&quot;|Geometry|Height of opening&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> hA=2.7/2 <span style="color: #006400">
    &quot;|Geometry|Height of reference pressure zone A&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> hB=2.7/2 <span style="color: #006400">
    &quot;|Geometry|Height of reference pressure zone B&quot;</span>;

<span style="color: blue">end </span>TwoWayFlowElementBuoyancy;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ZonalFlow<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Airflow.Multizo2c973effaec92287lFlowI.png" alt="Buildings.Airflow.Multizone.BaseClasses.ZonalFlow" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Airflow.Multizone.BaseClasses.ZonalFlow"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.ZonalFlow</h2>
<p>
<b>Flow across zonal boundaries of a room</b>
<br>
<br><img src="Buildings.Airflow.Multizo2f220ba89863259eementD.png" alt="Buildings.Airflow.Multizone.BaseClasses.ZonalFlow">
</p>
<h3>Information</h3>

<p>
This is a partial model for computing the air exchange between volumes.
Models that extend this model need to provide an equation for
<code>port_a1.m_flow</code> and <code>port_a2.m_flow</code>.
</p>

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</a> (Partial model transporting fluid between two ports without storing mass or energy), <a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a> (Interface that defines parameters for error control).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>&nbsp;</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>10/3600*1.2</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>m1_flow_nominal</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>false</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>false</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td>Medium 2 in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td colspan="2">replaceable package Medium</td><td>&nbsp;</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> ZonalFlow <span style="color: #006400">&quot;Flow across zonal boundaries of a room&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</a>(
     <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium1 = <a href="Buildings_Airflow_Multizone_BaseClasses_Medium.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow.Medium"
>Medium</a>,
     <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium2 = <a href="Buildings_Airflow_Multizone_BaseClasses_Medium.html#Buildings.Airflow.Multizone.BaseClasses.ZonalFlow.Medium"
>Medium</a>,
     <span style="color: blue">final </span>allowFlowReversal1 = false,
     <span style="color: blue">final </span>allowFlowReversal2 = false,
     <span style="color: blue">final </span>m1_flow_nominal = 10/3600*1.2,
     <span style="color: blue">final </span>m2_flow_nominal = m1_flow_nominal);
  <span style="color: blue">extends </span><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.ErrorControl"
>Buildings.Airflow.Multizone.BaseClasses.ErrorControl</a>;

   <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a>;

<span style="color: blue">equation </span>
  <span style="color: #006400">// Energy balance (no storage, no heat loss/gain)</span>
  port_a1.h_outflow =<span style="color: red"> inStream</span>(port_b1.h_outflow);
  port_b1.h_outflow =<span style="color: red"> inStream</span>(port_a1.h_outflow);
  port_a2.h_outflow =<span style="color: red"> inStream</span>(port_b2.h_outflow);
  port_b2.h_outflow =<span style="color: red"> inStream</span>(port_a2.h_outflow);

  <span style="color: #006400">// Mass balance (no storage)</span>
  port_a1.m_flow = -port_b1.m_flow;
  port_a2.m_flow = -port_b2.m_flow;

  port_a1.Xi_outflow =<span style="color: red"> inStream</span>(port_b1.Xi_outflow);
  port_b1.Xi_outflow =<span style="color: red"> inStream</span>(port_a1.Xi_outflow);
  port_a2.Xi_outflow =<span style="color: red"> inStream</span>(port_b2.Xi_outflow);
  port_b2.Xi_outflow =<span style="color: red"> inStream</span>(port_a2.Xi_outflow);

  <span style="color: #006400">// Transport of trace substances</span>
  port_a1.C_outflow =<span style="color: red"> inStream</span>(port_b1.C_outflow);
  port_b1.C_outflow =<span style="color: red"> inStream</span>(port_a1.C_outflow);
  port_a2.C_outflow =<span style="color: red"> inStream</span>(port_b2.C_outflow);
  port_b2.C_outflow =<span style="color: red"> inStream</span>(port_a2.C_outflow);

<span style="color: blue">end </span>ZonalFlow;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ErrorControl<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone.BaseClasses.ErrorControl"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.ErrorControl</h2>
<p>
<b>Interface that defines parameters for error control</b>
</p>
<h3>Information</h3>

<p>
This is an interface that defines parameters used for error control.
<p>
Dymola does error control on state variables, such as temperature, pressure and 
species concentration.
Flow variables such as <code>m_flow</code> are typically not checked during the error control. 
This can give large errors in flow variables, as long as the error on the volume's state variables
that are coupled to the flow variables is small. 
Obtaining accurate flow variables can be achieved by imposing an error control
on the exchanged mass, which can be defined as 
<pre>
  dm/dt = m_flow.
</pre>
By setting <code>enforceErrorControlOnFlow = true</code>, such an equation is imposed
by models that extend this class.

<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Boolean</td><td>forceErrorControlOnFlow</td><td>true</td><td>Flag to force error control on m_flow. Set to true if interested in flow rate</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> ErrorControl <span style="color: #006400">
  &quot;Interface that defines parameters for error control&quot;</span>
  <span style="color: blue">parameter </span>Boolean forceErrorControlOnFlow = true <span style="color: #006400">
    &quot;Flag to force error control on m_flow. Set to true if interested in flow rate&quot;</span>;
<span style="color: blue">end </span>ErrorControl;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE powerLaw<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone.BaseClasses.powerLaw"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.powerLaw</h2>
<p>
<b>Power law used in orifice equations</b>
</p>
<h3>Information</h3>

<p>
This model describes the mass flow rate and pressure difference relation
of an orifice in the form
</p>
<p align="center" style="font-style:italic;">
  V = k sign(&Delta;p) |&Delta;p|<sup>m</sup>
</p>
<p>
where 
<i>V</i> is the volume flow rate,
<i>k &gt; 0</i> is a flow coefficient
<i>&Delta; p</i> is the pressure drop and
<i>m &isin; [0.5, 1]</i> is a flow coefficient.
The equation is regularized for 
<i>|&Delta;p| &lt; &Delta;p<sub>t</sub></i>, where
<i>&Delta;p<sub>t</sub></i> is a parameter.
For turbulent flow, set <i>m=1 &frasl; 2</i> and
for laminar flow, set <i>m=1</i>. 
</p>
<p>
The model is used for the interzonal air flow models.
</p>
<h4>Implementation</h4>
<p>
For <i>|&Delta;p| &lt; &Delta;p<sub>t</sub></i>, the equation is regularized
so that it is twice continuously differentiable in <i>&Delta;p</i>, and that it
has an infinite number of continuous derivatives in <i>m</i> and in <i>k</i>.
</p>
<p>
If <i>m</i> is not a function of time, then 
<i>a</i>, <i>b</i>, <i>c</i> and <i>d</i> can be pre-computed.
In this situation, use
<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM"
>
Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM</a>, which allows
to compute these values outside of this function, for example as parameters
of a model.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>k</td><td>&nbsp;</td><td>Flow coefficient, k = V_flow/ dp^m</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp</td><td>&nbsp;</td><td>Pressure difference [Pa]</td></tr>
<tr><td>Real</td><td>m</td><td>&nbsp;</td><td>Flow exponent, m=0.5 for turbulent, m=1 for laminar</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.001</td><td>Pressure difference where regularization starts [Pa]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>VolumeFlowRate</a></td><td>V_flow</td><td>Volume flow rate [m3/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> powerLaw <span style="color: #006400">&quot;Power law used in orifice equations&quot;</span>
  <span style="color: blue">input </span>Real k <span style="color: #006400">&quot;Flow coefficient, k = V_flow/ dp^m&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp <span style="color: #006400">&quot;Pressure difference&quot;</span>;
  <span style="color: blue">input </span>Real m(min=0.5, max=1) <span style="color: #006400">
    &quot;Flow exponent, m=0.5 for turbulent, m=1 for laminar&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_turbulent(min=0)=0.001 <span style="color: #006400">
    &quot;Pressure difference where regularization starts&quot;</span>;
  <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> V_flow <span style="color: #006400">&quot;Volume flow rate&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">constant </span>Real gamma(min=1) = 1.5 <span style="color: #006400">
    &quot;Normalized flow rate where dphi(0)/dpi intersects phi(1)&quot;</span>;
  Real a <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  Real b <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  Real c <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  Real d <span style="color: #006400">
    &quot;Polynomial coefficient for regularized implementation of flow resistance&quot;</span>;
  Real pi <span style="color: #006400">&quot;Normalized pressure&quot;</span>;
  Real pi2 <span style="color: #006400">&quot;Square of normalized pressure&quot;</span>;
<span style="color: blue">algorithm </span>
 <span style="color: blue">if </span>(dp &gt;= dp_turbulent)<span style="color: blue"> then</span>
   V_flow := k*dp^m;
 <span style="color: blue">elseif </span>(dp &lt;= -dp_turbulent)<span style="color: blue"> then</span>
   V_flow :=-k*(-dp)^m;
 <span style="color: blue">else</span>
   a := gamma;
   b := 1/8*m^2 - 3*gamma - 3/2*m + 35.0/8;
   c := -1/4*m^2 + 3*gamma + 5/2*m - 21.0/4;
   d := 1/8*m^2 - gamma - m + 15.0/8;
   pi  := dp/dp_turbulent;
   pi2 := pi*pi;
   V_flow := k*dp_turbulent^m * pi * ( a + pi2 * ( b + pi2 * ( c + pi2 * d)));
 <span style="color: blue">end if</span>;

<span style="color: blue">end </span>powerLaw;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE powerLawFixedM<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone.BaseClasses.powerLawFixedM"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.powerLawFixedM</h2>
<p>
<b>Power law used in orifice equations when m is constant</b>
</p>
<h3>Information</h3>

<p>
This model describes the mass flow rate and pressure difference relation
of an orifice in the form
</p>
<p align="center" style="font-style:italic;">
  V = k sign(&Delta;p) |&Delta;p|<sup>m</sup>
</p>
<p>
where 
<i>V</i> is the volume flow rate,
<i>k &gt; 0</i> is a flow coefficient
<i>&Delta; p</i> is the pressure drop and
<i>m &isin; [0.5, 1]</i> is a flow coefficient.
The equation is regularized for 
<i>|&Delta;p| &lt; &Delta;p<sub>t</sub></i>, where
<i>&Delta;p<sub>t</sub></i> is a parameter.
For turbulent flow, set <i>m=1 &frasl; 2</i> and
for laminar flow, set <i>m=1</i>. 
</p>
<p>
The model is used for the interzonal air flow models.
It is identical to
<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.powerLaw"
>
Buildings.Airflow.Multizone.BaseClasses.powerLaw</a> but it
requires the polynomial coefficients as an input.
This allows a more efficient simulation if <i>m</i> and therefore also
<i>a</i>, <i>b</i>, <i>c</i> and <i>d</i> are constant.
</p>
<h4>Implementation</h4>
<p>
For <i>|&Delta;p| &lt; &Delta;p<sub>t</sub></i>, the equation is regularized
so that it is twice continuously differentiable in <i>&Delta;p</i>, and that it
has an infinite number of continuous derivatives in <i>m</i> and in <i>k</i>.
</p>
<p>
If <i>m</i>, and therefore also
<i>a</i>, <i>b</i>, <i>c</i> and <i>d</i>, change with time, then
it is more convenient and efficient to use
<a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses.powerLaw"
>
Buildings.Airflow.Multizone.BaseClasses.powerLaw</a>.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>k</td><td>&nbsp;</td><td>Flow coefficient, k = V_flow/ dp^m</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp</td><td>&nbsp;</td><td>Pressure difference [Pa]</td></tr>
<tr><td>Real</td><td>m</td><td>&nbsp;</td><td>Flow exponent, m=0.5 for turbulent, m=1 for laminar</td></tr>
<tr><td>Real</td><td>a</td><td>&nbsp;</td><td>Polynomial coefficient</td></tr>
<tr><td>Real</td><td>b</td><td>&nbsp;</td><td>Polynomial coefficient</td></tr>
<tr><td>Real</td><td>c</td><td>&nbsp;</td><td>Polynomial coefficient</td></tr>
<tr><td>Real</td><td>d</td><td>&nbsp;</td><td>Polynomial coefficient</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_turbulent</td><td>0.001</td><td>Pressure difference where regularization starts [Pa]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>VolumeFlowRate</a></td><td>V_flow</td><td>Volume flow rate [m3/s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> powerLawFixedM <span style="color: #006400">
  &quot;Power law used in orifice equations when m is constant&quot;</span>
  <span style="color: blue">input </span>Real k <span style="color: #006400">&quot;Flow coefficient, k = V_flow/ dp^m&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp <span style="color: #006400">&quot;Pressure difference&quot;</span>;
  <span style="color: blue">input </span>Real m(min=0.5, max=1) <span style="color: #006400">
    &quot;Flow exponent, m=0.5 for turbulent, m=1 for laminar&quot;</span>;
  <span style="color: blue">input </span>Real a <span style="color: #006400">&quot;Polynomial coefficient&quot;</span>;
  <span style="color: blue">input </span>Real b <span style="color: #006400">&quot;Polynomial coefficient&quot;</span>;
  <span style="color: blue">input </span>Real c <span style="color: #006400">&quot;Polynomial coefficient&quot;</span>;
  <span style="color: blue">input </span>Real d <span style="color: #006400">&quot;Polynomial coefficient&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_turbulent(min=0)=0.001 <span style="color: #006400">
    &quot;Pressure difference where regularization starts&quot;</span>;
  <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.VolumeFlowRate"
>Modelica.SIunits.VolumeFlowRate</a> V_flow <span style="color: #006400">&quot;Volume flow rate&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">constant </span>Real gamma(min=1) = 1.5 <span style="color: #006400">
    &quot;Normalized flow rate where dphi(0)/dpi intersects phi(1)&quot;</span>;
  Real pi <span style="color: #006400">&quot;Normalized pressure&quot;</span>;
  Real pi2 <span style="color: #006400">&quot;Square of normalized pressure&quot;</span>;
<span style="color: blue">algorithm </span>
 <span style="color: blue">if </span>(dp &gt;= dp_turbulent)<span style="color: blue"> then</span>
   V_flow := k*dp^m;
 <span style="color: blue">elseif </span>(dp &lt;= -dp_turbulent)<span style="color: blue"> then</span>
   V_flow :=-k*(-dp)^m;
 <span style="color: blue">else</span>
   pi  := dp/dp_turbulent;
   pi2 := pi*pi;
   V_flow := k*dp_turbulent^m * pi * ( a + pi2 * ( b + pi2 * ( c + pi2 * d)));
 <span style="color: blue">end if</span>;

<span style="color: blue">end </span>powerLawFixedM;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE windPressureLowRise<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Airflow.Multizone.BaseClasses.windPressureLowRise"></a><a href="Buildings_Airflow_Multizone_BaseClasses.html#Buildings.Airflow.Multizone.BaseClasses"
>Buildings.Airflow.Multizone.BaseClasses</a>.windPressureLowRise</h2>
<p>
<b>Wind pressure coefficient for low-rise buildings</b>
</p>
<h3>Information</h3>

<p>
This function computes the wind pressure coefficient for
low-rise buildings with rectangular shape.
The correlation is the data fit from Swami and Chandra (1987),
who fitted a function to various wind pressure coefficients from the literature.
The same correlation is also implemented in CONTAM (Persily and Ivy, 2001).
</p>
<p>
The wind pressure coefficient is computed based on the 
natural logarithm of the side ratio of the walls, which is defined as
</p>
<p align="center" style="font-style:italic;">
G = ln(x &frasl; y)
</p>
<p>
where <i>x</i> is the length of the wall that will be connected to 
this model, and <i>y</i> is the length of the adjacent wall as shown
in the figure below.
</p>
<p align="center">
<img src="../Resources/Images/Airflow/Multizone/BaseClasses/windPressureLowRise.png" border="1" alt="Definition of the aspect ratio."/>
</p>
<p>
Based on the wind incidence angle <i>&alpha;</i> and the side ratio
of the walls, the model computes how much the wind pressure
is attenuated compared to the reference wind pressure <code>Cp0</code>.
The reference wind pressure <code>Cp0</code> is a user-defined parameter,
and must be equal to the wind pressure at zero wind incidence angle, i.e., 
<i>&alpha; = 0</i>.
Swami and Chandra (1987) recommend <i>C<sub>p0</sub> = 0.6</i> for
all low-rise buildings as this represents the average of 
various values reported in the literature.
The attenuation factor is
</p>
<p align="center" style="font-style:italic;">
C<sub>p</sub> &frasl; C<sub>p0</sub> = ln(1.248 - 0.703 sin(&alpha; &frasl; 2)
      - 1.175 sin<sup>2</sup>(&alpha;)
      - 0.131 sin<sup>3</sup>(2 &alpha; G)
      + 0.769 cos(&alpha; &frasl; 2)
       +0.071 G<sup>2</sup> * sin<sup>2</sup>(&alpha; &frasl; 2)
       + 0.717 cos<sup>2</sup>(&alpha; &frasl; 2)),
</p>
<p>
where 
<i>C<sub>p</sub></i> is the wind pressure coefficient for
the current angle of incidence.
</p>
<p>
This function is used in
<a href="Buildings_Fluid_Sources.html#Buildings.Fluid.Sources.Outside_CpLowRise"
>
Buildings.Fluid.Sources.Outside_CpLowRise</a>
which can be used directly with components of this package.
</p>
<h4>References</h4>
<ul>
<li>
Muthusamy V. Swami and
Subrato Chandra.
<i>
<a href="http://www.fsec.ucf.edu/en/publications/pdf/FSEC-CR-163-86.pdf">
Procedures for
Calculating Natural
Ventilation Airflow
Rates in Buildings.</a></i>
Florida Solar Energy Center, FSEC-CR-163-86. March, 1987.
Cape Canaveral, Florida.
</li>
<li>
Andrew K. Persily and Elizabeth M. Ivy.
<i>
<a href="www.bfrl.nist.gov/IAQanalysis/docs/NISTIR6585.pdf">
Input Data for Multizone Airflow and IAQ Analysis.</a></i>
NIST, NISTIR 6585.
January, 2001.
Gaithersburg, MD.
</li>
</ul>
<h4>Implementation</h4>
<p>
Symmetry requires that the first derivative of the wind pressure coefficient
with respect to the incidence angle is zero for incidence angles of zero and &pi;.
However, the correlation of Swami and Chandra has non-zero derivatives at these values.
In this implementation, the original function is therefore slightly modified for incidence angles
between 0 and 5 degree, and between 175 and 180 degree.
This leads to a model that is differentiable in the incidence angle,
which generally leads to better numeric performance.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>Cp0</td><td>&nbsp;</td><td>Wind pressure coefficient for normal wind incidence angle</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Angle</a></td><td>incAng</td><td>&nbsp;</td><td>Wind incidence angle (0: normal to wall) [rad]</td></tr>
<tr><td>Real</td><td>G</td><td>&nbsp;</td><td>Natural logarithm of side ratio</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>Cp</td><td>Wind pressure coefficient</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> windPressureLowRise <span style="color: #006400">
  &quot;Wind pressure coefficient for low-rise buildings&quot;</span>
  <span style="color: blue">input </span>Real Cp0(min=0) <span style="color: #006400">
    &quot;Wind pressure coefficient for normal wind incidence angle&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> incAng <span style="color: #006400">
    &quot;Wind incidence angle (0: normal to wall)&quot;</span>;
  <span style="color: blue">input </span>Real G <span style="color: #006400">&quot;Natural logarithm of side ratio&quot;</span>;
  <span style="color: blue">output </span>Real Cp <span style="color: #006400">&quot;Wind pressure coefficient&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> aR <span style="color: #006400">&quot;alpha, restricted to 0...pi&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> incAng2 <span style="color: #006400">&quot;0.5*wind incidence angle&quot;</span>;
  Real sinA2 <span style="color: #006400">&quot;=sin(alpha/2)&quot;</span>;
  Real cosA2 <span style="color: #006400">&quot;=cos(alpha/2)&quot;</span>;
  Real a <span style="color: #006400">&quot;Attenuation factor&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> pi2 = 2*Modelica.Constants.pi;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> aRDel = 5*Modelica.Constants.pi/180 <span style="color: #006400">
    &quot;Lower bound where transition occurs&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> aRDel2 = aRDel/2 <span style="color: #006400">
    &quot;Half-width of transition interval&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Angle"
>Modelica.SIunits.Angle</a> aRMax = 175*Modelica.Constants.pi/180 <span style="color: #006400">
    &quot;Upper bound where transition occurs&quot;</span>;
  <span style="color: blue">constant </span>Real a180 =<span style="color: red"> Modelica.Math.log</span>(1.248 - 0.703 +
      0.131*<span style="color: red">Modelica.Math.sin</span>(2*Modelica.Constants.pi*G)^3
      + 0.071*G^2) <span style="color: #006400">&quot;Attenuation factor at 180 degree incidence angle&quot;</span>;
<span style="color: blue">algorithm </span>
  <span style="color: #006400">// Restrict incAng to [0...pi]</span>

  <span style="color: #006400">// Change sign to positive</span>
  aR := <span style="color: blue">if </span>incAng &lt; 0<span style="color: blue"> then </span>-incAng<span style="color: blue"> else </span>incAng;
  <span style="color: #006400">// Constrain to [0...2*pi]</span>
  <span style="color: blue">if </span>aR &gt; pi2<span style="color: blue"> then</span>
    aR := aR -<span style="color: red"> integer</span>(aR/pi2)*pi2;
  <span style="color: blue">end if</span>;
  <span style="color: #006400">// Constrain to [0...pi]</span>
  <span style="color: blue">if </span>aR &gt; Modelica.Constants.pi<span style="color: blue"> then</span>
    aR := pi2-aR;
  <span style="color: blue">end if</span>;

  <span style="color: #006400">// Evaluate eqn. 2-1 from FSEC-CR-163-86</span>
  incAng2 :=aR/2;
  sinA2 :=<span style="color: red">Modelica.Math.sin</span>(incAng2);
  cosA2 :=<span style="color: red">Modelica.Math.cos</span>(incAng2);
  <span style="color: #006400">// Implementation of the wind pressure coefficient that is once</span>
  <span style="color: #006400">// continuously differentiable for all incidence angles</span>
  <span style="color: blue">if </span>aR &lt; aRDel<span style="color: blue"> then</span>
    Cp :=Cp0*<span style="color: red">Buildings.Utilities.Math.Functions.spliceFunction</span>(
        pos=<span style="color: red">  Modelica.Math.log</span>(1.248 - 0.703*sinA2 - 1.175*<span style="color: red">Modelica.Math.sin</span>(aR)^2 +
        0.131*<span style="color: red">Modelica.Math.sin</span>(2*aR*G)^3 + 0.769*cosA2 + 0.071*G^2*sinA2^2 + 0.717*cosA2^2),
        neg=1,
        x=aR-aRDel2,
        deltax=aRDel2);
  <span style="color: blue">elseif </span>aR &gt; aRMax<span style="color: blue"> then</span>
    Cp := Cp0*<span style="color: red">Buildings.Utilities.Math.Functions.spliceFunction</span>(
        pos=  a180,
        neg=<span style="color: red">Modelica.Math.log</span>(1.248 - 0.703*sinA2 - 1.175*<span style="color: red">Modelica.Math.sin</span>(aR)^2 +
        0.131*<span style="color: red">Modelica.Math.sin</span>(2*aR*G)^3 + 0.769*cosA2 + 0.071*G^2*sinA2^2 + 0.717*cosA2^2),
        x=aR+aRDel2-Modelica.Constants.pi,
        deltax=aRDel2);
  <span style="color: blue">else</span>
    Cp :=Cp0*<span style="color: red">Modelica.Math.log</span>(1.248 - 0.703*sinA2 - 1.175*<span style="color: red">Modelica.Math.sin</span>(aR)^2 +
      0.131*<span style="color: red">Modelica.Math.sin</span>(2*aR*G)^3 + 0.769*cosA2 + 0.071*G^2*sinA2^2 + 0.717*cosA2^2);
  <span style="color: blue">end if</span>;
<span style="color: blue">end </span>windPressureLowRise;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Thu Jun 19 10:54:24 2014.
</address>
</body>
</html>
