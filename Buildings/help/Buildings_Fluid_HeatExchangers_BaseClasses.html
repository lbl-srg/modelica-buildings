<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Buildings.Fluid.HeatExchangers.BaseClasses</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Package with base classes for Buildings.Fluid.HeatExchangers&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 9pt; font-family: Courier, monospace; white-space: pre; }
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { border: 1px solid #808080; vertical-align: top; }
th      { border: 1px solid #808080; vertical-align: top; font-weight: bold; }
table   { border: 1px solid #808080; border-collapse: collapse; }
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses"></a><a href="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</a>.BaseClasses</h2>
<p>
<b>Package with base classes for Buildings.Fluid.HeatExchangers</b><br>
</p>
<h3>Information</h3>

<p>
This package contains base classes that are used to construct the models in
<a href="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers"
>Buildings.Fluid.HeatExchangers</a>.
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</a> (Icon for packages containing base classes).</p>
<h3>Package Content</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Package Content">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha2dc65984bd9ae1dceaderS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader"
>CoilHeader</a>
</td>
<td>Header for a heat exchanger register</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha6e1f7f06674c66f4isterS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister"
>CoilRegister</a>
</td>
<td>Register for a heat exchanger</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha56c1cfbb2cf2d87btanceS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance"
>DuctManifoldFixedResistance</a>
</td>
<td>Manifold for a heat exchanger air duct connection</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchada98fd043097efb4tanceS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance"
>DuctManifoldNoResistance</a>
</td>
<td>Duct manifold without resistance</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha7076bc547e015019nsideS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HACoilInside" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HACoilInside"
>HACoilInside</a>
</td>
<td>Calculates the hA value for water inside a coil</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha7670ce850aefe4cfyCoilS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"
>HADryCoil</a>
</td>
<td>Sensible convective heat transfer model for air to water coil</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchad881de7eba37d378inderS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HANaturalCylinder" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HANaturalCylinder"
>HANaturalCylinder</a>
</td>
<td>Calculates an hA value for natural convection around a cylinder</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha1b8f24e9b34cfd3aatentS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent"
>HexElementLatent</a>
</td>
<td>Element of a heat exchanger</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha953a279e069b3fd1sibleS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"
>HexElementSensible</a>
</td>
<td>Element of a heat exchanger with humidity condensation of fluid 2</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4f3d4227286e511changeS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange"
>MassExchange</a>
</td>
<td>Block to compute the latent heat transfer based on the Lewis number</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaf5169d3349c0b86fifoldS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"
>PartialDuctManifold</a>
</td>
<td>Partial manifold for heat exchanger duct connection</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchac048acf90cb410b4ifoldS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"
>PartialDuctPipeManifold</a>
</td>
<td>Partial heat exchanger duct and pipe manifold</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha58f2ae39d7b1a5d3enessS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"
>PartialEffectiveness</a>
</td>
<td>Partial model to implement heat exchangers based on effectiveness model</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchad2ea9b0e609271e2ementS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>PartialHexElement</a>
</td>
<td>Element of a heat exchanger 2</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchade69b8a343b2c96fifoldS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"
>PartialPipeManifold</a>
</td>
<td>Partial pipe manifold for a heat exchanger</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha201daf8bbf7ad828tanceS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance"
>PipeManifoldFixedResistance</a>
</td>
<td>Pipe manifold for a heat exchanger connection</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchaa9fb81743030c8a4tanceS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance"
>PipeManifoldNoResistance</a>
</td>
<td>Manifold for heat exchanger register</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExchad07ce4b42389716cumberS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.RayleighNumber" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.RayleighNumber"
>RayleighNumber</a>
</td>
<td>Calculates the Rayleigh number for a given fluid and characteristic length</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.appartusDewPoint" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.appartusDewPoint"
>appartusDewPoint</a>
</td>
<td>Computes the apparatus dewpoint temperature</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater"
>dynamicViscosityWater</a>
</td>
<td>Returns the dynamic viscosity for water</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_C" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_C"
>epsilon_C</a>
</td>
<td>Computes heat exchanger effectiveness for given capacity flow rates and heat exchanger flow regime</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_ntuZ" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_ntuZ"
>epsilon_ntuZ</a>
</td>
<td>Computes heat exchanger effectiveness for given number of transfer units and heat exchanger flow regime</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater"
>isobaricExpansionCoefficientWater</a>
</td>
<td>Returns the isobaric expansion coefficient for water</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.lmtd" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.lmtd"
>lmtd</a>
</td>
<td>Log-mean temperature difference</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.ntu_epsilonZ" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.ntu_epsilonZ"
>ntu_epsilonZ</a>
</td>
<td>Computes number of transfer units for given heat exchanger effectiveness and heat exchanger flow regime</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha4939ff0ac917173cPointS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater"
>prandtlNumberWater</a>
</td>
<td>Returns the Prandtl number for water</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha6d02710d93a3421amplesS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.Examples" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses_Examples.html#Buildings.Fluid.HeatExchangers.BaseClasses.Examples"
>Examples</a>
</td>
<td>Collection of models that illustrate model use and test models</td>
</tr>
<tr>
<td><img src="Buildings.Fluid.HeatExcha5a4860f539224ae0ernalS.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.Internal" width="20" height="20" align="top">&nbsp;<a href="Buildings_Fluid_HeatExchangers_BaseClasses_Internal.html#Buildings.Fluid.HeatExchangers.BaseClasses.Internal"
>Internal</a>
</td>
<td>Solve f(x, data) for x with given f</td>
</tr>
</table>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CoilHeader<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha2dc65984bd9ae1dceaderI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.CoilHeader</h2>
<p>
<b>Header for a heat exchanger register</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha2dc65984bd9ae1dceaderD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilHeader">
</p>
<h3>Information</h3>

<p>
Header for a heat exchanger coil.
</p>
<p>
This model connects the flow between its ports without
modeling flow friction.
Currently, the ports are connected without redistributing
the flow. In latter versions, the model may be changed to define
different flow reroutings in the coil header.
</p>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a[nPipPar]</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> CoilHeader <span style="color: #006400">&quot;Header for a heat exchanger register&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;

  <span style="color: blue">outer </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</a> system <span style="color: #006400">&quot;System wide properties&quot;</span>;

  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">&quot;Medium in the component&quot;</span>;
  <span style="color: blue">parameter </span>Boolean allowFlowReversal = system.allowFlowReversal <span style="color: #006400">
    &quot;= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;

  <span style="color: blue">parameter </span>Integer nPipPar(min=1) <span style="color: #006400">&quot;Number of parallel pipes in each register&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mStart_flow_a <span style="color: #006400">
    &quot;Guess value for mass flow rate at port_a&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a[nPipPar](
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
        <span style="color: blue">each </span>m_flow(start=mStart_flow_a/nPipPar, min=<span style="color: blue">if </span>allowFlowReversal<span style="color: blue"> then </span>-Modelica.Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector a for medium (positive design flow direction is from port_a to port_b)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a> port_b[nPipPar](
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium = Medium,
        <span style="color: blue">each </span>m_flow(start=-mStart_flow_a/nPipPar, max=<span style="color: blue">if </span>allowFlowReversal<span style="color: blue"> then </span>+Modelica.Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector b for medium (positive design flow direction is from port_a to port_b)&quot;</span>;

<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(port_a, port_b);
<span style="color: blue">end </span>CoilHeader;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE CoilRegister<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha6e1f7f06674c66f4isterI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.CoilRegister</h2>
<p>
<b>Register for a heat exchanger</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha6e1f7f06674c66f4isterD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister">
</p>
<h3>Information</h3>

<p>
Register of a heat exchanger with dynamics on the fluids and the solid. 
The register represents one array of pipes that are perpendicular to the
air stream.
The <i>hA</i> value for both fluids is an input.
The driving force for the heat transfer is the temperature difference
between the fluid volumes and the solid in each heat exchanger element.
</p>

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</a> (Parameters for flow resistance for models with four ports).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium 2 in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>2</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Integer</td><td>nPipSeg</td><td>3</td><td>Number of pipe segments per register used for discretization</td></tr>
<tr><td><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"
>HexElementSensible</a></td><td>ele[nPipPar, nPipSeg]</td><td>redeclare Buildings.Fluid.He...</td><td>Element of a heat exchanger</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA_nominal</td><td>&nbsp;</td><td>Thermal conductance at nominal flow, used to compute time constant [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>&nbsp;</td><td>Mass flow rate medim 1 [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>&nbsp;</td><td>Mass flow rate medium 2 [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau1</td><td>20</td><td>Time constant at nominal flow for medium 1 [s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau2</td><td>1</td><td>Time constant at nominal flow for medium 2 [s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau_m</td><td>60</td><td>Time constant of metal at nominal UA value [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Fluid 1</td></tr>
<tr><td>Boolean</td><td>steadyState_1</td><td>false</td><td>Set to true for steady state model for fluid 1</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Fluid 2</td></tr>
<tr><td>Boolean</td><td>steadyState_2</td><td>false</td><td>Set to true for steady state model for fluid 2</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td>Boolean</td><td>computeFlowResistance1</td><td>true</td><td>=true, compute flow resistance. Set to false to assume no friction</td></tr>
<tr><td>Boolean</td><td>from_dp1</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance1</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM1</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td>Boolean</td><td>computeFlowResistance2</td><td>true</td><td>=true, compute flow resistance. Set to false to assume no friction</td></tr>
<tr><td>Boolean</td><td>from_dp2</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance2</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM2</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics1</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics2</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 2</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td>Medium 2 in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1[nPipPar]</td><td>Fluid connector a for medium 1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1[nPipPar]</td><td>Fluid connector b for medium 1 (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2[nPipPar, nPipSeg]</td><td>Fluid connector a for medium 2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2[nPipPar, nPipSeg]</td><td>Fluid connector b for medium 2 (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_2</td><td>Signal representing the convective thermal conductance medium 2 in [W/K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_1</td><td>Signal representing the convective thermal conductance medium 1 in [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> CoilRegister <span style="color: #006400">&quot;Register for a heat exchanger&quot;</span>
  <span style="color: blue">import </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</a>;
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</a>(
     <span style="color: blue">final </span>computeFlowResistance1=true, <span style="color: blue">final </span>computeFlowResistance2=true);
  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium1 =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">&quot;Medium 1 in the component&quot;</span>;
  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium2 =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">&quot;Medium 2 in the component&quot;</span>;
  <span style="color: blue">outer </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</a> system <span style="color: #006400">&quot;System wide properties&quot;</span>;

  <span style="color: blue">parameter </span>Boolean allowFlowReversal1 = system.allowFlowReversal <span style="color: #006400">
    &quot;= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;
  <span style="color: blue">parameter </span>Boolean allowFlowReversal2 = system.allowFlowReversal <span style="color: #006400">
    &quot;= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;

  <span style="color: blue">parameter </span>Integer nPipPar(min=1)=2 <span style="color: #006400">
    &quot;Number of parallel pipes in each register&quot;</span>;
  <span style="color: blue">parameter </span>Integer nPipSeg(min=1)=3 <span style="color: #006400">
    &quot;Number of pipe segments per register used for discretization&quot;</span>;
  <span style="color: blue">final </span><span style="color: blue">parameter </span>Integer nEle = nPipPar * nPipSeg <span style="color: #006400">
    &quot;Number of heat exchanger elements&quot;</span>;

  <span style="color: blue">replaceable </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"
>Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible</a> ele[nPipPar, nPipSeg]
    <span style="color: blue">constrainedby </span>Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement(
    <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium1 = Medium1,
    <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium2 = Medium2,
    <span style="color: blue">each </span>allowFlowReversal1=allowFlowReversal1,
    <span style="color: blue">each </span>allowFlowReversal2=allowFlowReversal2,
    <span style="color: blue">each </span>tau1=tau1/nPipSeg,
    <span style="color: blue">each </span>m1_flow_nominal=m1_flow_nominal/nPipPar,
    <span style="color: blue">each </span>tau2=tau2,
    <span style="color: blue">each </span>m2_flow_nominal=m2_flow_nominal/nPipPar/nPipSeg,
    <span style="color: blue">each </span>tau_m=tau_m,
    <span style="color: blue">each </span>UA_nominal=UA_nominal/nPipPar/nPipSeg,
    <span style="color: blue">each </span>energyDynamics1=energyDynamics1,
    <span style="color: blue">each </span>energyDynamics2=energyDynamics2,
    <span style="color: blue">each </span>from_dp1=from_dp1,
    <span style="color: blue">each </span>linearizeFlowResistance1=linearizeFlowResistance1,
    <span style="color: blue">each </span>deltaM1=deltaM1,
    <span style="color: blue">each </span>from_dp2=from_dp2,
    <span style="color: blue">each </span>linearizeFlowResistance2=linearizeFlowResistance2,
    <span style="color: blue">each </span>deltaM2=deltaM2,
    <span style="color: blue">each </span>dp1_nominal=dp1_nominal,
    <span style="color: blue">each </span>dp2_nominal=dp2_nominal) <span style="color: #006400">&quot;Element of a heat exchanger&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a>[nPipPar] port_a1(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_BaseClasses_Medium1.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister.Medium1"
>Medium1</a>,
        <span style="color: blue">each </span>m_flow(start=0, min=<span style="color: blue">if </span>allowFlowReversal1<span style="color: blue"> then </span>-Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector a for medium 1 (positive design flow direction is from port_a1 to port_b1)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a>[nPipPar] port_b1(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_BaseClasses_Medium1.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister.Medium1"
>Medium1</a>,
        <span style="color: blue">each </span>m_flow(start=0, max=<span style="color: blue">if </span>allowFlowReversal1<span style="color: blue"> then </span>+Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector b for medium 1 (positive design flow direction is from port_a to port_b)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a>[nPipPar,nPipSeg] port_a2(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_BaseClasses_Medium2.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister.Medium2"
>Medium2</a>,
        <span style="color: blue">each </span>m_flow(start=0, min=<span style="color: blue">if </span>allowFlowReversal2<span style="color: blue"> then </span>-Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector a for medium 2 (positive design flow direction is from port_a2 to port_b2)&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a>[nPipPar,nPipSeg] port_b2(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = <a href="Buildings_Fluid_HeatExchangers_BaseClasses_Medium2.html#Buildings.Fluid.HeatExchangers.BaseClasses.CoilRegister.Medium2"
>Medium2</a>,
        <span style="color: blue">each </span>m_flow(start=0, max=<span style="color: blue">if </span>allowFlowReversal2<span style="color: blue"> then </span>+Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector b for medium 2 (positive design flow direction is from port_a to port_b)&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> UA_nominal <span style="color: #006400">
    &quot;Thermal conductance at nominal flow, used to compute time constant&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m1_flow_nominal <span style="color: #006400">
    &quot;Mass flow rate medim 1&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m2_flow_nominal <span style="color: #006400">
    &quot;Mass flow rate medium 2&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tau1=20 <span style="color: #006400">
    &quot;Time constant at nominal flow for medium 1&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tau2=1 <span style="color: #006400">
    &quot;Time constant at nominal flow for medium 2&quot;</span>;
  <span style="color: blue">parameter </span>Boolean steadyState_1=false <span style="color: #006400">
    &quot;Set to true for steady state model for fluid 1&quot;</span>;
  <span style="color: blue">parameter </span>Boolean steadyState_2=false <span style="color: #006400">
    &quot;Set to true for steady state model for fluid 2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> Q1_flow <span style="color: #006400">
    &quot;Heat transfered from solid into medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> Q2_flow <span style="color: #006400">
    &quot;Heat transfered from solid into medium 2&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tau_m=60 <span style="color: #006400">
    &quot;Time constant of metal at nominal UA value&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> energyDynamics1=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400">
    &quot;Default formulation of energy balances for volume 1&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> energyDynamics2=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400">
    &quot;Default formulation of energy balances for volume 2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Gc_2 <span style="color: #006400">
    &quot;Signal representing the convective thermal conductance medium 2 in [W/K]&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Gc_1 <span style="color: #006400">
    &quot;Signal representing the convective thermal conductance medium 1 in [W/K]&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> gai_1(k=1/nEle) <span style="color: #006400">
    &quot;Gain medium-side 1 to take discretization into account&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> gai_2(k=1/nEle) <span style="color: #006400">
    &quot;Gain medium-side 2 to take discretization into account&quot;</span>;
<span style="color: blue">equation </span>
  Q1_flow =<span style="color: red"> sum</span>(ele[i,j].Q1_flow <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar, j<span style="color: blue"> in </span>1:nPipSeg);
  Q2_flow =<span style="color: red"> sum</span>(ele[i,j].Q2_flow <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar, j<span style="color: blue"> in </span>1:nPipSeg);
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar<span style="color: blue"> loop</span>
    <span style="color: #006400">// liquid side (pipes)</span>
    <span style="color: red">connect</span>(ele[i,1].port_a1,       port_a1[i]);
    <span style="color: red">connect</span>(ele[i,nPipSeg].port_b1, port_b1[i]);
    <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nPipSeg-1<span style="color: blue"> loop</span>
      <span style="color: red">connect</span>(ele[i,j].port_b1, ele[i,j+1].port_a1);
    <span style="color: blue">end for</span>;
    <span style="color: #006400">// gas side (duct)                                                                                      //water connections</span>
    <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nPipSeg<span style="color: blue"> loop</span>
      <span style="color: red">connect</span>(ele[i,j].port_a2, port_a2[i,j]);
      <span style="color: red">connect</span>(ele[i,j].port_b2, port_b2[i,j]);
    <span style="color: blue">end for</span>;
  <span style="color: blue">end for</span>;

  <span style="color: red">connect</span>(Gc_1, gai_1.u);
  <span style="color: red">connect</span>(Gc_2, gai_2.u);
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar<span style="color: blue"> loop</span>

     <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nPipSeg<span style="color: blue"> loop</span>
      <span style="color: red">connect</span>(gai_1.y, ele[i,j].Gc_1);
      <span style="color: red">connect</span>(gai_2.y, ele[i,j].Gc_2);
     <span style="color: blue">end for</span>;
  <span style="color: blue">end for</span>;

<span style="color: blue">end </span>CoilRegister;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DuctManifoldFixedResistance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha56c1cfbb2cf2d87btanceI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.DuctManifoldFixedResistance</h2>
<p>
<b>Manifold for a heat exchanger air duct connection</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha56c1cfbb2cf2d87btanceD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldFixedResistance">
</p>
<h3>Information</h3>

<p>
Duct manifold with a fixed flow resistance.
</p>
<p>
This model causes the flow to be distributed equally
into each flow path by using a fixed flow resistance
for each flow path.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"
>PartialDuctManifold</a> (Partial manifold for heat exchanger duct connection).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Integer</td><td>nPipSeg</td><td>&nbsp;</td><td>Number of pipe segments per register used for discretization</td></tr>
<tr><td>Boolean</td><td>use_dh</td><td>false</td><td>Set to true to specify hydraulic diameter</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dh</td><td>1</td><td>Hydraulic diameter of duct [m]</td></tr>
<tr><td>Real</td><td>ReC</td><td>4000</td><td>Reynolds number where transition to turbulent starts</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.3</td><td>Fraction of nominal mass flow rate where transition to turbulent occurs</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dl</td><td>0.3</td><td>Length of mixing volume [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal Condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Mass flow rate at port_a [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar, nPipSeg]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> DuctManifoldFixedResistance <span style="color: #006400">
  &quot;Manifold for a heat exchanger air duct connection&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"
>PartialDuctManifold</a>;

  <span style="color: blue">parameter </span>Boolean use_dh = false <span style="color: #006400">&quot;Set to true to specify hydraulic diameter&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal <span style="color: #006400">
    &quot;Mass flow rate at port_a&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_nominal(min=0) <span style="color: #006400">&quot;Pressure&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dh=1 <span style="color: #006400">&quot;Hydraulic diameter of duct&quot;</span>;
  <span style="color: blue">parameter </span>Real ReC=4000 <span style="color: #006400">
    &quot;Reynolds number where transition to turbulent starts&quot;</span>;
  <span style="color: blue">parameter </span>Boolean linearized = false <span style="color: #006400">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</span>;
  <span style="color: blue">parameter </span>Real deltaM(min=0) = 0.3 <span style="color: #006400">
    &quot;Fraction of nominal mass flow rate where transition to turbulent occurs&quot;</span>;
  <span style="color: blue">parameter </span>Boolean from_dp = false <span style="color: #006400">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</span>;

  <a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Fluid.FixedResistances.FixedResistanceDpM</a>[nPipPar,nPipSeg] fixRes(
    <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">each </span>m_flow_nominal=m_flow_nominal/nPipPar/nPipSeg,
    <span style="color: blue">each </span>m_flow(start=mStart_flow_a/nPipPar/nPipSeg),
    <span style="color: blue">each </span>dp_nominal=dp_nominal,
    <span style="color: blue">each </span>dh=dh/<span style="color: red">sqrt</span>(nPipPar*nPipSeg),
    <span style="color: blue">each </span>from_dp=from_dp,
    <span style="color: blue">each </span>deltaM=deltaM,
    <span style="color: blue">each </span>ReC=ReC,
    <span style="color: blue">each </span>use_dh=use_dh,
    <span style="color: blue">each </span>linearized=linearized) <span style="color: #006400">&quot;Fixed resistance for each duct&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dl = 0.3 <span style="color: #006400">&quot;Length of mixing volume&quot;</span>;
  <a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Fluid.MixingVolumes.MixingVolume</a> vol(<span style="color: blue">redeclare </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">final </span>V=dh*dh*dl,
    <span style="color: blue">final </span>nPorts=1+nPipPar*nPipSeg,
    <span style="color: blue">final </span>energyDynamics=energyDynamics,
    <span style="color: blue">final </span>massDynamics=energyDynamics,
    m_flow_nominal=m_flow_nominal);
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> energyDynamics=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400">
    &quot;Default formulation of energy balances for volume&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar<span style="color: blue"> loop</span>
    <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nPipSeg<span style="color: blue"> loop</span>
      <span style="color: red">connect</span>(vol.ports[1+(i-1)*nPipSeg+j], fixRes[i, j].port_a);
    <span style="color: blue">end for</span>;
  <span style="color: blue">end for</span>;

  <span style="color: red">connect</span>(port_a, vol.ports[1]);
  <span style="color: red">connect</span>(fixRes.port_b, port_b);
<span style="color: blue">end </span>DuctManifoldFixedResistance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE DuctManifoldNoResistance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchada98fd043097efb4tanceI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.DuctManifoldNoResistance</h2>
<p>
<b>Duct manifold without resistance</b>
<br>
<br><img src="Buildings.Fluid.HeatExchada98fd043097efb4tanceD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.DuctManifoldNoResistance">
</p>
<h3>Information</h3>

<p>
Duct manifold without flow resistance.
</p>
<p>
This model connects the flows between the ports without 
modeling flow friction. The model is used in conjunction with
a manifold which contains pressure drop elements and that
is added to the other side of the heat exchanger registers.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"
>PartialDuctManifold</a> (Partial manifold for heat exchanger duct connection).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Integer</td><td>nPipSeg</td><td>&nbsp;</td><td>Number of pipe segments per register used for discretization</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar, nPipSeg]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> DuctManifoldNoResistance <span style="color: #006400">&quot;Duct manifold without resistance&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"
>PartialDuctManifold</a>;

<span style="color: blue">equation </span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar<span style="color: blue"> loop</span>
    <span style="color: blue">for </span>j<span style="color: blue"> in </span>1:nPipSeg<span style="color: blue"> loop</span>
    <span style="color: red">connect</span>(port_a, port_b[i, j]);
    <span style="color: blue">end for</span>;
  <span style="color: blue">end for</span>;
<span style="color: blue">end </span>DuctManifoldNoResistance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HACoilInside<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha7076bc547e015019nsideI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HACoilInside" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.HACoilInside"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.HACoilInside</h2>
<p>
<b>Calculates the hA value for water inside a coil</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha7076bc547e015019nsideD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HACoilInside">
</p>
<h3>Information</h3>

<p>
Model for convective heat transfer coefficients inside a coil.
Optionally, the convective heat transfer coefficient can
be computed as a function of temperature and mass flow rate.
</p>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>n</td><td>0.85</td><td>Water-side exponent for convective heat transfer coefficient, h proportional to m_flow^n</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Water mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>hA_nominal</td><td>&nbsp;</td><td>Convective heat transfer coefficient [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_nominal</td><td>Modelica.SIunits.Conversions...</td><td>Nominal water temperature [K]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Modeling detail</td></tr>
<tr><td>Boolean</td><td>flowDependent</td><td>true</td><td>Set to false to make hA independent of mass flow rate</td></tr>
<tr><td>Boolean</td><td>temperatureDependent</td><td>true</td><td>Set to false to make hA independent of temperature</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m_flow</td><td>Mass flow rate [kg/s]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>T</td><td>Temperature [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>hA</td><td>Inside convective heat transfer [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HACoilInside <span style="color: #006400">&quot;Calculates the hA value for water inside a coil&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal <span style="color: #006400">&quot;Water mass flow rate&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m_flow(unit=&quot;kg/s&quot;) <span style="color: #006400">&quot;Mass flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> T(unit=&quot;K&quot;) <span style="color: #006400">&quot;Temperature&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> hA(unit=&quot;W/K&quot;) <span style="color: #006400">
    &quot;Inside convective heat transfer&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> hA_nominal(min=0) <span style="color: #006400">
    &quot;Convective heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span>Real n(min=0, max=1)=0.85 <span style="color: #006400">
    &quot;Water-side exponent for convective heat transfer coefficient, h proportional to m_flow^n&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_nominal=
          <span style="color: red">Modelica.SIunits.Conversions.from_degC</span>(20) <span style="color: #006400">
    &quot;Nominal water temperature&quot;</span>;
  <span style="color: blue">parameter </span>Boolean flowDependent=true <span style="color: #006400">
    &quot;Set to false to make hA independent of mass flow rate&quot;</span>;
  <span style="color: blue">parameter </span>Boolean temperatureDependent = true <span style="color: #006400">
    &quot;Set to false to make hA independent of temperature&quot;</span>;

<span style="color: blue">protected </span>
  Real x(min=0) <span style="color: #006400">
    &quot;Factor for temperature dependent variation of heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span>Real s(min=0, fixed=false) <span style="color: #006400">
    &quot;Coefficient for temperature dependence of heat transfer coefficient&quot;</span>;
  Real fm <span style="color: #006400">&quot;Fraction of actual to nominal mass flow rate&quot;</span>;

<span style="color: blue">initial </span><span style="color: blue">equation </span>
  s =  <span style="color: blue">if </span>temperatureDependent<span style="color: blue"> then </span>
            0.014/(1+0.014*<span style="color: red">Modelica.SIunits.Conversions.to_degC</span>(T_nominal))<span style="color: blue"> else </span>
              1;
<span style="color: blue">equation </span>
  fm = <span style="color: blue">if </span>flowDependent<span style="color: blue"> then </span>m_flow / m_flow_nominal<span style="color: blue"> else </span>1;
  x = <span style="color: blue">if </span>temperatureDependent<span style="color: blue"> then </span>1 + s * (T-T_nominal)<span style="color: blue"> else </span>1;
  <span style="color: blue">if </span>flowDependent<span style="color: blue"> and </span>temperatureDependent<span style="color: blue"> then</span>
    hA = x * hA_nominal *<span style="color: red"> Buildings.Utilities.Math.Functions.regNonZeroPower</span>(fm, n, 0.1);
  <span style="color: blue">elseif </span>flowDependent<span style="color: blue"> then</span>
    hA = hA_nominal *<span style="color: red"> Buildings.Utilities.Math.Functions.regNonZeroPower</span>(fm, n, 0.1);
  <span style="color: blue">elseif </span>temperatureDependent<span style="color: blue"> then</span>
    hA = x * hA_nominal;
  <span style="color: blue">else</span>
    hA = hA_nominal;
  <span style="color: blue">end if</span>;

<span style="color: blue">end </span>HACoilInside;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HADryCoil<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha7670ce850aefe4cfyCoilI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.HADryCoil</h2>
<p>
<b>Sensible convective heat transfer model for air to water coil</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha7670ce850aefe4cfyCoilD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HADryCoil">
</p>
<h3>Information</h3>

<p>
Model for sensible convective heat transfer coefficients for an air to water coil.
</p>
<p>
This model computes the convective heat transfer coefficient
for an air to water coil.
The parameters allow a user to enable or disable, individually
for each medium, the mass flow and/or the temperature dependence
of the convective heat transfer coefficients.
For a detailed explanation of the equation, see
the references below.
</p>
<h4>References</h4>
<ul>
<li>
Wetter Michael,
<A HREF="http://www.osti.gov/energycitations/product.biblio.jsp?osti_id=7353">
Simulation model finned water-air-coil without condensation</a>,
LBNL-42355,
Lawrence Berkeley National Laboratory,
Berkeley, CA, 1999.
</li>
<li>
Wetter Michael,
<A HREF="http://www.osti.gov/energycitations/product.biblio.jsp?osti_id=7352">
Simulation model air-to-air plate heat exchanger</A>,
LBNL-42354,
Lawrence Berkeley National Laboratory,
Berkeley, CA, 1999.
</li>
</ul>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>n_w</td><td>0.85</td><td>Water-side exponent for convective heat transfer coefficient, h~m_flow^n</td></tr>
<tr><td>Real</td><td>n_a</td><td>0.8</td><td>Air-side exponent for convective heat transfer coefficient, h~m_flow^n</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA_nominal</td><td>&nbsp;</td><td>Thermal conductance at nominal flow [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal_w</td><td>&nbsp;</td><td>Water mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal_a</td><td>&nbsp;</td><td>Air mass flow rate [kg/s]</td></tr>
<tr><td>Real</td><td>r_nominal</td><td>0.5</td><td>Ratio between air-side and water-side convective heat transfer coefficient</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>hA_nominal_w</td><td>UA_nominal*(r_nominal + 1)/r...</td><td>Water side convective heat transfer coefficient [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>hA_nominal_a</td><td>r_nominal*hA_nominal_w</td><td>Air side convective heat transfer coefficient, including fin resistance [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T0_w</td><td>Modelica.SIunits.Conversions...</td><td>Water temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T0_a</td><td>Modelica.SIunits.Conversions...</td><td>Air temperature [K]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Modeling detail</td></tr>
<tr><td>Boolean</td><td>waterSideFlowDependent</td><td>true</td><td>Set to false to make water-side hA independent of mass flow rate</td></tr>
<tr><td>Boolean</td><td>airSideFlowDependent</td><td>true</td><td>Set to false to make air-side hA independent of mass flow rate</td></tr>
<tr><td>Boolean</td><td>waterSideTemperatureDependent</td><td>true</td><td>Set to false to make water-side hA independent of temperature</td></tr>
<tr><td>Boolean</td><td>airSideTemperatureDependent</td><td>true</td><td>Set to false to make air-side hA independent of temperature</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m1_flow</td><td>Mass flow rate medium 1</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>m2_flow</td><td>Mass flow rate medium 2</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>T_1</td><td>Temperature medium 1</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>T_2</td><td>Temperature medium 2</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>hA_1</td><td>Convective heat transfer medium 1</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>hA_2</td><td>Convective heat transfer medium 2</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HADryCoil <span style="color: #006400">
  &quot;Sensible convective heat transfer model for air to water coil&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> UA_nominal(min=0) <span style="color: #006400">
    &quot;Thermal conductance at nominal flow&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal_w <span style="color: #006400">
    &quot;Water mass flow rate&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal_a <span style="color: #006400">&quot;Air mass flow rate&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m1_flow <span style="color: #006400">&quot;Mass flow rate medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> m2_flow <span style="color: #006400">&quot;Mass flow rate medium 2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> T_1 <span style="color: #006400">&quot;Temperature medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> T_2 <span style="color: #006400">&quot;Temperature medium 2&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> hA_1 <span style="color: #006400">
    &quot;Convective heat transfer medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> hA_2 <span style="color: #006400">
    &quot;Convective heat transfer medium 2&quot;</span>;

  <span style="color: blue">parameter </span>Real r_nominal(min=0)=0.5 <span style="color: #006400">
    &quot;Ratio between air-side and water-side convective heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> hA_nominal_w(min=0)=UA_nominal * (r_nominal+1)/r_nominal <span style="color: #006400">
    &quot;Water side convective heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> hA_nominal_a(min=0)=r_nominal * hA_nominal_w <span style="color: #006400">
    &quot;Air side convective heat transfer coefficient, including fin resistance&quot;</span>;
  <span style="color: blue">parameter </span>Real n_w(min=0, max=1)=0.85 <span style="color: #006400">
    &quot;Water-side exponent for convective heat transfer coefficient, h~m_flow^n&quot;</span>;
  <span style="color: blue">parameter </span>Real n_a(min=0, max=1)=0.8 <span style="color: #006400">
    &quot;Air-side exponent for convective heat transfer coefficient, h~m_flow^n&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T0_w=
          <span style="color: red">Modelica.SIunits.Conversions.from_degC</span>(20) <span style="color: #006400">&quot;Water temperature&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T0_a=
          <span style="color: red">Modelica.SIunits.Conversions.from_degC</span>(20) <span style="color: #006400">&quot;Air temperature&quot;</span>;
  <span style="color: blue">parameter </span>Boolean waterSideFlowDependent=true <span style="color: #006400">
    &quot;Set to false to make water-side hA independent of mass flow rate&quot;</span>;
  <span style="color: blue">parameter </span>Boolean airSideFlowDependent = true <span style="color: #006400">
    &quot;Set to false to make air-side hA independent of mass flow rate&quot;</span>;
  <span style="color: blue">parameter </span>Boolean waterSideTemperatureDependent = true <span style="color: #006400">
    &quot;Set to false to make water-side hA independent of temperature&quot;</span>;
  <span style="color: blue">parameter </span>Boolean airSideTemperatureDependent = true <span style="color: #006400">
    &quot;Set to false to make air-side hA independent of temperature&quot;</span>;
<span style="color: blue">protected </span>
  Real x_a(min=0) <span style="color: #006400">
    &quot;Factor for air side temperature dependent variation of heat transfer coefficient&quot;</span>;
  Real x_w(min=0) <span style="color: #006400">
    &quot;Factor for water side temperature dependent variation of heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span>Real s_w(min=0, fixed=false) <span style="color: #006400">
    &quot;Coefficient for temperature dependence of water side heat transfer coefficient&quot;</span>;
  Real fm_w <span style="color: #006400">&quot;Fraction of actual to nominal mass flow rate&quot;</span>;
  Real fm_a <span style="color: #006400">&quot;Fraction of actual to nominal mass flow rate&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">equation </span>
  s_w =  <span style="color: blue">if </span>waterSideTemperatureDependent<span style="color: blue"> then </span>
            0.014/(1+0.014*<span style="color: red">Modelica.SIunits.Conversions.to_degC</span>(T0_w))<span style="color: blue"> else </span>
              1;
<span style="color: blue">equation </span>
  fm_w = <span style="color: blue">if </span>waterSideFlowDependent<span style="color: blue"> then </span>
              m1_flow / m_flow_nominal_w<span style="color: blue"> else </span>1;
  fm_a = <span style="color: blue">if </span>airSideFlowDependent<span style="color: blue"> then </span>
              m2_flow / m_flow_nominal_a<span style="color: blue"> else </span>1;
  x_w = <span style="color: blue">if </span>waterSideTemperatureDependent<span style="color: blue"> then </span>
         1 + s_w * (T_1-T0_w)<span style="color: blue"> else </span>
              1;
  x_a = <span style="color: blue">if </span>airSideTemperatureDependent<span style="color: blue"> then </span>
         1 + 4.769E-3 * (T_2-T0_a)<span style="color: blue"> else </span>
              1;
  <span style="color: blue">if </span>waterSideFlowDependent<span style="color: blue"> then</span>
    hA_1 = x_w * hA_nominal_w
               *<span style="color: red"> Buildings.Utilities.Math.Functions.regNonZeroPower</span>(fm_w, n_w, 0.1);
  <span style="color: blue">else</span>
    hA_1 = x_w * hA_nominal_w;
  <span style="color: blue">end if</span>;

  <span style="color: blue">if </span>airSideFlowDependent<span style="color: blue"> then</span>
    hA_2 = x_a * hA_nominal_a
               *<span style="color: red"> Buildings.Utilities.Math.Functions.regNonZeroPower</span>(fm_a, n_a, 0.1);
  <span style="color: blue">else</span>
    hA_2 = x_a * hA_nominal_a;
  <span style="color: blue">end if</span>;
<span style="color: blue">end </span>HADryCoil;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HANaturalCylinder<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchad881de7eba37d378inderI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HANaturalCylinder" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.HANaturalCylinder"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.HANaturalCylinder</h2>
<p>
<b>Calculates an hA value for natural convection around a cylinder</b>
<br>
<br><img src="Buildings.Fluid.HeatExchad881de7eba37d378inderD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HANaturalCylinder">
</p>
<h3>Information</h3>

            <p>
            This model calculates the convection coefficient <i>h</i> for natural convection
            from a cylinder submerged in fluid. <i>h</i> is calcualted using Eq 9.34 from 
            Incropera and DeWitt (1996).
            Output of the block is the <i>hA</i> value.
            </p>
            <p>
            The Nusselt number is computed as
            </p>
            <p align="center" style="font-style:italic;">
            Nu<sub>D</sub> = (0.6 + (0.387 Ra<sub>D</sub><sup>(1/6)</sup>)/(1+(0.559 Pr)<sup>
            (9/16)</sup>)<sup>(8/27)</sup>)<sup>2</sup>);
            </p>
            <p>
            where <i>Nu<sub>D</sub></i> is the Nusselt number, <i>Ra<sub>D</sub></i> is the 
            Rayleigh number and 
            <i>Pr</i> is the Prandtl number.<br/>
            This correclation is accurate for <i>Ra<sub>D</sub></i> less than 10<sup>12</sup>.
            </p>
            <p>
            <i>h</i> is then calculated from the Nusselt number. The equation is
            </p>
            <p align="center" style="font-style:italic;">
            h = Nu<sub>D</sub> k/D
            </p>
            <p>
            where <i>k</i> is the thermal conductivity of the fluid and <i>D</i> is the diameter
            of the submerged cylinder.
            </p>
            <h4>References</h4>
            <p>
            Fundamentals of Heat and Mass Transfer (Fourth Edition), Frank Incropera and David 
            DeWitt, John Wiley and Sons, 1996
            </p>
            
<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Partial medium model to be replaced with specific medium</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</a></td><td>ChaLen</td><td>&nbsp;</td><td>Characteristic length of the cylinder [m]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>hA_nominal</td><td>&nbsp;</td><td>Convective heat transfer coefficient [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TFlu_nominal</td><td>&nbsp;</td><td>Fluid temperature at hA_nominal [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TSur_nominal</td><td>&nbsp;</td><td>Surface temperature at hA_nominal [K]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Partial medium model to be replaced with specific medium</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TSur</td><td>Temperature of the external surface of the heat exchanger [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TFlu</td><td>Temperature of the fluid in the heat exchanger [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>hA</td><td>hA-value of the heat exchanger [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HANaturalCylinder <span style="color: #006400">
  &quot;Calculates an hA value for natural convection around a cylinder&quot;</span>
  <span style="color: blue">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">
    &quot;Partial medium model to be replaced with specific medium&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</a> ChaLen <span style="color: #006400">
    &quot;Characteristic length of the cylinder&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> hA_nominal(min=0) <span style="color: #006400">
    &quot;Convective heat transfer coefficient&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TFlu_nominal <span style="color: #006400">
    &quot;Fluid temperature at hA_nominal&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TSur_nominal <span style="color: #006400">
    &quot;Surface temperature at hA_nominal&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TSur(unit = &quot;K&quot;) <span style="color: #006400">
    &quot;Temperature of the external surface of the heat exchanger&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TFlu(unit = &quot;K&quot;) <span style="color: #006400">
    &quot;Temperature of the fluid in the heat exchanger&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> hA(unit = &quot;W/K&quot;) <span style="color: #006400">
    &quot;hA-value of the heat exchanger&quot;</span>;
  Real h(unit=&quot;W/(m2.K)&quot;) <span style="color: #006400">&quot;Convection coefficient&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span>Real Gr_nominal(fixed=false) <span style="color: #006400">&quot;Grashof number&quot;</span>;
  <span style="color: blue">parameter </span>Real B_nominal(unit=&quot;1/K&quot;, fixed=false) <span style="color: #006400">
    &quot;isobaricExpansionCoefficient&quot;</span>;
  <span style="color: blue">parameter </span>Real nu_nominal(unit = &quot;m2/s&quot;, fixed=false) <span style="color: #006400">
    &quot;Kinematic viscosity of the medium&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> mu_nominal(fixed=false) <span style="color: #006400">
    &quot;Dynamic viscosity of the medium&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho_nominal(fixed=false) <span style="color: #006400">
    &quot;Density of the medium&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>Modelica.SIunits.ThermalConductivity</a> k_nominal(fixed=false) <span style="color: #006400">
    &quot;Thermal conductivity of the fluid&quot;</span>;

  <span style="color: blue">parameter </span>Real Ra_nominal(fixed=false) <span style="color: #006400">&quot;Rayleigh number&quot;</span>;
  <span style="color: blue">parameter </span>Real Pr_nominal(fixed=false) <span style="color: #006400">&quot;Prandlt number&quot;</span>;
  <span style="color: blue">parameter </span>Real Nusselt_nominal(fixed=false) <span style="color: #006400">&quot;Nusselt number&quot;</span>;

  <span style="color: blue">parameter </span>Real h_nominal(unit=&quot;W/(m2.K)&quot;, fixed=false) <span style="color: #006400">
    &quot;Convection coefficient&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</a> A(fixed=false) <span style="color: #006400">
    &quot;Surface area, deduced from hA_nominal, fluid temperatures and characteristic length&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>Modelica.SIunits.ThermalConductivity</a> k <span style="color: #006400">&quot;Thermal conductivity of the fluid&quot;</span>;
  Real Gr <span style="color: #006400">&quot;Grashof number&quot;</span>;
  Real B(unit=&quot;1/K&quot;) <span style="color: #006400">&quot;isobaricExpansionCoefficient&quot;</span>;
  Real nu(unit = &quot;m2/s&quot;) <span style="color: #006400">&quot;Kinematic viscosity of the medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> mu <span style="color: #006400">&quot;Dynamic viscosity of the medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho <span style="color: #006400">&quot;Density of the medium&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>Modelica.SIunits.Acceleration</a> g= Modelica.Constants.g_n <span style="color: #006400">
    &quot;Acceleration due to gravity&quot;</span>;

  Real Ra <span style="color: #006400">&quot;Rayleigh number&quot;</span>;
  Real Pr <span style="color: #006400">&quot;Prandlt number&quot;</span>;
  Real Nusselt <span style="color: #006400">&quot;Nusselt number&quot;</span>;

<span style="color: blue">function</span> nusselt
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>Modelica.SIunits.ThermalConductivity</a> k <span style="color: #006400">&quot;Thermal conductivity&quot;</span>;
  <span style="color: blue">input </span>Real Pr <span style="color: #006400">&quot;Prandlt number&quot;</span>;
  <span style="color: blue">input </span>Real Ra <span style="color: #006400">&quot;Rayleigh number&quot;</span>;
  <span style="color: blue">output </span>Real Nu(min=0) <span style="color: #006400">&quot;Nusselt number&quot;</span>;
  <span style="color: blue">protected </span>
  Real num <span style="color: #006400">&quot;Numerator&quot;</span>;
  Real den <span style="color: #006400">&quot;Denominator&quot;</span>;
<span style="color: blue">algorithm </span>
  num := (0.387*<span style="color: red">Buildings.Utilities.Math.Functions.smoothMax</span>(Ra,1,0.1)^(1/6));
  den := ((1+(0.559/Pr)^(9/16))^(8/27));
  Nu := (0.6+num/den)^2;
<span style="color: blue">end </span>nusselt;

<span style="color: blue">initial </span><span style="color: blue">equation </span>

  <span style="color: #006400">// Fluid properties</span>
  mu_nominal =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater</span>(
        T=  0.5 * (TSur_nominal+TFlu_nominal));
  rho_nominal =<span style="color: red"> Medium.density</span>(
        <span style="color: red">Medium.setState_pTX</span>(
          p=  Medium.p_default,
          T=  0.5*(TSur_nominal+TFlu_nominal),
          X=  Medium.X_default));
  Pr_nominal =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater</span>(
          T=  0.5*(TSur_nominal+TFlu_nominal));

  B_nominal =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater</span>(
          T=  0.5*(TSur_nominal+TFlu_nominal));
  nu_nominal = mu_nominal/rho_nominal;

  Gr_nominal = Modelica.Constants.g_n * B_nominal * (TSur_nominal -
  TFlu_nominal)*ChaLen^3/nu_nominal^2;
  Ra_nominal = Gr_nominal*Pr_nominal;
  <span style="color: #006400">// Convection coefficient</span>
  k_nominal =<span style="color: red"> Medium.thermalConductivity</span>(
    <span style="color: red">Medium.setState_pTX</span>(
    p=  Medium.p_default,
    T=  0.5*(TFlu_nominal+TSur_nominal),
    X=  Medium.X_default));
  Nusselt_nominal =<span style="color: red"> nusselt</span>(k=k_nominal, Pr=Pr_nominal, Ra=Ra_nominal);
  h_nominal = Nusselt_nominal * k_nominal/ChaLen;
  A = hA_nominal / h_nominal;
<span style="color: blue">equation </span>
  <span style="color: #006400">// Fluid properties</span>
  mu =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater</span>(
        T=  0.5 * (TSur+TFlu));
  rho =<span style="color: red"> Medium.density</span>(
        <span style="color: red">Medium.setState_pTX</span>(
          p=  Medium.p_default,
          T=  0.5*(TSur+TFlu),
          X=  Medium.X_default));
  Pr =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater</span>(
          T=  0.5*(TSur+TFlu));

  B =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater</span>(
          T=  0.5*(TSur+TFlu));
  nu = mu/rho;

  Gr = Modelica.Constants.g_n * B * (TSur - TFlu)*ChaLen^3/nu^2;
  Ra = Gr*Pr;
  <span style="color: #006400">// Convection coefficient</span>
  k =<span style="color: red"> Medium.thermalConductivity</span>(
    <span style="color: red">Medium.setState_pTX</span>(
    p=  Medium.p_default,
    T=  0.5*(TFlu+TSur),
    X=  Medium.X_default));
  Nusselt =<span style="color: red"> nusselt</span>(k=k, Pr=Pr, Ra=Ra);
  h = Nusselt * k/ChaLen;
  hA = h*A;
<span style="color: blue">end </span>HANaturalCylinder;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HexElementLatent<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha1b8f24e9b34cfd3aatentI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.HexElementLatent</h2>
<p>
<b>Element of a heat exchanger</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha1b8f24e9b34cfd3aatentD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent">
</p>
<h3>Information</h3>

<p>
Element of a heat exchanger with humidity condensation of fluid 2 and
with dynamics of the fluids and the solid. 
</p>
<p>
See 
<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>
Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a>
for a description of the physics.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a> (Element of a heat exchanger 2).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatCapacity"
>HeatCapacity</a></td><td>C</td><td>2*UA_nominal*tau_m</td><td>Heat capacity of metal (= cp*m) [J/K]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA_nominal</td><td>&nbsp;</td><td>Thermal conductance at nominal flow, used to compute time constant [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau_m</td><td>60</td><td>Time constant of metal at nominal UA value [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td>Boolean</td><td>from_dp1</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance1</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM1</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td>Boolean</td><td>from_dp2</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance2</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM2</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau1</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau2</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics1</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics2</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 2</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p1_start</td><td>Medium1.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T1_start</td><td>Medium1.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X1_start[Medium1.nX]</td><td>Medium1.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_start[Medium1.nC]</td><td>fill(0, Medium1.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_nominal[Medium1.nC]</td><td>fill(1E-2, Medium1.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p2_start</td><td>Medium2.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T2_start</td><td>Medium2.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X2_start[Medium2.nX]</td><td>Medium2.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_start[Medium2.nC]</td><td>fill(0, Medium2.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_nominal[Medium2.nC]</td><td>fill(1E-2, Medium2.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_1</td><td>Signal representing the convective thermal conductance medium 1 in [W/K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_2</td><td>Signal representing the convective thermal conductance medium 2 in [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HexElementLatent <span style="color: #006400">&quot;Element of a heat exchanger&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a>(
    <span style="color: blue">redeclare </span><span style="color: blue">final </span><a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir"
>Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir</a> vol2(
      <span style="color: blue">final </span>energyDynamics=energyDynamics2,
      <span style="color: blue">final </span>massDynamics=energyDynamics2),
      mas(T(fixed=(energyDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial)),
          der_T(
           fixed=(energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial))));

  <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange"
>MassExchange</a> masExc(
     <span style="color: blue">redeclare </span><span style="color: blue">final </span><span style="color: blue">package</span> Medium=<a href="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</a>) <span style="color: #006400">&quot;Model for mass exchange&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Sensors.html#Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor"
>Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor</a> temSen(
    T(<span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
      <span style="color: blue">final </span>unit = &quot;K&quot;, displayUnit = &quot;degC&quot;, min=0)) <span style="color: #006400">
    &quot;Temperature sensor of metal&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(temSen.T, masExc.TSur);
  <span style="color: red">connect</span>(masExc.mWat_flow, vol2.mWat_flow);
  <span style="color: red">connect</span>(masExc.TLiq, vol2.TWat);
  <span style="color: red">connect</span>(vol2.X_w, masExc.XInf);
  <span style="color: red">connect</span>(mas.port, temSen.port);
  <span style="color: red">connect</span>(Gc_2, masExc.Gc);
<span style="color: blue">end </span>HexElementLatent;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE HexElementSensible<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha953a279e069b3fd1sibleI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.HexElementSensible</h2>
<p>
<b>Element of a heat exchanger with humidity condensation of fluid 2</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha953a279e069b3fd1sibleD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible">
</p>
<h3>Information</h3>

<p>
Element of a heat exchanger with humidity condensation and
with dynamics of the fluids and the solid. 
</p>
<p>
See 
<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>
Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a>
for a description of the physics.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a> (Element of a heat exchanger 2).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatCapacity"
>HeatCapacity</a></td><td>C</td><td>2*UA_nominal*tau_m</td><td>Heat capacity of metal (= cp*m) [J/K]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA_nominal</td><td>&nbsp;</td><td>Thermal conductance at nominal flow, used to compute time constant [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau_m</td><td>60</td><td>Time constant of metal at nominal UA value [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td>Boolean</td><td>from_dp1</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance1</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM1</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td>Boolean</td><td>from_dp2</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance2</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM2</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau1</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau2</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics1</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics2</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 2</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p1_start</td><td>Medium1.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T1_start</td><td>Medium1.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X1_start[Medium1.nX]</td><td>Medium1.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_start[Medium1.nC]</td><td>fill(0, Medium1.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_nominal[Medium1.nC]</td><td>fill(1E-2, Medium1.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p2_start</td><td>Medium2.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T2_start</td><td>Medium2.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X2_start[Medium2.nX]</td><td>Medium2.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_start[Medium2.nC]</td><td>fill(0, Medium2.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_nominal[Medium2.nC]</td><td>fill(1E-2, Medium2.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_1</td><td>Signal representing the convective thermal conductance medium 1 in [W/K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_2</td><td>Signal representing the convective thermal conductance medium 2 in [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> HexElementSensible <span style="color: #006400">
  &quot;Element of a heat exchanger with humidity condensation of fluid 2&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"
>Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement</a>(
    <span style="color: blue">redeclare </span><span style="color: blue">final </span><a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</a> vol2(
        <span style="color: blue">final </span>energyDynamics=energyDynamics2,
        <span style="color: blue">final </span>massDynamics=energyDynamics2),
        mas(
          T(fixed=(energyDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial)),
          der_T(
           fixed=(energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial))));

<span style="color: blue">end </span>HexElementSensible;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE MassExchange<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha4f3d4227286e511changeI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.MassExchange</h2>
<p>
<b>Block to compute the latent heat transfer based on the Lewis number</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha4f3d4227286e511changeD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.MassExchange">
</p>
<h3>Information</h3>

<p>
This model computes the mass transfer based on similarity laws between
the convective sensible heat transfer coefficient and the mass transfer coefficient.
</p>
<p>
Using the Lewis number which is defined as the ratio between the heat and mass
diffusion coefficients, one can obtain the ratio between convection 
heat transfer coefficient <i>h</i> in (W/(m^2*K)) and
mass transfer coefficient <i>h<sub>m</sub></i> in (m/s) as follows:
</p>
<p align="center" style="font-style:italic;">
  h &frasl; h<sub>m</sub> = &rho;  c<sub>p</sub>  Le<sup>(1-n)</sup> &frasl;
 h<sub>m</sub>
</p>
<p>
where <i>&rho;</i> is the mass density,
<i>c<sub>p</sub></i> is the specific heat capacity
of the bulk medium and <i>n</i> is a coefficient from the boundary layer analysis, which
is typically <i>n=1/3</i>.
From this equation, we can compute the water vapor mass flow rate 
<i>n<sub>A</sub></i> in (kg/s) as
</p>
<p align="center" style="font-style:italic;">
  n<sub>A</sub> = G<sub>c</sub> &frasl; (c<sub>p</sub> Le<sup>(1-n)</sup>)
  (X<sub>s</sub> - X<sub>&#8734;</sub>),
</p>
<p>
where <i>G<sub>c</sub></i> is the sensible heat conductivity in (W/K) and 
<i>X<sub>s</sub></i> and 
<i>X<sub>&#8734;</sub></i> are the water vapor mass per unit volume 
in the boundary layer and in the 
bulk of the medium. In this model, 
<i>X<sub>s</sub></i> is the saturation water vapor pressure
corresponding to the temperature <i>T<sub>sur</sub></i> which is an input.
</p>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Fluid medium model</td></tr>
<tr><td>Real</td><td>Le</td><td>1</td><td>Lewis number (around 1 for water vapor in air)</td></tr>
<tr><td>Real</td><td>n</td><td>1/3</td><td>Exponent in bondary layer ratio, delta/delta_t = Pr^n</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Fluid medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>XInf</td><td>Water mass fraction of medium</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TSur</td><td>Surface temperature [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>mWat_flow</td><td>Water flow rate [kg/s]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>TLiq</td><td>Temperature at which condensate drains from system [K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc</td><td>Signal representing the convective (sensible) thermal conductance in [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> MassExchange <span style="color: #006400">
  &quot;Block to compute the latent heat transfer based on the Lewis number&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;
  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">
    &quot;Fluid medium model&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> XInf <span style="color: #006400">&quot;Water mass fraction of medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TSur(<span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                            <span style="color: blue">final </span>unit = &quot;K&quot;, displayUnit = &quot;degC&quot;, min=0) <span style="color: #006400">
    &quot;Surface temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> mWat_flow(<span style="color: blue">final </span>unit = &quot;kg/s&quot;) <span style="color: #006400">
    &quot;Water flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> TLiq(<span style="color: blue">final </span>quantity=&quot;ThermodynamicTemperature&quot;,
                                             <span style="color: blue">final </span>unit = &quot;K&quot;, displayUnit = &quot;degC&quot;, min=0) <span style="color: #006400">
    &quot;Temperature at which condensate drains from system&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Gc <span style="color: #006400">
    &quot;Signal representing the convective (sensible) thermal conductance in [W/K]&quot;</span>;
  <span style="color: blue">parameter </span>Real Le = 1 <span style="color: #006400">&quot;Lewis number (around 1 for water vapor in air)&quot;</span>;
  <span style="color: blue">parameter </span>Real n = 1/3 <span style="color: #006400">
    &quot;Exponent in bondary layer ratio, delta/delta_t = Pr^n&quot;</span>;
<span style="color: blue">public </span>
  <a href="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.X_pW"
>Buildings.Utilities.Psychrometrics.X_pW</a> humRatPre(use_p_in=false) <span style="color: #006400">
    &quot;Model to convert water vapor pressure into humidity ratio&quot;</span>;
  <a href="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.pW_TDewPoi"
>Buildings.Utilities.Psychrometrics.pW_TDewPoi</a> TDewPoi <span style="color: #006400">
    &quot;Model to compute the water vapor pressure at the dew point&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</a> gain(k=1/cpLe_default) <span style="color: #006400">
    &quot;Constant to convert from heat transfer to mass transfer&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Product"
>Modelica.Blocks.Math.Product</a> mWat <span style="color: #006400">&quot;Water flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Min"
>Modelica.Blocks.Math.Min</a> min;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</a> zero(k=0) <span style="color: #006400">&quot;Constant for zero&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</a> delX(k2=-1, k1=1) <span style="color: #006400">&quot;Humidity difference&quot;</span>;
<span style="color: blue">protected </span>
 <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</a> sta_default =<span style="color: red"> Medium.setState_phX</span>(h=Medium.h_default,
       p=Medium.p_default, X=Medium.X_default);
 <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> cp_default=<span style="color: red">Medium.specificHeatCapacityCp</span>(sta_default) <span style="color: #006400">
    &quot;Density, used to compute fluid volume&quot;</span>;
 <span style="color: blue">parameter </span>Real cpLe_default(unit=&quot;J/(kg.K)&quot;) = cp_default * Le^(1-n);
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(TSur, TDewPoi.T);
  <span style="color: red">connect</span>(TDewPoi.p_w, humRatPre.p_w);
  <span style="color: red">connect</span>(TSur, TLiq);
  <span style="color: red">connect</span>(Gc, gain.u);
  <span style="color: red">connect</span>(gain.y, mWat.u2);
  <span style="color: red">connect</span>(mWat.y, mWat_flow);
  <span style="color: red">connect</span>(zero.y,min. u1);
  <span style="color: red">connect</span>(delX.u2,XInf);
  <span style="color: red">connect</span>(humRatPre.X_w, delX.u1);
  <span style="color: red">connect</span>(delX.y, min.u2);
  <span style="color: red">connect</span>(min.y, mWat.u1);
<span style="color: blue">end </span>MassExchange;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialDuctManifold<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchaf5169d3349c0b86fifoldI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PartialDuctManifold</h2>
<p>
<b>Partial manifold for heat exchanger duct connection</b>
<br>
<br><img src="Buildings.Fluid.HeatExchaf5169d3349c0b86fifoldD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctManifold">
</p>
<h3>Information</h3>

<p>
Partial duct manifold for a heat exchanger.
</p>
<p>
This model defines the duct connection to a heat exchanger.
It is extended by other models that model the flow connection 
between the ports with and without flow friction.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"
>PartialDuctPipeManifold</a> (Partial heat exchanger duct and pipe manifold).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Integer</td><td>nPipSeg</td><td>&nbsp;</td><td>Number of pipe segments per register used for discretization</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar, nPipSeg]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialDuctManifold <span style="color: #006400">
  &quot;Partial manifold for heat exchanger duct connection&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"
>PartialDuctPipeManifold</a>;
  <span style="color: blue">parameter </span>Integer nPipSeg(min=1) <span style="color: #006400">
    &quot;Number of pipe segments per register used for discretization&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a>[nPipPar,nPipSeg] port_b(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = Medium,
        <span style="color: blue">each </span>m_flow(start=-mStart_flow_a/nPipSeg/nPipPar,
             max=<span style="color: blue">if </span>allowFlowReversal<span style="color: blue"> then </span>+Modelica.Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector b for medium (positive design flow direction is from port_a to port_b)&quot;</span>;
<span style="color: blue">end </span>PartialDuctManifold;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialDuctPipeManifold<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchac048acf90cb410b4ifoldI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PartialDuctPipeManifold</h2>
<p>
<b>Partial heat exchanger duct and pipe manifold</b>
<br>
<br><img src="Buildings.Fluid.HeatExchac048acf90cb410b4ifoldD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold">
</p>
<h3>Information</h3>

<p>
Partial heat exchanger manifold.
This partial model defines ports and parameters that are used
for air-side and water-side heat exchanger manifolds.
</p>

<p>Extends from <a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a> (Base icon).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Medium in the component</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialDuctPipeManifold <span style="color: #006400">
  &quot;Partial heat exchanger duct and pipe manifold&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_BaseClasses.html#Buildings.BaseClasses.BaseIcon"
>Buildings.BaseClasses.BaseIcon</a>;

  <span style="color: blue">outer </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</a> system <span style="color: #006400">&quot;System wide properties&quot;</span>;

  <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium =
      <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">&quot;Medium in the component&quot;</span>;

  <span style="color: blue">parameter </span>Boolean allowFlowReversal = system.allowFlowReversal <span style="color: #006400">
    &quot;= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)&quot;</span>;

  <span style="color: blue">parameter </span>Integer nPipPar(min=1) <span style="color: #006400">&quot;Number of parallel pipes in each register&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> mStart_flow_a <span style="color: #006400">
    &quot;Guess value for mass flow rate at port_a&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</a> port_a(
        <span style="color: blue">redeclare </span><span style="color: blue">package</span> Medium = Medium,
        m_flow(start=mStart_flow_a, min=<span style="color: blue">if </span>allowFlowReversal<span style="color: blue"> then </span>-Modelica.Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector a for medium (positive design flow direction is from port_a to port_b)&quot;</span>;
<span style="color: blue">end </span>PartialDuctPipeManifold;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialEffectiveness<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha58f2ae39d7b1a5d3enessI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PartialEffectiveness</h2>
<p>
<b>Partial model to implement heat exchangers based on effectiveness model</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha58f2ae39d7b1a5d3enessD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialEffectiveness">
</p>
<h3>Information</h3>

<p>
Partial model to implement heat exchanger models.
</p>
<p>
Classes that extend this model need to implement heat and 
mass balance equations in a form like
</p>
<pre>
  // transfered heat
  Q1_flow = eps * QMax_flow;
  // no heat loss to ambient
  0 = Q1_flow + Q2_flow;
  // no mass exchange
  mXi1_flow = zeros(Medium1.nXi);
  mXi2_flow = zeros(Medium2.nXi);
</pre>
<p>
Thus, if medium 1 is heated in this device, then <code>Q1_flow &gt; 0</code>
and <code>QMax_flow &gt; 0</code>.
</p>

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger"
>Fluid.Interfaces.StaticFourPortHeatMassExchanger</a> (Partial model transporting two fluid streams between four ports without storing mass or energy).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td>Boolean</td><td>sensibleOnly1</td><td>&nbsp;</td><td>Set to true if sensible exchange only for medium 1</td></tr>
<tr><td>Boolean</td><td>sensibleOnly2</td><td>&nbsp;</td><td>Set to true if sensible exchange only for medium 2</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port a1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b1_start</td><td>Medium1.h_default</td><td>Start value for enthalpy flowing out of port b1 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_a2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port a2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</a></td><td>h_outflow_b2_start</td><td>Medium2.h_default</td><td>Start value for enthalpy flowing out of port b2 [J/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td>Boolean</td><td>from_dp1</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance1</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM1</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td>Boolean</td><td>from_dp2</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance2</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM2</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialEffectiveness <span style="color: #006400">
  &quot;Partial model to implement heat exchangers based on effectiveness model&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger"
>Fluid.Interfaces.StaticFourPortHeatMassExchanger</a>(show_T=false);

  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_in1 <span style="color: #006400">&quot;Inlet temperature medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_in2 <span style="color: #006400">&quot;Inlet temperature medium 2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> C1_flow <span style="color: #006400">
    &quot;Heat capacity flow rate medium 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> C2_flow <span style="color: #006400">
    &quot;Heat capacity flow rate medium 2&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMin_flow(min=0) <span style="color: #006400">
    &quot;Minimum heat capacity flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</a> QMax_flow <span style="color: #006400">
    &quot;Maximum heat flow rate into medium 1&quot;</span>;
<span style="color: blue">protected </span>
  <span style="color: blue">parameter </span>Real delta=1E-3 <span style="color: #006400">&quot;Parameter used for smoothing&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> cp1_default(fixed=false) <span style="color: #006400">
    &quot;Specific heat capacity of medium 1 at default medium state&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</a> cp2_default(fixed=false) <span style="color: #006400">
    &quot;Specific heat capacity of medium 2 at default medium state&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMin_flow_small(fixed=false) <span style="color: #006400">
    &quot;Small value for smoothing of minimum heat capacity flow rate&quot;</span>;
  Real fra_a1(min=0, max=1) <span style="color: #006400">
    &quot;Fraction of incoming state taken from port a2 (used to avoid excessive calls to regStep)&quot;</span>;
  Real fra_b1(min=0, max=1) <span style="color: #006400">
    &quot;Fraction of incoming state taken from port b2 (used to avoid excessive calls to regStep)&quot;</span>;
  Real fra_a2(min=0, max=1) <span style="color: #006400">
    &quot;Fraction of incoming state taken from port a2 (used to avoid excessive calls to regStep)&quot;</span>;
  Real fra_b2(min=0, max=1) <span style="color: #006400">
    &quot;Fraction of incoming state taken from port b2 (used to avoid excessive calls to regStep)&quot;</span>;
<span style="color: blue">initial </span><span style="color: blue">equation </span>
  cp1_default =<span style="color: red"> Medium1.specificHeatCapacityCp</span>(<span style="color: red">Medium1.setState_pTX</span>(
    Medium1.p_default,
    Medium1.T_default,
    Medium1.X_default));
  cp2_default =<span style="color: red"> Medium2.specificHeatCapacityCp</span>(<span style="color: red">Medium2.setState_pTX</span>(
    Medium2.p_default,
    Medium2.T_default,
    Medium2.X_default));
  CMin_flow_small =<span style="color: red"> min</span>(m1_flow_small*cp1_default, m2_flow_small*cp2_default);
<span style="color: blue">equation </span>
  <span style="color: blue">if </span>allowFlowReversal2<span style="color: blue"> then</span>
    fra_a2 =<span style="color: red"> Modelica.Fluid.Utilities.regStep</span>(
      m2_flow,
      1,
      0,
      m2_flow_small);
    fra_b2 = 1-fra_a2;
  <span style="color: blue">else</span>
    fra_a2 = 1;
    fra_b2 = 0;
  <span style="color: blue">end if</span>;
  <span style="color: blue">if </span>allowFlowReversal1<span style="color: blue"> then</span>
    fra_a1 =<span style="color: red"> Modelica.Fluid.Utilities.regStep</span>(
      m1_flow,
      1,
      0,
      m1_flow_small);
    fra_b1 = 1-fra_a1;
  <span style="color: blue">else</span>
    fra_a1 = 1;
    fra_b1 = 0;
  <span style="color: blue">end if</span>;

  <span style="color: #006400">/////////////////////////////////////////////////////////</span>
  <span style="color: #006400">// Definitions for heat transfer effectiveness model</span>
  T_in1 = <span style="color: blue">if </span>allowFlowReversal1<span style="color: blue"> then </span>
    fra_a1 *<span style="color: red"> Medium1.temperature</span>(state_a1_inflow) + fra_b1 *<span style="color: red"> Medium1.temperature</span>(state_b1_inflow)<span style="color: blue"> else </span>
    <span style="color: red">Medium1.temperature</span>(state_a1_inflow);
  T_in2 = <span style="color: blue">if </span>allowFlowReversal2<span style="color: blue"> then </span>
    fra_a2 *<span style="color: red"> Medium2.temperature</span>(state_a2_inflow) + fra_b2 *<span style="color: red"> Medium2.temperature</span>(state_b2_inflow)<span style="color: blue"> else </span>
    <span style="color: red">Medium2.temperature</span>(state_a2_inflow);

  C1_flow =<span style="color: red"> abs</span>(m1_flow)*
    ( <span style="color: blue">if </span>allowFlowReversal1<span style="color: blue"> then </span>
           fra_a1 *<span style="color: red"> Medium1.specificHeatCapacityCp</span>(state_a1_inflow) +
           fra_b1 *<span style="color: red"> Medium1.specificHeatCapacityCp</span>(state_b1_inflow)<span style="color: blue"> else </span>
        <span style="color: red">Medium1.specificHeatCapacityCp</span>(state_a1_inflow));
  C2_flow =<span style="color: red"> abs</span>(m2_flow)*
    ( <span style="color: blue">if </span>allowFlowReversal2<span style="color: blue"> then </span>
           fra_a2 *<span style="color: red"> Medium2.specificHeatCapacityCp</span>(state_a2_inflow) +
           fra_b2 *<span style="color: red"> Medium2.specificHeatCapacityCp</span>(state_b2_inflow)<span style="color: blue"> else </span>
        <span style="color: red">Medium2.specificHeatCapacityCp</span>(state_a2_inflow));
  CMin_flow =<span style="color: red"> min</span>(C1_flow, C2_flow);

  <span style="color: #006400">// QMax_flow is maximum heat transfer into medium 1</span>
  QMax_flow = CMin_flow*(T_in2 - T_in1);

<span style="color: blue">end </span>PartialEffectiveness;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialHexElement<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchad2ea9b0e609271e2ementI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PartialHexElement</h2>
<p>
<b>Element of a heat exchanger 2</b>
<br>
<br><img src="Buildings.Fluid.HeatExchad2ea9b0e609271e2ementD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialHexElement">
</p>
<h3>Information</h3>

<p>
Element of a heat exchanger 
with dynamics of the fluids and the solid. 
The <i>hA</i> value for both fluids is an input.
The driving force for the heat transfer is the temperature difference
between the fluid volumes and the solid.
</p>
<p>
The heat capacity <i>C</i> of the metal is assigned as follows.
Suppose the metal temperature is governed by
</p>
<p align="center" style="font-style:italic;">
  C dT &frasl; dt = (hA)<sub>1</sub> (T<sub>1</sub> - T)
  + (hA)<sub>2</sub> (T<sub>2</sub> - T)
</p>
<p>
where <i>hA</i> are the convective heat transfer coefficients times 
heat transfer area that also take
into account heat conduction in the heat exchanger fins and
<i>T<sub>1</sub></i> and <i>T<sub>2</sub></i> are the medium temperatures.
Assuming <i>(hA)<sub>1</sub>=(hA)<sub>2</sub></i>, 
this equation can be rewritten as
</p>
<p align="center" style="font-style:italic;">
  C dT &frasl; dt =
  2 (UA)<sub>0</sub> ( (T<sub>1</sub> - T) + (T<sub>2</sub> - T) )

</p>
<p>
where <i>(UA)<sub>0</sub></i> is the <i>UA</i> value at nominal conditions. 
Hence we set the heat capacity of the metal 
to
</p>
<p align="center" style="font-style:italic;">
C = 2 (UA)<sub>0</sub> &tau;<sub>m</sub>
</p>
<p>
where <i>&tau;<sub>m</sub></i> is the time constant that the metal
of the heat exchanger has if the metal is approximated by a lumped
thermal mass.
</p>
<p>
<b>Note:</b> This model is introduced to allow the instances
<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent"
>
Buildings.Fluid.HeatExchangers.BaseClasses.HexElementLatent
</a>
and
<a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible"
>
Buildings.Fluid.HeatExchangers.BaseClasses.HexElementSensible
</a>
to redeclare the volume as <code>final</code>, thereby avoiding
that a GUI displays the volume as a replaceable component.
</p>

<p>Extends from <a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.FourPortHeatMassExchanger</a> (Model transporting two fluid streams between four ports with storing mass or energy).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium1</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 1 in the component</td></tr>
<tr><td colspan="2">replaceable package Medium2</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium 2 in the component</td></tr>
<tr><td><a href="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>MixingVolume</a></td><td>vol2</td><td>redeclare Buildings.Fluid.Mi...</td><td>Volume for fluid 2</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatCapacity"
>HeatCapacity</a></td><td>C</td><td>2*UA_nominal*tau_m</td><td>Heat capacity of metal (= cp*m) [J/K]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_nominal</td><td>&nbsp;</td><td>Nominal mass flow rate [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA_nominal</td><td>&nbsp;</td><td>Thermal conductance at nominal flow, used to compute time constant [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau_m</td><td>60</td><td>Time constant of metal at nominal UA value [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow.start</td><td>0</td><td>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp1.start</td><td>0</td><td>Pressure difference between port_a1 and port_b1 [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow.start</td><td>0</td><td>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp2.start</td><td>0</td><td>Pressure difference between port_a2 and port_b2 [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal1</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr><td>Boolean</td><td>allowFlowReversal2</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m1_flow_small</td><td>1E-4*abs(m1_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</a></td><td>m2_flow_small</td><td>1E-4*abs(m2_flow_nominal)</td><td>Small mass flow rate for regularization of zero flow [kg/s]</td></tr>
<tr><td>Boolean</td><td>homotopyInitialization</td><td>true</td><td>= true, use homotopy method</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Diagnostics</td></tr>
<tr><td>Boolean</td><td>show_T</td><td>false</td><td>= true, if actual temperature at port is computed</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Flow resistance</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td>Boolean</td><td>from_dp1</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance1</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM1</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td>Boolean</td><td>from_dp2</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
<tr><td>Boolean</td><td>linearizeFlowResistance2</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Real</td><td>deltaM2</td><td>0.1</td><td>Fraction of nominal flow rate where flow transitions to laminar</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Dynamics</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau1</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</a></td><td>tau2</td><td>30</td><td>Time constant at nominal flow [s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Equations</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Formulation of energy balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>massDynamics</td><td>energyDynamics</td><td>Formulation of mass balance</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics1</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</a></td><td>energyDynamics2</td><td>Modelica.Fluid.Types.Dynamic...</td><td>Default formulation of energy balances for volume 2</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Initialization</b></td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 1</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p1_start</td><td>Medium1.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T1_start</td><td>Medium1.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X1_start[Medium1.nX]</td><td>Medium1.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_start[Medium1.nC]</td><td>fill(0, Medium1.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C1_nominal[Medium1.nC]</td><td>fill(1E-2, Medium1.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Medium 2</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.AbsolutePressure"
>AbsolutePressure</a></td><td>p2_start</td><td>Medium2.p_default</td><td>Start value of pressure [Pa]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.Temperature"
>Temperature</a></td><td>T2_start</td><td>Medium2.T_default</td><td>Start value of temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.MassFraction"
>MassFraction</a></td><td>X2_start[Medium2.nX]</td><td>Medium2.X_default</td><td>Start value of mass fractions m_i/m [kg/kg]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_start[Medium2.nC]</td><td>fill(0, Medium2.nC)</td><td>Start value of trace substances</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_Types.html#Modelica.Media.Interfaces.Types.ExtraProperty"
>ExtraProperty</a></td><td>C2_nominal[Medium2.nC]</td><td>fill(1E-2, Medium2.nC)</td><td>Nominal value of trace substances. (Set to typical order of magnitude.)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a1</td><td>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b1</td><td>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a2</td><td>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b2</td><td>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_1</td><td>Signal representing the convective thermal conductance medium 1 in [W/K]</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>Gc_2</td><td>Signal representing the convective thermal conductance medium 2 in [W/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> PartialHexElement <span style="color: #006400">&quot;Element of a heat exchanger 2&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.FourPortHeatMassExchanger</a>(
   vol1(<span style="color: blue">final </span>energyDynamics=energyDynamics1,
        <span style="color: blue">final </span>massDynamics=energyDynamics1));

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> UA_nominal <span style="color: #006400">
    &quot;Thermal conductance at nominal flow, used to compute time constant&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</a> tau_m(min=0) = 60 <span style="color: #006400">
    &quot;Time constant of metal at nominal UA value&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.HeatCapacity"
>Modelica.SIunits.HeatCapacity</a> C=2*UA_nominal*tau_m <span style="color: #006400">
    &quot;Heat capacity of metal (= cp*m)&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Gc_1 <span style="color: #006400">
    &quot;Signal representing the convective thermal conductance medium 1 in [W/K]&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> Gc_2 <span style="color: #006400">
    &quot;Signal representing the convective thermal conductance medium 2 in [W/K]&quot;</span>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> energyDynamics1=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400">
    &quot;Default formulation of energy balances for volume 1&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</a> energyDynamics2=
    Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <span style="color: #006400">
    &quot;Default formulation of energy balances for volume 2&quot;</span>;

  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.HeatCapacitor"
>Modelica.Thermal.HeatTransfer.Components.HeatCapacitor</a> mas(
    C=C,
    T(stateSelect=StateSelect.always)) <span style="color: #006400">&quot;Mass of metal&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.Convection"
>Modelica.Thermal.HeatTransfer.Components.Convection</a> con1(dT(min=-200)) <span style="color: #006400">
    &quot;Convection (and conduction) on fluid side 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Thermal_HeatTransfer_Components.html#Modelica.Thermal.HeatTransfer.Components.Convection"
>Modelica.Thermal.HeatTransfer.Components.Convection</a> con2(dT(min=-200)) <span style="color: #006400">
    &quot;Convection (and conduction) on fluid side 2&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(Gc_1, con1.Gc);
  <span style="color: red">connect</span>(Gc_2, con2.Gc);
  <span style="color: red">connect</span>(con1.solid,mas. port);
  <span style="color: red">connect</span>(con2.solid,mas. port);
  <span style="color: red">connect</span>(con1.fluid, vol1.heatPort);
  <span style="color: red">connect</span>(con2.fluid, vol2.heatPort);
<span style="color: blue">end </span>PartialHexElement;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PartialPipeManifold<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchade69b8a343b2c96fifoldI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PartialPipeManifold</h2>
<p>
<b>Partial pipe manifold for a heat exchanger</b>
<br>
<br><img src="Buildings.Fluid.HeatExchade69b8a343b2c96fifoldD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold">
</p>
<h3>Information</h3>

<p>
Partial pipe manifold for a heat exchanger.
</p>
<p>
This model defines the pipe connection to a heat exchanger.
It is extended by other models that model the flow connection 
between the ports with and without flow friction.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"
>PartialDuctPipeManifold</a> (Partial heat exchanger duct and pipe manifold).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">partial </span><span style="color: blue">model</span> PartialPipeManifold <span style="color: #006400">
  &quot;Partial pipe manifold for a heat exchanger&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialDuctPipeManifold"
>PartialDuctPipeManifold</a>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</a>[nPipPar] port_b(
        <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = Medium,
        <span style="color: blue">each </span>m_flow(start=-mStart_flow_a/nPipPar, max=<span style="color: blue">if </span>allowFlowReversal<span style="color: blue"> then </span>+Modelica.Constants.inf<span style="color: blue"> else </span>0)) <span style="color: #006400">
    &quot;Fluid connector b for medium (positive design flow direction is from port_a to port_b)&quot;</span>;
<span style="color: blue">end </span>PartialPipeManifold;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PipeManifoldFixedResistance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExcha201daf8bbf7ad828tanceI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PipeManifoldFixedResistance</h2>
<p>
<b>Pipe manifold for a heat exchanger connection</b>
<br>
<br><img src="Buildings.Fluid.HeatExcha201daf8bbf7ad828tanceD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldFixedResistance">
</p>
<h3>Information</h3>

<p>
Pipe manifold with a fixed flow resistance.
</p>
<p>
This model causes the flow to be distributed equally
into each flow path by using a fixed flow resistance
for each flow path.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"
>PartialPipeManifold</a> (Partial pipe manifold for a heat exchanger).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Boolean</td><td>use_dh</td><td>false</td><td>Set to true to specify hydraulic diameter</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</a></td><td>dh</td><td>0.025</td><td>Hydraulic diameter for each pipe [m]</td></tr>
<tr><td>Real</td><td>ReC</td><td>4000</td><td>Reynolds number where transition to turbulent starts</td></tr>
<tr><td>Real</td><td>deltaM</td><td>0.3</td><td>Fraction of nominal mass flow rate where transition to turbulent occurs</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Nominal Condition</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>m_flow_nominal</td><td>&nbsp;</td><td>Mass flow rate at port_a [kg/s]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</a></td><td>dp_nominal</td><td>&nbsp;</td><td>Pressure [Pa]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Advanced</b></td></tr>
<tr><td>Boolean</td><td>linearized</td><td>false</td><td>= true, use linear relation between m_flow and dp for any flow rate</td></tr>
<tr><td>Boolean</td><td>from_dp</td><td>false</td><td>= true, use m_flow = f(dp) else dp = f(m_flow)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> PipeManifoldFixedResistance <span style="color: #006400">
  &quot;Pipe manifold for a heat exchanger connection&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"
>PartialPipeManifold</a>;

  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</a> m_flow_nominal <span style="color: #006400">
    &quot;Mass flow rate at port_a&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</a> dp_nominal(min=0) <span style="color: #006400">&quot;Pressure&quot;</span>;

  <span style="color: blue">parameter </span>Boolean use_dh = false <span style="color: #006400">&quot;Set to true to specify hydraulic diameter&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</a> dh=0.025 <span style="color: #006400">&quot;Hydraulic diameter for each pipe&quot;</span>;
  <span style="color: blue">parameter </span>Real ReC=4000 <span style="color: #006400">
    &quot;Reynolds number where transition to turbulent starts&quot;</span>;
  <span style="color: blue">parameter </span>Boolean linearized = false <span style="color: #006400">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</span>;
  <span style="color: blue">parameter </span>Real deltaM(min=0) = 0.3 <span style="color: #006400">
    &quot;Fraction of nominal mass flow rate where transition to turbulent occurs&quot;</span>;
  <span style="color: blue">parameter </span>Boolean from_dp = false <span style="color: #006400">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</span>;

  <a href="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Fluid.FixedResistances.FixedResistanceDpM</a>[nPipPar] fixRes(
    <span style="color: blue">redeclare </span><span style="color: blue">each </span><span style="color: blue">package</span> Medium = Medium,
    <span style="color: blue">each </span>m_flow_nominal=m_flow_nominal/nPipPar,
    <span style="color: blue">each </span>m_flow(start=mStart_flow_a),
    <span style="color: blue">each </span>dp_nominal=dp_nominal,
    <span style="color: blue">each </span>dh=dh,
    <span style="color: blue">each </span>from_dp=from_dp,
    <span style="color: blue">each </span>deltaM=deltaM,
    <span style="color: blue">each </span>ReC=ReC,
    <span style="color: blue">each </span>use_dh=use_dh,
    <span style="color: blue">each </span>linearized=linearized) <span style="color: #006400">&quot;Fixed resistance for each duct&quot;</span>;
<span style="color: blue">equation </span>
  <span style="color: blue">for </span>i<span style="color: blue"> in </span>1:nPipPar<span style="color: blue"> loop</span>
    <span style="color: red">connect</span>(port_a, fixRes[i].port_a);
    <span style="color: red">connect</span>(fixRes[i].port_b, port_b[i]);
  <span style="color: blue">end for</span>;
<span style="color: blue">end </span>PipeManifoldFixedResistance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE PipeManifoldNoResistance<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchaa9fb81743030c8a4tanceI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.PipeManifoldNoResistance</h2>
<p>
<b>Manifold for heat exchanger register</b>
<br>
<br><img src="Buildings.Fluid.HeatExchaa9fb81743030c8a4tanceD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.PipeManifoldNoResistance">
</p>
<h3>Information</h3>

<p>
Pipe manifold without flow resistance.
</p>
<p>
This model connects the flows between the ports without 
modeling flow friction. The model is used in conjunction with
a manifold which contains pressure drop elements and that
is added to the other side of the heat exchanger registers.
</p>

<p>Extends from <a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"
>PartialPipeManifold</a> (Partial pipe manifold for a heat exchanger).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</a></td><td>Medium in the component</td></tr>
<tr><td>Integer</td><td>nPipPar</td><td>&nbsp;</td><td>Number of parallel pipes in each register</td></tr>
<tr><td>Boolean</td><td>connectAllPressures</td><td>true</td><td>&nbsp;</td></tr>
<tr style="background-color: #e0e0e0"><td colspan="4">Initialization</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</a></td><td>mStart_flow_a</td><td>&nbsp;</td><td>Guess value for mass flow rate at port_a [kg/s]</td></tr>
<tr style="background-color: #c0c0c0"><td colspan="4"><b>Assumptions</b></td></tr>
<tr><td>Boolean</td><td>allowFlowReversal</td><td>system.allowFlowReversal</td><td>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</a></td><td>port_a</td><td>Fluid connector a for medium (positive design flow direction is from port_a to port_b)</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</a></td><td>port_b[nPipPar]</td><td>Fluid connector b for medium (positive design flow direction is from port_a to port_b)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> PipeManifoldNoResistance <span style="color: #006400">&quot;Manifold for heat exchanger register&quot;</span>
  <span style="color: blue">extends </span><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses.PartialPipeManifold"
>PartialPipeManifold</a>;
 <span style="color: blue">parameter </span>Boolean connectAllPressures=true;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_Fluid_Fittings.html#Modelica.Fluid.Fittings.MultiPort"
>Modelica.Fluid.Fittings.MultiPort</a> mulPor(
      <span style="color: blue">redeclare </span><span style="color: blue">package</span> Medium = Medium,
      <span style="color: blue">final </span>nPorts_b=nPipPar);
<span style="color: blue">equation </span>
  <span style="color: red">connect</span>(port_a, mulPor.port_a);
  <span style="color: red">connect</span>(mulPor.ports_b, port_b);
<span style="color: blue">end </span>PipeManifoldNoResistance;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE RayleighNumber<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Buildings.Fluid.HeatExchad07ce4b42389716cumberI.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.RayleighNumber" align="right" style="border: 1px solid" width="80" height="80">
<a name="Buildings.Fluid.HeatExchangers.BaseClasses.RayleighNumber"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.RayleighNumber</h2>
<p>
<b>Calculates the Rayleigh number for a given fluid and characteristic length</b>
<br>
<br><img src="Buildings.Fluid.HeatExchad07ce4b42389716cumberD.png" alt="Buildings.Fluid.HeatExchangers.BaseClasses.RayleighNumber">
</p>
<h3>Information</h3>

<p>
This model calculates the rayleigh number for a given fluid and characteristic length. 
It is calculated using Eq 9.25 in Incropera and DeWitt (1996). The equation is:
</p>
<p align="center" style="font-style:italic;">
Ra<sub>L</sub> = Gr<sub>L</sub> Pr (g B (T<sub>S</sub> - T<sub>F</sub>) L<sup>3</sup>) /(&nu;*&alpha;)
</p>
<p>
where:<br/>
  <i>Ra<sub>L</sub></i> is the Rayleigh number, <i>Gr<sub>L</sub></i> is the Grashof number, <i>Pr</i> 
  is the Prandtl number, <i>g</i> is gravity, <i>B</i> is the isobaric expansion coefficient,
  <i>T<sub>S</sub></i> is the temperature of the surface, <i>T<sub>F</sub></i> is the temperature of the 
  fluid, <i>L</i> is the characteristic length, <i>&nu;</i> is the kinematic viscosity and <i>&alpha;</i> 
  is the thermal diffusivity.
</p>
<p>
This model is currently only used in natural convection calculations for water. As a result, the 
calculations reference functions to identify properties of water instead of a medium model. 
</p>
<h4>References</h4>
<p>
Fundamentals of Heat and Mass Transfer (Fourth Edition), Frank Incropera and David DeWitt, John Wiley and Sons, 1996
</p>

<p>Extends from <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a> (Basic graphical layout of input/output block).</p>
<h3>Parameters</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Parameters">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Modelica.Media.Interfaces.Pa...</td><td>Fluid medium model</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</a></td><td>ChaLen</td><td>&nbsp;</td><td>Characteristic length [m]</td></tr>
</table>
<h3>Connectors</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Connectors">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td colspan="2">replaceable package Medium</td><td>Fluid medium model</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TSur</td><td>Surface temperature of the HX [K]</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Ra</td><td>Rayleigh number</td></tr>
<tr><td>output <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</a></td><td>Pr</td><td>Prandlt number</td></tr>
<tr><td>input <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</a></td><td>TFlu</td><td>Temperature of the surrounding fluid [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">model</span> RayleighNumber <span style="color: #006400">
  &quot;Calculates the Rayleigh number for a given fluid and characteristic length&quot;</span>
  <span style="color: blue">extends </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Icons.html#Modelica.Blocks.Icons.Block"
>Modelica.Blocks.Icons.Block</a>;
   <span style="color: blue">replaceable </span><span style="color: blue">package</span> Medium = <a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</a> <span style="color: #006400">
    &quot;Fluid medium model&quot;</span>;
  <span style="color: blue">parameter </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</a> ChaLen <span style="color: #006400">&quot;Characteristic length&quot;</span>;
  Real Gr <span style="color: #006400">&quot;Grashof number&quot;</span>;
  Real B(unit=&quot;1/K&quot;) <span style="color: #006400">&quot;isobaricExpansionCoefficient&quot;</span>;
  Real nu(unit = &quot;m2/s&quot;) <span style="color: #006400">&quot;Kinematic viscosity of the medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> mu <span style="color: #006400">&quot;Dynamic viscosity of the medium&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</a> rho <span style="color: #006400">&quot;Density of the medium&quot;</span>;

   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TSur(unit = &quot;K&quot;) <span style="color: #006400">
    &quot;Surface temperature of the HX&quot;</span>;

   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> Ra <span style="color: #006400">&quot;Rayleigh number&quot;</span>;

   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</a> Pr <span style="color: #006400">&quot;Prandlt number&quot;</span>;
   <a href="../../msl/Modelica%203.2.1/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</a> TFlu(unit=&quot;K&quot;) <span style="color: #006400">
    &quot;Temperature of the surrounding fluid&quot;</span>;
<span style="color: blue">equation </span>
    mu =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater</span>(
        T=  0.5 * (TSur+TFlu));
    rho =<span style="color: red"> Medium.density</span>(
        <span style="color: red">Medium.setState_pTX</span>(
        p=  Medium.p_default,
        T=  0.5*(TSur+TFlu),
        X=  Medium.X_default));
    Pr =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater</span>(
          T=  0.5*(TSur+TFlu));

    B =<span style="color: red"> Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater</span>(
          T=  0.5*(TSur+TFlu));
    nu = mu/rho;

    Gr = Modelica.Constants.g_n * B * (TSur - TFlu)*ChaLen^3/nu^2;
    Ra = Gr*Pr;

<span style="color: blue">end </span>RayleighNumber;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE appartusDewPoint<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.appartusDewPoint"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.appartusDewPoint</h2>
<p>
<b>Computes the apparatus dewpoint temperature</b>
</p>
<h3>Information</h3>

<p>
This function computes iteratively the apparatus dew point temperature for a cooling coil.
The apparatus dew point temperature is defined as in the HVAC2 Toolkit (Brandemuehl <i>et al.</i>
1993), namely as the intersection of the line between coil air inlet state <i>(T,X)</i> and
outlet state, and the saturation line.
</p>
<p>
This function does its own iterations to find a solution because a solution may not exist or
not be unique because the saturation line is convex.
Therefore, this function searches for the solution starting at the air inlet temperature
and progressively reduces the guess value for the apparatus dew point temperature.
When a temperature below the apparatus dew point temperature has been found, it is rejected, and the
search continues with a smaller step until the step size is smaller than a prescribed value. This
ensures that the solution corresponding to the higher temperature is found.
If no solution can be found, the function stops the simulation.
</p>
<h4>References</h4>
<p>
Brandemuehl, Michael, Shauna Gabel and Inger Andresen. <i>HVAC2 Toolkit, A toolkit for secondary HVAC system
energy calculations</i>. ASHRAE, Atlanta. 1993.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TAir_in</td><td>&nbsp;</td><td>Air inlet temperature at design condition [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>TAir_out</td><td>&nbsp;</td><td>Air inlet temperature at design condition [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>MassFraction</a></td><td>XW_in</td><td>&nbsp;</td><td>Water vapor concentration at coil inlet at design condition [1]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>MassFraction</a></td><td>XW_out</td><td>&nbsp;</td><td>Water vapor concentration at coil outlet at design condition [1]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_dp</td><td>Apparatus dew point temperature [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>MassFraction</a></td><td>XW_dp</td><td>Water vapor concentration at apparatus dew point [1]</td></tr>
<tr><td>Real</td><td>m</td><td>Slope, used to compute apparatus dewpoint temperature [1/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> appartusDewPoint <span style="color: #006400">
  &quot;Computes the apparatus dewpoint temperature&quot;</span>
  <span style="color: blue">import </span>psy = <a href="Buildings_Utilities_Psychrometrics_Functions.html#Buildings.Utilities.Psychrometrics.Functions"
>Buildings.Utilities.Psychrometrics.Functions</a>;

  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TAir_in <span style="color: #006400">
    &quot;Air inlet temperature at design condition&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> TAir_out <span style="color: #006400">
    &quot;Air inlet temperature at design condition&quot;</span>;

  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XW_in <span style="color: #006400">
    &quot;Water vapor concentration at coil inlet at design condition&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XW_out <span style="color: #006400">
    &quot;Water vapor concentration at coil outlet at design condition&quot;</span>;
  <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_dp <span style="color: #006400">&quot;Apparatus dew point temperature&quot;</span>;
  <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</a> XW_dp <span style="color: #006400">
    &quot;Water vapor concentration at apparatus dew point&quot;</span>;
  <span style="color: blue">output </span>Real m(unit=&quot;1/K&quot;) <span style="color: #006400">
    &quot;Slope, used to compute apparatus dewpoint temperature&quot;</span>;

<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T <span style="color: #006400">&quot;Iteration variable for temperature&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> dT <span style="color: #006400">
    &quot;Temperature increment used in initial search&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> dTMin = 1E-10 <span style="color: #006400">
    &quot;Minimum temperature increment used during search&quot;</span>;

  Integer i <span style="color: #006400">&quot;Number of iterations&quot;</span>;
  <span style="color: blue">constant </span>Integer iMax = 1000 <span style="color: #006400">&quot;Maximum number of iterations&quot;</span>;

  Real m_nominal(unit=&quot;1/K&quot;) <span style="color: #006400">
    &quot;Slope based on nominal conditions, used to compute apparatus dewpoint temperature&quot;</span>;
  Boolean converged <span style="color: #006400">&quot;Flag to control iteration&quot;</span>;

<span style="color: blue">algorithm </span>
  <span style="color: #006400">// Slope at design condition</span>
  m_nominal :=(XW_in - XW_out)/(TAir_in - TAir_out);
  <span style="color: #006400">// Start value for iteration</span>
  T_dp :=TAir_in;
  dT :=1;
  converged :=false;
  i :=0;
  <span style="color: blue">while </span><span style="color: blue">not </span>converged<span style="color: blue"> loop</span>
    i :=i + 1;
    <span style="color: red">assert</span>(i &lt; iMax, &quot;Maximum number of iterations exceeded in computing\n&quot;
      + &quot;apparatus dew point for coil at nominal conditions&quot;
      + &quot;\n  Best known approximation is T_dp = &quot; +<span style="color: red"> String</span>(T_dp)
      + &quot;\n  Search step is dT = &quot; +<span style="color: red"> String</span>(dT));

    T :=T_dp - dT;
    <span style="color: #006400">// New trial value</span>
    XW_dp :=<span style="color: red">psy.X_pW</span>(<span style="color: red">psy.pW_TDewPoi</span>(T));
    m :=(XW_in - XW_dp)/(TAir_in - T);
    <span style="color: blue">if </span>(m &lt; m_nominal)<span style="color: blue"> then</span><span style="color: #006400"> // T is above dew point</span>
       T_dp :=T;<span style="color: #006400"> // Accept T as new approximation to solution</span>
    <span style="color: blue">else</span><span style="color: #006400"> // T is below dew point.</span>
       <span style="color: blue">if </span>(dT &lt; dTMin)<span style="color: blue"> then</span><span style="color: #006400"> // achieved required accuracy</span>
         T_dp :=T;
         converged :=true;
       <span style="color: blue">else</span><span style="color: #006400">  // need to shorten step. Reject last iterate T</span>
         dT:=dT/10;
         T :=T_dp;<span style="color: #006400"> // Resets T to last known value above dew point</span>
       <span style="color: blue">end if</span>;
    <span style="color: blue">end if</span>;
  <span style="color: blue">end while</span>;
<span style="color: blue">end </span>appartusDewPoint;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE dynamicViscosityWater<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.dynamicViscosityWater"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.dynamicViscosityWater</h2>
<p>
<b>Returns the dynamic viscosity for water</b>
</p>
<h3>Information</h3>

<p>
This function is used to identify the dynamic viscosity of water at a given temperature. 
The function used is a fourth order polynomial fit to data from Incropera and Dewitt (1996).
</p>
<h4>References</h4>
<p>
Fundamentals of Heat and Mass Transfer (Fourth Edition), Frank Incropera and David P. Dewitt, 
John Wiley &amp; Sons, 1996
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T</td><td>&nbsp;</td><td>Thermodynamic state record [K]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</a></td><td>mu</td><td>Dynamic viscosity [Pa.s]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> dynamicViscosityWater <span style="color: #006400">
  &quot;Returns the dynamic viscosity for water&quot;</span>
    <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T <span style="color: #006400">&quot;Thermodynamic state record&quot;</span>;
    <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>Modelica.SIunits.DynamicViscosity</a> mu <span style="color: #006400">&quot;Dynamic viscosity&quot;</span>;
<span style="color: blue">algorithm </span>
        mu := ((2.86651*10^(-5))*T^4-0.039376307*T^3+20.32805026*T^2-
        4680.303158*T+406389.0375)*10^(-6);
  <span style="color: #006400">      //Equation is a fourth order polynomial fit to data from Fundamentals of</span>
  <span style="color: #006400">      //Heat and Mass Transfer (Fourth Edition), Frank Incropera &amp; David DeWitt,</span>
  <span style="color: #006400">      //John Wiley &amp; Sons, 1996</span>

<span style="color: blue">end </span>dynamicViscosityWater;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE epsilon_C<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_C"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.epsilon_C</h2>
<p>
<b>Computes heat exchanger effectiveness for given capacity flow rates and heat exchanger flow regime</b>
</p>
<h3>Information</h3>

<p>
This function computes the heat exchanger effectiveness,
the Number of Transfer Units, and the capacity flow ratio
for given capacity flow rates.
</p>
<p>
The implementation allows for zero flow rate.
As <code>CMin_flow</code> crosses <code>delta*CMin_flow_nominal</code> from above,
the Number of Transfer Units and the heat exchanger effectiveness go to zero.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>UA</td><td>&nbsp;</td><td>UA value [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>C1_flow</td><td>&nbsp;</td><td>Enthalpy flow rate medium 1 [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>C2_flow</td><td>&nbsp;</td><td>Enthalpy flow rate medium 2 [W/K]</td></tr>
<tr><td><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>HeatExchangerFlowRegime</a></td><td>flowRegime</td><td>&nbsp;</td><td>Heat exchanger flow regime</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>CMin_flow_nominal</td><td>&nbsp;</td><td>Minimum enthalpy flow rate at nominal condition [W/K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>ThermalConductance</a></td><td>CMax_flow_nominal</td><td>&nbsp;</td><td>Maximum enthalpy flow rate at nominal condition [W/K]</td></tr>
<tr><td>Real</td><td>delta</td><td>1E-3</td><td>Small value used for smoothing</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>eps</td><td>Heat exchanger effectiveness</td></tr>
<tr><td>Real</td><td>NTU</td><td>Number of transfer units</td></tr>
<tr><td>Real</td><td>Z</td><td>Ratio of capacity flow rate (CMin/CMax)</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> epsilon_C <span style="color: #006400">
  &quot;Computes heat exchanger effectiveness for given capacity flow rates and heat exchanger flow regime&quot;</span>
  <span style="color: blue">import </span>f = <a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> UA <span style="color: #006400">&quot;UA value&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> C1_flow <span style="color: #006400">
    &quot;Enthalpy flow rate medium 1&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> C2_flow <span style="color: #006400">
    &quot;Enthalpy flow rate medium 2&quot;</span>;
  <span style="color: blue">input </span><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a> flowRegime <span style="color: #006400">
    &quot;Heat exchanger flow regime&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMin_flow_nominal <span style="color: #006400">
    &quot;Minimum enthalpy flow rate at nominal condition&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMax_flow_nominal <span style="color: #006400">
    &quot;Maximum enthalpy flow rate at nominal condition&quot;</span>;
  <span style="color: blue">input </span>Real delta = 1E-3 <span style="color: #006400">&quot;Small value used for smoothing&quot;</span>;
  <span style="color: blue">output </span>Real eps(min=0, max=1) <span style="color: #006400">&quot;Heat exchanger effectiveness&quot;</span>;
  <span style="color: blue">output </span>Real NTU <span style="color: #006400">&quot;Number of transfer units&quot;</span>;
  <span style="color: blue">output </span>Real Z(min=0, max=1) <span style="color: #006400">&quot;Ratio of capacity flow rate (CMin/CMax)&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> deltaCMin <span style="color: #006400">
    &quot;Small number for capacity flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> deltaCMax <span style="color: #006400">
    &quot;Small number for capacity flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMin_flow <span style="color: #006400">&quot;Minimum capacity flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMax_flow <span style="color: #006400">&quot;Maximum capacity flow rate&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMinNZ_flow <span style="color: #006400">
    &quot;Minimum capacity flow rate, bounded away from zero&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.ThermalConductance"
>Modelica.SIunits.ThermalConductance</a> CMaxNZ_flow <span style="color: #006400">
    &quot;Maximum capacity flow rate, bounded away from zero&quot;</span>;
  Real gai(min=0, max=1) <span style="color: #006400">
    &quot;Gain used to force UA to zero for very small flow rates&quot;</span>;
<span style="color: blue">algorithm </span>
  deltaCMin := delta*CMin_flow_nominal;
  deltaCMax := delta*CMax_flow_nominal;
  <span style="color: #006400">// effectiveness</span>
  CMin_flow :=<span style="color: red">Buildings.Utilities.Math.Functions.smoothMin</span>(
    C1_flow,
    C2_flow,
    deltaCMin/4);
  CMax_flow :=<span style="color: red">Buildings.Utilities.Math.Functions.smoothMax</span>(
    C1_flow,
    C2_flow,
    deltaCMax/4);
  <span style="color: #006400">// CMin and CMax, constrained to be non-zero to compute eps-NTU-Z relationship</span>
  CMinNZ_flow :=<span style="color: red">Buildings.Utilities.Math.Functions.smoothMax</span>(
    CMin_flow,
    deltaCMin,
    deltaCMin/4);
  CMaxNZ_flow :=<span style="color: red">Buildings.Utilities.Math.Functions.smoothMax</span>(
    CMax_flow,
    deltaCMax,
    deltaCMax/4);
  Z :=CMin_flow/CMaxNZ_flow;
  <span style="color: #006400">// Gain that goes to zero as CMin_flow gets below deltaCMin</span>
  <span style="color: #006400">// This is needed to allow zero flow</span>
  gai :=<span style="color: red"> Buildings.Utilities.Math.Functions.spliceFunction</span>(
                 pos=1, neg=0, x=CMin_flow-deltaCMin, deltax=deltaCMin/2);
  <span style="color: blue">if </span>( gai == 0)<span style="color: blue"> then</span>
    NTU := 0;
    eps := 1;<span style="color: #006400"> // around zero flow, eps=Q/(CMin*dT) should be one</span>
  <span style="color: blue">else</span>
    NTU :=gai*UA/CMinNZ_flow;
    eps := gai*<span style="color: red">Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_ntuZ</span>(NTU=NTU, Z=Z, flowRegime=flowRegime);
  <span style="color: blue">end if</span>;

<span style="color: blue">end </span>epsilon_C;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE epsilon_ntuZ<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.epsilon_ntuZ"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.epsilon_ntuZ</h2>
<p>
<b>Computes heat exchanger effectiveness for given number of transfer units and heat exchanger flow regime</b>
</p>
<h3>Information</h3>

This function computes the heat exchanger effectiveness for a given number of transfer units, capacity flow ratio and heat exchanger flow regime.

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>NTU</td><td>&nbsp;</td><td>Number of transfer units</td></tr>
<tr><td>Real</td><td>Z</td><td>&nbsp;</td><td>Ratio of capacity flow rate (CMin/CMax)</td></tr>
<tr><td><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>HeatExchangerFlowRegime</a></td><td>flowRegime</td><td>&nbsp;</td><td>Heat exchanger flow regime</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>eps</td><td>Heat exchanger effectiveness</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> epsilon_ntuZ <span style="color: #006400">
  &quot;Computes heat exchanger effectiveness for given number of transfer units and heat exchanger flow regime&quot;</span>
  <span style="color: blue">import </span>f = <a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a>;
  <span style="color: blue">input </span>Real NTU <span style="color: #006400">&quot;Number of transfer units&quot;</span>;
  <span style="color: blue">input </span>Real Z(min=0, max=1) <span style="color: #006400">&quot;Ratio of capacity flow rate (CMin/CMax)&quot;</span>;
  <span style="color: blue">input </span><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a> flowRegime <span style="color: #006400">
    &quot;Heat exchanger flow regime&quot;</span>;
  <span style="color: blue">output </span>Real eps(min=0, max=1) <span style="color: #006400">&quot;Heat exchanger effectiveness&quot;</span>;
<span style="color: blue">protected </span>
  Real a <span style="color: #006400">&quot;Auxiliary variable&quot;</span>;
<span style="color: blue">algorithm </span>
  <span style="color: blue">if </span>(flowRegime == f.ParallelFlow)<span style="color: blue"> then</span><span style="color: #006400"> // parallel flow</span>
    a := 0;
    eps := (1 -<span style="color: red"> Modelica.Math.exp</span>(-NTU*(1 + Z)))/(1 + Z);
  <span style="color: blue">elseif </span>(flowRegime == f.CounterFlow)<span style="color: blue"> then</span><span style="color: #006400">// counter flow</span>
   <span style="color: #006400">// a is constraining Z since eps is not defined for Z=1.</span>
    a :=<span style="color: red"> smooth</span>(1, <span style="color: blue">if </span>Z &lt; 0.97<span style="color: blue"> then </span>Z<span style="color: blue"> else </span>
      <span style="color: red">Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=Z,
      x2=0.98,
      deltaX=0.01));
    eps := (1 -<span style="color: red"> Modelica.Math.exp</span>(-NTU*(1 - a)))/(1 - a*<span style="color: red">Modelica.Math.exp</span>(-NTU*(
      1 - a)));
  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowUnmixed)<span style="color: blue"> then</span>
   a := NTU^(-0.22);
    eps := 1 -<span style="color: red"> Modelica.Math.exp</span>( (<span style="color: red"> Modelica.Math.exp</span>( - NTU * Z * a)  - 1)  / (Z * a));
  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowCMinUnmixedCMaxMixed)<span style="color: blue"> then</span>
    <span style="color: #006400">// cross flow, (single pass), CMax mixed, CMin unmixed. (Coil with one row.)</span>
    a := 0;
    eps := (1 -<span style="color: red"> Modelica.Math.exp</span>(-Z*(1 -<span style="color: red"> Modelica.Math.exp</span>(-NTU))))/Z;
  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowCMinMixedCMaxUnmixed)<span style="color: blue"> then</span>
    <span style="color: #006400">// cross flow, (single pass), CMin mixed, CMax unmixed.</span>
    a := 0;
    eps := 1 -<span style="color: red"> Modelica.Math.exp</span>(-(1 -<span style="color: red"> Modelica.Math.exp</span>(-Z*NTU))/Z);
  <span style="color: blue">else</span>
    a := 0;
    eps := 0;
    <span style="color: red">assert</span>(f.ParallelFlow &lt;= flowRegime<span style="color: blue"> and </span>
           flowRegime &lt;= f.CrossFlowCMinUnmixedCMaxMixed,
           &quot;Flow regime is not implemented.&quot;);
  <span style="color: blue">end if</span>;
<span style="color: blue">end </span>epsilon_ntuZ;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE isobaricExpansionCoefficientWater<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.isobaricExpansionCoefficientWater"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.isobaricExpansionCoefficientWater</h2>
<p>
<b>Returns the isobaric expansion coefficient for water</b>
</p>
<h3>Information</h3>

<p>
This function is used to identify the isobaric expansion coefficient of water at a 
given temperature. The function used is a fourth order polynomial fit to data from 
Incropera and Dewitt (1996).
</p>
<h4>References</h4>
<p>
Fundamentals of Heat and Mass Transfer (Fourth Edition), Frank Incropera and David P. 
Dewitt, John Wiley &amp; Sons, 1996
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T</td><td>&nbsp;</td><td>Thermodynamic state record [K]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>beta</td><td>Dynamic viscosity [1/K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> isobaricExpansionCoefficientWater <span style="color: #006400">
  &quot;Returns the isobaric expansion coefficient for water&quot;</span>
    <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T <span style="color: #006400">&quot;Thermodynamic state record&quot;</span>;
    <span style="color: blue">output </span>Real beta( unit=&quot;1/K&quot;) <span style="color: #006400">&quot;Dynamic viscosity&quot;</span>;
<span style="color: blue">algorithm </span>
        beta := (-8.53296*10^(-6)*T^4+0.011562287*T^3-5.88800657*T^2+
        1341.798661*T-115406.5225)*10^(-6);
  <span style="color: #006400">      //Equation is a fourth order polynomial fit to data from Fundamentals of</span>
  <span style="color: #006400">      //Heat and Mass Transfer (Fourth Edition), Frank Incropera &amp; David DeWitt,</span>
  <span style="color: #006400">      //John Wiley &amp; Sons, 1996</span>

<span style="color: blue">end </span>isobaricExpansionCoefficientWater;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE lmtd<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.lmtd"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.lmtd</h2>
<p>
<b>Log-mean temperature difference</b>
</p>
<h3>Information</h3>

<p>
This function computes the log mean temperature difference of a heat exchanger.
</p>
<p>
Note that the implementation requires the temperature differences to be non-zero.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a1</td><td>&nbsp;</td><td>Temperature at port a1 [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b1</td><td>&nbsp;</td><td>Temperature at port b1 [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_a2</td><td>&nbsp;</td><td>Temperature at port a2 [K]</td></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T_b2</td><td>&nbsp;</td><td>Temperature at port b2 [K]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>TemperatureDifference</a></td><td>lmtd</td><td>Log-mean temperature difference [K]</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> lmtd <span style="color: #006400">&quot;Log-mean temperature difference&quot;</span>
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_a1 <span style="color: #006400">&quot;Temperature at port a1&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_b1 <span style="color: #006400">&quot;Temperature at port b1&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_a2 <span style="color: #006400">&quot;Temperature at port a2&quot;</span>;
  <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T_b2 <span style="color: #006400">&quot;Temperature at port b2&quot;</span>;
  <span style="color: blue">output </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>Modelica.SIunits.TemperatureDifference</a> lmtd <span style="color: #006400">
    &quot;Log-mean temperature difference&quot;</span>;
<span style="color: blue">protected </span>
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>Modelica.SIunits.TemperatureDifference</a> dT1 <span style="color: #006400">&quot;Temperature difference side 1&quot;</span>;
  <a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.TemperatureDifference"
>Modelica.SIunits.TemperatureDifference</a> dT2 <span style="color: #006400">&quot;Temperature difference side 2&quot;</span>;
<span style="color: blue">algorithm </span>
  dT1 :=T_a1 - T_b2;
  dT2 :=T_b1 - T_a2;
  lmtd :=(dT2 - dT1)/<span style="color: red">Modelica.Math.log</span>(dT2/dT1);
<span style="color: blue">end </span>lmtd;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ntu_epsilonZ<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.ntu_epsilonZ"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.ntu_epsilonZ</h2>
<p>
<b>Computes number of transfer units for given heat exchanger effectiveness and heat exchanger flow regime</b>
</p>
<h3>Information</h3>

<p>
This function computes the number of transfer units for a given heat exchanger effectiveness,
capacity flow ratio and heat exchanger flow regime.
</p>
<p>
Note that for the flow regime <code>CrossFlowUnmixed</code>, computing the
function requires the numerical solution of an equation in one variable.
This is handled internally and not exposed to the global solver.
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td>Real</td><td>eps</td><td>&nbsp;</td><td>Heat exchanger effectiveness</td></tr>
<tr><td>Real</td><td>Z</td><td>&nbsp;</td><td>Ratio of capacity flow rate (CMin/CMax)</td></tr>
<tr><td><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>HeatExchangerFlowRegime</a></td><td>flowRegime</td><td>&nbsp;</td><td>Heat exchanger flow regime</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>NTU</td><td>Number of transfer units</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> ntu_epsilonZ <span style="color: #006400">
  &quot;Computes number of transfer units for given heat exchanger effectiveness and heat exchanger flow regime&quot;</span>
  <span style="color: blue">import </span>f = <a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a>;
  <span style="color: blue">input </span>Real eps(min=0, max=0.999) <span style="color: #006400">&quot;Heat exchanger effectiveness&quot;</span>;
  <span style="color: blue">input </span>Real Z(min=0, max=1) <span style="color: #006400">&quot;Ratio of capacity flow rate (CMin/CMax)&quot;</span>;
  <span style="color: blue">input </span><a href="Buildings_Fluid_Types.html#Buildings.Fluid.Types.HeatExchangerFlowRegime"
>Buildings.Fluid.Types.HeatExchangerFlowRegime</a> flowRegime <span style="color: #006400">
    &quot;Heat exchanger flow regime&quot;</span>;
  <span style="color: blue">output </span>Real NTU <span style="color: #006400">&quot;Number of transfer units&quot;</span>;

<span style="color: blue">protected </span>
  Real a <span style="color: #006400">&quot;Auxiliary variable&quot;</span>;
  <span style="color: blue">constant </span><a href="../../msl/Modelica%203.2.1/help/Modelica_Media_Common_OneNonLinearEquation.html#Modelica.Media.Common.OneNonLinearEquation.f_nonlinear_Data"
>Modelica.Media.Common.OneNonLinearEquation.f_nonlinear_Data</a> dummy <span style="color: #006400">
    &quot;Dummy data for nonlinear function call&quot;</span>;
<span style="color: blue">algorithm </span>
  <span style="color: blue">if </span>(flowRegime == f.ParallelFlow)<span style="color: blue"> then</span><span style="color: #006400"> // parallel flow</span>
    a := Z+1;
    <span style="color: red">assert</span>(eps &lt; 1/a,
      &quot;Invalid input data. eps &gt; 1/(1+Z) is physically not possible for parallel flow.
  Received eps = &quot; +<span style="color: red"> String</span>(eps) + &quot;
             Z = &quot; +<span style="color: red"> String</span>(Z) + &quot;
       1/(Z+1) = &quot; +<span style="color: red"> String</span>(1/a));
    NTU := -(<span style="color: red">Modelica.Math.log</span>(1-eps*a))/(a);
  <span style="color: blue">elseif </span>(flowRegime == f.CounterFlow)<span style="color: blue"> then</span><span style="color: #006400">// counter flow</span>
   <span style="color: #006400">// a is constraining Z since eps is not defined for Z=1.</span>
    a :=<span style="color: red"> smooth</span>(1, <span style="color: blue">if </span>Z &lt; 0.97<span style="color: blue"> then </span>Z<span style="color: blue"> else </span>
      <span style="color: red">Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=Z,
      x2=0.98,
      deltaX=0.01));
    NTU :=<span style="color: red"> Modelica.Math.log</span>((1-eps)/(1-eps*a)) / (a-1);

  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowUnmixed)<span style="color: blue"> then</span>
    a := 0;
    <span style="color: #006400">// The function Internal.solve evaluates epsilon_ntuZ at NTU=x_min-1e-10 and NTU=x_max+1e-10</span>
    <span style="color: #006400">// when it solves iteratively epsilon_ntuZ for ntu</span>
    <span style="color: #006400">// Therefore, we set x_min=1.5*1e-10 to prevent computing NTU^(-0.22)=(-1e-10)^(-0.22).</span>
    NTU :=<span style="color: red"> Internal.solve</span>(y_zero=eps, x_min=1.5*1e-10, x_max=1E6, pressure=Z,
      f_nonlinear_data=dummy);
  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowCMinUnmixedCMaxMixed)<span style="color: blue"> then</span>
    <span style="color: #006400">// cross flow, (single pass), CMax mixed, CMin unmixed. (Coil with one row.)</span>
   a :=<span style="color: red"> smooth</span>(1, <span style="color: blue">if </span>Z &gt; 0.03<span style="color: blue"> then </span>Z<span style="color: blue"> else </span>
      <span style="color: red">Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=0.02,
      x2=Z,
      deltaX=0.01));
    NTU := -<span style="color: red">Modelica.Math.log</span>(1+(<span style="color: red">Modelica.Math.log</span>(1-eps*a)/a));
  <span style="color: blue">elseif </span>(flowRegime == f.CrossFlowCMinMixedCMaxUnmixed)<span style="color: blue"> then</span>
    <span style="color: #006400">// cross flow, (single pass), CMin mixed, CMax unmixed.</span>
   a :=<span style="color: red"> smooth</span>(1, <span style="color: blue">if </span>Z &gt; 0.03<span style="color: blue"> then </span>Z<span style="color: blue"> else </span>
      <span style="color: red">Buildings.Utilities.Math.Functions.smoothMin</span>(
      x1=0.02,
      x2=Z,
      deltaX=0.01));
    NTU := -<span style="color: red">Modelica.Math.log</span>(1+Z*<span style="color: red">Modelica.Math.log</span>(1-eps))/Z;
  <span style="color: blue">else</span>
    a := 0;
    NTU := 0;
    <span style="color: red">assert</span>(0 &lt; flowRegime<span style="color: blue"> and </span>flowRegime &lt; 6, &quot;Flow regime is not implemented.&quot;);
  <span style="color: blue">end if</span>;

<span style="color: blue">end </span>ntu_epsilonZ;
</div>
<hr>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE prandtlNumberWater<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Buildings.Fluid.HeatExchangers.BaseClasses.prandtlNumberWater"></a><a href="Buildings_Fluid_HeatExchangers_BaseClasses.html#Buildings.Fluid.HeatExchangers.BaseClasses"
>Buildings.Fluid.HeatExchangers.BaseClasses</a>.prandtlNumberWater</h2>
<p>
<b>Returns the Prandtl number for water</b>
</p>
<h3>Information</h3>

<p>
This function is used to identify the Prandtl number of water at a given temperature. 
The function used is a fourth order polynomial fit to data from Incropera and Dewitt 
(1996).
</p>
<h4>References</h4>
<p>
Fundamentals of Heat and Mass Transfer (Fourth Edition), Frank Incropera and David P. 
Dewitt, John Wiley &amp; Sons, 1996
</p>

<h3>Inputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Inputs">
<tr><th>Type</th><th>Name</th><th>Default</th><th>Description</th></tr>
<tr><td><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</a></td><td>T</td><td>&nbsp;</td><td>Thermodynamic state record [K]</td></tr>
</table>
<h3>Outputs</h3>
<table border="1" cellspacing="0" cellpadding="2" summary="Outputs">
<tr><th>Type</th><th>Name</th><th>Description</th></tr>
<tr><td>Real</td><td>Pr</td><td>Prandtl number</td></tr>
</table>
<h3>Modelica definition</h3>
<div class="modelica"><span style="color: blue">function</span> prandtlNumberWater <span style="color: #006400">&quot;Returns the Prandtl number for water&quot;</span>
    <span style="color: blue">input </span><a href="../../msl/Modelica%203.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</a> T <span style="color: #006400">&quot;Thermodynamic state record&quot;</span>;
    <span style="color: blue">output </span>Real Pr <span style="color: #006400">&quot;Prandtl number&quot;</span>;
<span style="color: blue">algorithm </span>
        Pr := ((2.55713*10^(-7))*T^4-0.000350293*T^3+0.180259651*T^2-
        41.34104323*T+3571.372195);
  <span style="color: #006400">      //Equation is a fourth order polynomial fit to data from Fundamentals</span>
  <span style="color: #006400">      //of Heat and Mass Transfer (Fourth Edition), Frank Incropera &amp; David DeWitt,</span>
  <span style="color: #006400">      //John Wiley &amp; Sons, 1996</span>

<span style="color: blue">end </span>prandtlNumberWater;
</div>
<hr>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Thu Jun 19 10:56:32 2014.
</address>
</body>
</html>
