<HTML>
<HEAD>
<TITLE>Buildings.Fluid.Interfaces</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Package with interfaces for fluid models&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->
</P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Interfaces<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.Interfaces"></A><A HREF="Buildings_Fluid.html#Buildings.Fluid"
>Buildings.Fluid</A>.Interfaces</H2>
<B>Package with interfaces for fluid models</B>
<P></P>
<P></P><H3>Information</H3>

<p>
This package contains basic classes that are used to build
component models that change the state of the
fluid. The classes are not directly usable, but can
be extended when building a new model.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_InterfacesPackage.html#Modelica.Icons.InterfacesPackage"
>Modelica.Icons.InterfacesPackage</A> (Icon for packages containing interfaces).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfaces.UsersGuideS.png" ALT="Buildings.Fluid.Interfaces.UsersGuide" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces_UsersGuide.html#Buildings.Fluid.Interfaces.UsersGuide"
>UsersGuide</A>
</TD><TD>User&#39;s Guide</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfaces.FourPortS.png" ALT="Buildings.Fluid.Interfaces.FourPort" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPort"
>FourPort</A>
</TD><TD>Partial model with four ports</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfaceaa717523098d688cangerS.png" ALT="Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>TwoPortHeatMassExchanger</A>
</TD><TD>Partial model transporting one fluid stream with storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interface997284f3a7348477angerS.png" ALT="Buildings.Fluid.Interfaces.FourPortHeatMassExchanger" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"
>FourPortHeatMassExchanger</A>
</TD><TD>Model transporting two fluid streams between four ports with storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacee19327459e14118bangerS.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"
>StaticTwoPortHeatMassExchanger</A>
</TD><TD>Partial model transporting fluid between two ports without storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacecfb0ac59541ba4f9angerS.png" ALT="Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger"
>StaticFourPortHeatMassExchanger</A>
</TD><TD>Partial model transporting two fluid streams between four ports without storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacece5744ecb2dac5c0rfaceS.png" ALT="Buildings.Fluid.Interfaces.PartialTwoPortInterface" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>PartialTwoPortInterface</A>
</TD><TD>Partial model transporting fluid between two ports without storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interface0bf626e24a9671a0rfaceS.png" ALT="Buildings.Fluid.Interfaces.PartialFourPortInterface" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>PartialFourPortInterface</A>
</TD><TD>Partial model transporting fluid between two ports without storing mass or energy</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interface1d8308de49633a59ationS.png" ALT="Buildings.Fluid.Interfaces.ConservationEquation" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.ConservationEquation"
>ConservationEquation</A>
</TD><TD>Lumped volume with mass and energy balance</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacea868bbaf7da4f56dationS.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation"
>StaticTwoPortConservationEquation</A>
</TD><TD>Partial model for static energy and mass conservation equations</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacebe67f7212143d554etersS.png" ALT="Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>TwoPortFlowResistanceParameters</A>
</TD><TD>Parameters for flow resistance for models with two ports</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacebe67f7212143d554etersS.png" ALT="Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>FourPortFlowResistanceParameters</A>
</TD><TD>Parameters for flow resistance for models with four ports</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfacebe67f7212143d554etersS.png" ALT="Buildings.Fluid.Interfaces.LumpedVolumeDeclarations" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>LumpedVolumeDeclarations</A>
</TD><TD>Declarations for lumped volumes</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.Interfaces.ExamplesS.png" ALT="Buildings.Fluid.Interfaces.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_Interfaces_Examples.html#Buildings.Fluid.Interfaces.Examples"
>Examples</A>
</TD><TD>Collection of models that illustrate model use and test models</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FourPort<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfaces.FourPortI.png" ALT="Buildings.Fluid.Interfaces.FourPort" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.FourPort"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.FourPort</H2>
<B>Partial model with four ports</B><p></P>
<IMG SRC="Buildings.Fluid.Interfaces.FourPortD.png" ALT="Buildings.Fluid.Interfaces.FourPort">
<P></P><H3>Information</H3>

<p>
This model defines an interface for components with four ports. 
The parameters <code>allowFlowReversal1</code> and
<code>allowFlowReversal2</code> may be used by models that extend
this model to treat flow reversal.
</p>
<p>
This model is identical to 
<A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort"
>
Modelica.Fluid.Interfaces.PartialTwoPort</a>, except that it has four ports.
</p>
<P></P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> FourPort <font color="darkgreen">&quot;Partial model with four ports&quot;</font>
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;
  <font color="blue">outer </font><A HREF="../../msl/3.2/help/Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</A> system <font color="darkgreen">&quot;System wide properties&quot;</font>;

  <font color="blue">replaceable </font><font color="blue">package</font> Medium1 =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</A> <font color="darkgreen">&quot;Medium 1 in the component&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium2 =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</A> <font color="darkgreen">&quot;Medium 2 in the component&quot;</font>;

  <font color="blue">parameter </font>Boolean allowFlowReversal1 = system.allowFlowReversal <font color="darkgreen">
    &quot;= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)&quot;</font>;
  <font color="blue">parameter </font>Boolean allowFlowReversal2 = system.allowFlowReversal <font color="darkgreen">
    &quot;= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_outflow_a1_start = Medium1.h_default <font color="darkgreen">
    &quot;Start value for enthalpy flowing out of port a1&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_outflow_b1_start = Medium1.h_default <font color="darkgreen">
    &quot;Start value for enthalpy flowing out of port b1&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_outflow_a2_start = Medium2.h_default <font color="darkgreen">
    &quot;Start value for enthalpy flowing out of port a2&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_outflow_b2_start = Medium2.h_default <font color="darkgreen">
    &quot;Start value for enthalpy flowing out of port b2&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</A> port_a1(
                     <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
                     m_flow(min=<font color="blue">if </font>allowFlowReversal1<font color="blue"> then </font>-Constants.inf<font color="blue"> else </font>0),
                     h_outflow(nominal=1E5, start=h_outflow_a1_start),
                     Xi_outflow(<font color="blue">each </font>nominal=0.01)) <font color="darkgreen">
    &quot;Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</A> port_b1(
                     <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
                     m_flow(max=<font color="blue">if </font>allowFlowReversal1<font color="blue"> then </font>+Constants.inf<font color="blue"> else </font>0),
                     h_outflow(nominal=1E5, start=h_outflow_b1_start),
                     Xi_outflow(<font color="blue">each </font>nominal=0.01)) <font color="darkgreen">
    &quot;Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>Modelica.Fluid.Interfaces.FluidPort_a</A> port_a2(
                     <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
                     m_flow(min=<font color="blue">if </font>allowFlowReversal2<font color="blue"> then </font>-Constants.inf<font color="blue"> else </font>0),
                     h_outflow(nominal=1E5,start=h_outflow_a2_start),
                     Xi_outflow(<font color="blue">each </font>nominal=0.01)) <font color="darkgreen">
    &quot;Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>Modelica.Fluid.Interfaces.FluidPort_b</A> port_b2(
                     <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
                     m_flow(max=<font color="blue">if </font>allowFlowReversal2<font color="blue"> then </font>+Constants.inf<font color="blue"> else </font>0),
                     h_outflow(nominal=1E5, start=h_outflow_b2_start),
                     Xi_outflow(<font color="blue">each </font>nominal=0.01)) <font color="darkgreen">
    &quot;Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>FourPort;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TwoPortHeatMassExchanger<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfaceaa717523098d688cangerI.png" ALT="Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.TwoPortHeatMassExchanger</H2>
<B>Partial model transporting one fluid stream with storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interfaceaa717523098d688cangerD.png" ALT="Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger">
<P></P><H3>Information</H3>

<p>
This component transports one fluid stream. 
It provides the basic model for implementing dynamic and steady-state
models that exchange heat and water vapor with the fluid stream.
The model also computes the pressure drop due to the flow resistance.
By setting the parameter <code>dp_nominal=0</code>, the computation
of the pressure drop can be avoided.
The variable <code>vol.heatPort.T</code> always has the value of
the temperature of the medium that leaves the component.
For the actual temperatures at the port, the variables <code>sta_a.T</code>
and <code>sta_b.T</code> can be used. These two variables are provided by 
the base class
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>
Buildings.Fluid.Interfaces.PartialTwoPortInterface</a>.
</p>

For models that extend this model, see for example
<ul>
<li>
the ideal heater or cooler
<A HREF="Buildings_Fluid_HeatExchangers.html#Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed"
>
Buildings.Fluid.HeatExchangers.HeaterCoolerPrescribed</a>,
</li>
<li>
the ideal humidifier
<A HREF="Buildings_Fluid_MassExchangers.html#Buildings.Fluid.MassExchangers.HumidifierPrescribed"
>
Buildings.Fluid.MassExchangers.HumidifierPrescribed</a>, and
</li>
<li>
the boiler
<A HREF="Buildings_Fluid_Boilers.html#Buildings.Fluid.Boilers.BoilerPolynomial"
>
Buildings.Fluid.Boilers.BoilerPolynomial</a>.
</li>
</ul>

<h4>Implementation</h4>
<p>
The variable names follow the conventions used in 
<A HREF="../../msl/3.2/help/Modelica_Fluid_Examples_HeatExchanger_BaseClasses.html#Modelica.Fluid.Examples.HeatExchanger.BaseClasses.BasicHX"
>
Modelica.Fluid.Examples.HeatExchanger.BaseClasses.BasicHX
</a>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</A> (Parameters for flow resistance for models with two ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>MixingVolume</A></TD><TD>vol</TD><TD>redeclare Buildings.Fluid.Mi...</TD><TD>Volume for fluid stream</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp.start</TD><TD>0</TD><TD>Pressure difference between port_a and port_b [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau</TD><TD>30</TD><TD>Time constant at nominal flow (if energyDynamics &lt;&gt; SteadyState) [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_start</TD><TD>Medium.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>Medium.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TwoPortHeatMassExchanger <font color="darkgreen">
  &quot;Partial model transporting one fluid stream with storing mass or energy&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A>(
    port_a(h_outflow(start=h_outflow_start)),
    port_b(h_outflow(start=h_outflow_start)));
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</A>(
    <font color="blue">final </font>computeFlowResistance=true);
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau = 30 <font color="darkgreen">
    &quot;Time constant at nominal flow (if energyDynamics &lt;&gt; SteadyState)&quot;</font>;

  <font color="darkgreen">// Advanced</font>
  <font color="blue">parameter </font>Boolean homotopyInitialization = true <font color="darkgreen">&quot;= true, use homotopy method&quot;</font>;

  <font color="darkgreen">// Dynamics</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Formulation of energy balance&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> massDynamics=energyDynamics <font color="darkgreen">
    &quot;Formulation of mass balance&quot;</font>;

  <font color="darkgreen">// Initialization</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> p_start = Medium.p_default <font color="darkgreen">
    &quot;Start value of pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium.Temperature</A> T_start = Medium.T_default <font color="darkgreen">
    &quot;Start value of temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>Medium.MassFraction</A> X_start[Medium.nX] = Medium.X_default <font color="darkgreen">
    &quot;Start value of mass fractions m_i/m&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium.ExtraProperty</A> C_start[Medium.nC](
       quantity=Medium.extraPropertiesNames)=<font color="red">fill</font>(0, Medium.nC) <font color="darkgreen">
    &quot;Start value of trace substances&quot;</font>;

<textblock type="annotcomp" expanded="false">  <font color="blue">replaceable </font><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</A> vol
  <font color="blue">constrainedby </font>Buildings.Fluid.MixingVolumes.BaseClasses.PartialMixingVolume(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    nPorts = 2,
    V=m_flow_nominal*tau/rho_default,
    <font color="blue">final </font>m_flow_nominal = m_flow_nominal,
    <font color="blue">final </font>energyDynamics=energyDynamics,
    <font color="blue">final </font>massDynamics=massDynamics,
    <font color="blue">final </font>p_start=p_start,
    <font color="blue">final </font>T_start=T_start,
    <font color="blue">final </font>X_start=X_start,
    <font color="blue">final </font>C_start=C_start) <font color="darkgreen">&quot;Volume for fluid stream&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</A> preDro(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>use_dh=false,
    <font color="blue">final </font>m_flow_nominal=m_flow_nominal,
    <font color="blue">final </font>deltaM=deltaM,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal,
    <font color="blue">final </font>show_T=false,
    <font color="blue">final </font>from_dp=from_dp,
    <font color="blue">final </font>linearized=linearizeFlowResistance,
    <font color="blue">final </font>homotopyInitialization=homotopyInitialization,
    <font color="blue">final </font>dp_nominal=dp_nominal) <font color="darkgreen">&quot;Pressure drop model&quot;</font>;</textblock>

<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> sta_default=<font color="red">Medium.setState_pTX</font>(
      T=Medium.T_default, p=Medium.p_default, X=Medium.X_default);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</A> rho_default=<font color="red">Medium.density</font>(sta_default) <font color="darkgreen">
    &quot;Density, used to compute fluid volume&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> sta_start=<font color="red">Medium.setState_pTX</font>(
      T=T_start, p=p_start, X=X_start);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_outflow_start =<font color="red"> Medium.specificEnthalpy</font>(sta_start) <font color="darkgreen">
    &quot;Start value for outflowing enthalpy&quot;</font>;

<font color="blue">initial </font><font color="blue">algorithm </font>
  <font color="red">assert</font>((energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState)<font color="blue"> or </font>
          tau &gt; Modelica.Constants.eps,
&quot;The parameter tau, or the volume of the model from which tau may be derived, is unreasonably small.
 Set energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState to model steady-state.
 Received tau = &quot; +<font color="red"> String</font>(tau) + &quot;\n&quot;);
  <font color="red">assert</font>((massDynamics == Modelica.Fluid.Types.Dynamics.SteadyState)<font color="blue"> or </font>
          tau &gt; Modelica.Constants.eps,
&quot;The parameter tau, or the volume of the model from which tau may be derived, is unreasonably small.          
 Set massDynamics == Modelica.Fluid.Types.Dynamics.SteadyState to model steady-state.
 Received tau = &quot; +<font color="red"> String</font>(tau) + &quot;\n&quot;);


<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(vol.ports[2], port_b);
  <font color="red">connect</font>(port_a, preDro.port_a);
  <font color="red">connect</font>(preDro.port_b, vol.ports[1]);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TwoPortHeatMassExchanger;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FourPortHeatMassExchanger<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interface997284f3a7348477angerI.png" ALT="Buildings.Fluid.Interfaces.FourPortHeatMassExchanger" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.FourPortHeatMassExchanger"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.FourPortHeatMassExchanger</H2>
<B>Model transporting two fluid streams between four ports with storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interface997284f3a7348477angerD.png" ALT="Buildings.Fluid.Interfaces.FourPortHeatMassExchanger">
<P></P><H3>Information</H3>

<p>
This component transports two fluid streams between four ports. 
It provides the basic model for implementing a dynamic heat exchanger.
</p>
<p>
The model can be used as-is, although there will be no heat or mass transfer
between the two fluid streams. 
To add heat transfer, heat flow can be added to the heat port of the two volumes.
See for example
<A HREF="Buildings_Fluid_Chillers.html#Buildings.Fluid.Chillers.Carnot"
>
Buildings.Fluid.Chillers.Carnot</a>.
To add moisture input into (or moisture output from) volume <code>vol2</code>,
the model can be replaced as shown in
<a href="modelica://Buildings.Fluid.HeatExchangers.BaseClasses.HexElement">
Buildings.Fluid.HeatExchangers.BaseClasses.HexElement</a>.
</p>
<h4>Implementation</h4>
<p>
The variable names follow the conventions used in 
<a href="modelica://Modelica.Fluid.HeatExchangers.BasicHX">
Modelica.Fluid.HeatExchangers.BasicHX</a>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A> (Parameters for flow resistance for models with four ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>MixingVolume</A></TD><TD>vol2</TD><TD>redeclare Buildings.Fluid.Mi...</TD><TD>Volume for fluid 2</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>h1_outflow_start</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>h1_outflow_start</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>h2_outflow_start</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>h2_outflow_start</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance1</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance2</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau1</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau2</TD><TD>30</TD><TD>Time constant at nominal flow [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p1_start</TD><TD>Medium1.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T1_start</TD><TD>Medium1.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X1_start[Medium1.nX]</TD><TD>Medium1.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_start[Medium1.nC]</TD><TD>fill(0, Medium1.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C1_nominal[Medium1.nC]</TD><TD>fill(1E-2, Medium1.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p2_start</TD><TD>Medium2.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T2_start</TD><TD>Medium2.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X2_start[Medium2.nX]</TD><TD>Medium2.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_start[Medium2.nC]</TD><TD>fill(0, Medium2.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C2_nominal[Medium2.nC]</TD><TD>fill(1E-2, Medium2.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> FourPortHeatMassExchanger <font color="darkgreen">
  &quot;Model transporting two fluid streams between four ports with storing mass or energy&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</A>(
    <font color="blue">final </font>h_outflow_a1_start = h1_outflow_start,
    <font color="blue">final </font>h_outflow_b1_start = h1_outflow_start,
    <font color="blue">final </font>h_outflow_a2_start = h2_outflow_start,
    <font color="blue">final </font>h_outflow_b2_start = h2_outflow_start);
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A>(
     <font color="blue">final </font>computeFlowResistance1=true, <font color="blue">final </font>computeFlowResistance2=true);
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau1 = 30 <font color="darkgreen">&quot;Time constant at nominal flow&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tau2 = 30 <font color="darkgreen">&quot;Time constant at nominal flow&quot;</font>;

  <font color="darkgreen">// Advanced</font>
  <font color="blue">parameter </font>Boolean homotopyInitialization = true <font color="darkgreen">&quot;= true, use homotopy method&quot;</font>;

  <font color="darkgreen">// Assumptions</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Formulation of energy balance&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> massDynamics=energyDynamics <font color="darkgreen">
    &quot;Formulation of mass balance&quot;</font>;

  <font color="darkgreen">// Initialization</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium1.AbsolutePressure</A> p1_start = Medium1.p_default <font color="darkgreen">
    &quot;Start value of pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium1.Temperature</A> T1_start = Medium1.T_default <font color="darkgreen">
    &quot;Start value of temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>Medium1.MassFraction</A> X1_start[Medium1.nX] = Medium1.X_default <font color="darkgreen">
    &quot;Start value of mass fractions m_i/m&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium1.ExtraProperty</A> C1_start[Medium1.nC](
       quantity=Medium1.extraPropertiesNames)=<font color="red">fill</font>(0, Medium1.nC) <font color="darkgreen">
    &quot;Start value of trace substances&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium1.ExtraProperty</A> C1_nominal[Medium1.nC](
       quantity=Medium1.extraPropertiesNames) =<font color="red"> fill</font>(1E-2, Medium1.nC) <font color="darkgreen">
    &quot;Nominal value of trace substances. (Set to typical order of magnitude.)&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium2.AbsolutePressure</A> p2_start = Medium2.p_default <font color="darkgreen">
    &quot;Start value of pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium2.Temperature</A> T2_start = Medium2.T_default <font color="darkgreen">
    &quot;Start value of temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>Medium2.MassFraction</A> X2_start[Medium2.nX] = Medium2.X_default <font color="darkgreen">
    &quot;Start value of mass fractions m_i/m&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium2.ExtraProperty</A> C2_start[Medium2.nC](
       quantity=Medium2.extraPropertiesNames)=<font color="red">fill</font>(0, Medium2.nC) <font color="darkgreen">
    &quot;Start value of trace substances&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium2.ExtraProperty</A> C2_nominal[Medium2.nC](
       quantity=Medium2.extraPropertiesNames) =<font color="red"> fill</font>(1E-2, Medium2.nC) <font color="darkgreen">
    &quot;Nominal value of trace substances. (Set to typical order of magnitude.)&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</A> vol1(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    nPorts = 2,
    V=m1_flow_nominal*tau1/rho1_nominal,
    <font color="blue">final </font>m_flow_nominal=m1_flow_nominal,
    energyDynamics=<font color="blue">if </font>tau1 &gt; Modelica.Constants.eps<font color="blue">
                         then </font>energyDynamics<font color="blue"> else </font>
                         Modelica.Fluid.Types.Dynamics.SteadyState,
    massDynamics=<font color="blue">if </font>tau1 &gt; Modelica.Constants.eps<font color="blue">
                         then </font>massDynamics<font color="blue"> else </font>
                         Modelica.Fluid.Types.Dynamics.SteadyState,
    <font color="blue">final </font>p_start=p1_start,
    <font color="blue">final </font>T_start=T1_start,
    <font color="blue">final </font>X_start=X1_start,
    <font color="blue">final </font>C_start=C1_start,
    <font color="blue">final </font>C_nominal=C1_nominal) <font color="darkgreen">&quot;Volume for fluid 1&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <font color="blue">replaceable </font><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>Buildings.Fluid.MixingVolumes.MixingVolume</A> vol2
    <font color="blue">constrainedby </font>Buildings.Fluid.MixingVolumes.BaseClasses.PartialMixingVolume(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium2,
    nPorts = 2,
    V=m2_flow_nominal*tau2/rho2_nominal,
    <font color="blue">final </font>m_flow_nominal = m2_flow_nominal,
    energyDynamics=<font color="blue">if </font>tau2 &gt; Modelica.Constants.eps<font color="blue">
                         then </font>energyDynamics<font color="blue"> else </font>
                         Modelica.Fluid.Types.Dynamics.SteadyState,
    massDynamics=<font color="blue">if </font>tau2 &gt; Modelica.Constants.eps<font color="blue">
                         then </font>massDynamics<font color="blue"> else </font>
                         Modelica.Fluid.Types.Dynamics.SteadyState,
    <font color="blue">final </font>p_start=p2_start,
    <font color="blue">final </font>T_start=T2_start,
    <font color="blue">final </font>X_start=X2_start,
    <font color="blue">final </font>C_start=C2_start,
    <font color="blue">final </font>C_nominal=C2_nominal) <font color="darkgreen">&quot;Volume for fluid 2&quot;</font>;</textblock>

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q1_flow = vol1.heatPort.Q_flow <font color="darkgreen">
    &quot;Heat flow rate into medium 1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q2_flow = vol2.heatPort.Q_flow <font color="darkgreen">
    &quot;Heat flow rate into medium 2&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</A> preDro1(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    <font color="blue">final </font>use_dh=false,
    <font color="blue">final </font>m_flow_nominal=m1_flow_nominal,
    <font color="blue">final </font>deltaM=deltaM1,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal1,
    <font color="blue">final </font>show_T=false,
    <font color="blue">final </font>from_dp=from_dp1,
    <font color="blue">final </font>linearized=linearizeFlowResistance1,
    <font color="blue">final </font>homotopyInitialization=homotopyInitialization,
    <font color="blue">final </font>dp_nominal=dp1_nominal,
    <font color="blue">final </font>dh=1,
    <font color="blue">final </font>ReC=4000) <font color="darkgreen">&quot;Pressure drop model for fluid 1&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</A> preDro2(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = <A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    <font color="blue">final </font>use_dh=false,
    <font color="blue">final </font>m_flow_nominal=m2_flow_nominal,
    <font color="blue">final </font>deltaM=deltaM2,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal2,
    <font color="blue">final </font>show_T=false,
    <font color="blue">final </font>from_dp=from_dp2,
    <font color="blue">final </font>linearized=linearizeFlowResistance2,
    <font color="blue">final </font>homotopyInitialization=homotopyInitialization,
    <font color="blue">final </font>dp_nominal=dp2_nominal,
    <font color="blue">final </font>dh=1,
    <font color="blue">final </font>ReC=4000) <font color="darkgreen">&quot;Pressure drop model for fluid 2&quot;</font>;</textblock>

<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> sta1_nominal=<font color="red">Medium1.setState_pTX</font>(
      T=Medium1.T_default, p=Medium1.p_default, X=Medium1.X_default);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</A> rho1_nominal=<font color="red">Medium1.density</font>(sta1_nominal) <font color="darkgreen">
    &quot;Density, used to compute fluid volume&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> sta2_nominal=<font color="red">Medium2.setState_pTX</font>(
      T=Medium2.T_default, p=Medium2.p_default, X=Medium2.X_default);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</A> rho2_nominal=<font color="red">Medium2.density</font>(sta2_nominal) <font color="darkgreen">
    &quot;Density, used to compute fluid volume&quot;</font>;

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> sta1_start=<font color="red">Medium1.setState_pTX</font>(
      T=T1_start, p=p1_start, X=X1_start);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h1_outflow_start =<font color="red"> Medium1.specificEnthalpy</font>(sta1_start) <font color="darkgreen">
    &quot;Start value for outflowing enthalpy&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> sta2_start=<font color="red">Medium2.setState_pTX</font>(
      T=T2_start, p=p2_start, X=X2_start);
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h2_outflow_start =<font color="red"> Medium2.specificEnthalpy</font>(sta2_start) <font color="darkgreen">
    &quot;Start value for outflowing enthalpy&quot;</font>;

<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(vol1.ports[2], port_b1);
  <font color="red">connect</font>(vol2.ports[2], port_b2);
  <font color="red">connect</font>(port_a1, preDro1.port_a);
  <font color="red">connect</font>(preDro1.port_b, vol1.ports[1]);
  <font color="red">connect</font>(port_a2, preDro2.port_a);
  <font color="red">connect</font>(preDro2.port_b, vol2.ports[1]);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>FourPortHeatMassExchanger;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StaticTwoPortHeatMassExchanger<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfacee19327459e14118bangerI.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.StaticTwoPortHeatMassExchanger</H2>
<B>Partial model transporting fluid between two ports without storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interfacee19327459e14118bangerD.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger">
<P></P><H3>Information</H3>

<p>
This component transports fluid between its two ports, without
storing mass or energy. It is based on 
<A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>
Modelica.Fluid.Interfaces.PartialTwoPortTransport</a> but it does
use a different implementation for handling reverse flow because
in this component, mass flow rate can be added or removed from
the medium.
</p>
<p>
If <code>dp_nominal &gt; Modelica.Constants.eps</code>, this component computes
pressure drop due to flow friction.
The pressure drop is defined by a quadratic function that goes through
the point <code>(m_flow_nominal, dp_nominal)</code>. At <code>|m_flow| &lt; deltaM * m_flow_nominal</code>,
the pressure drop vs. flow relation is linearized.
If the parameter <code>linearizeFlowResistance</code> is set to true,
then the whole pressure drop vs. flow resistance curve is linearized.
</p>
<h4>Implementation</h4>
This model uses inputs and constants that need to be set by models
that extend or instantiate this model.
The following inputs need to be assigned:
<ul>
<li>
<code>Q_flow</code>, which is the heat flow rate added to the medium.
</li>
<li>
<code>mWat_flow</code>, which is the moisture mass flow rate added to the medium.
</li>
</ul>

<p>
Set the constant <code>sensibleOnly=true</code> if the model that extends
or instantiates this model sets <code>mWat_flow = 0</code>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</A> (Parameters for flow resistance for models with two ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly</TD><TD>&nbsp;</TD><TD>Set to true if sensible exchange only</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp.start</TD><TD>0</TD><TD>Pressure difference between port_a and port_b [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance</TD><TD>(abs(dp_nominal) &gt; Modelica....</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>hOut</TD><TD>Leaving temperature of the component [J/kg]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>XiOut[Medium.nXi]</TD><TD>Leaving species concentration of the component [1]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>COut[Medium.nC]</TD><TD>Leaving trace substances of the component</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> StaticTwoPortHeatMassExchanger <font color="darkgreen">
  &quot;Partial model transporting fluid between two ports without storing mass or energy&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A>(
  showDesignFlowDirection = false);
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters</A>(
    <font color="blue">final </font>computeFlowResistance=(<font color="red">abs</font>(dp_nominal) &gt; Modelica.Constants.eps));

  <font color="darkgreen">// Model inputs</font>
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q_flow <font color="darkgreen">&quot;Heat transfered into the medium&quot;</font>;
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mWat_flow <font color="darkgreen">
    &quot;Moisture mass flow rate added to the medium&quot;</font>;

  <font color="darkgreen">// Models for conservation equations and pressure drop</font>
<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation"
>Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation</A> vol(
    sensibleOnly = sensibleOnly,
    use_safeDivision = use_safeDivision,
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>m_flow_nominal = m_flow_nominal,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal,
    <font color="blue">final </font>m_flow_small=m_flow_small,
    <font color="blue">final </font>homotopyInitialization=homotopyInitialization) <font color="darkgreen">
    &quot;Control volume for steady-state energy and mass balance&quot;</font>;
  <A HREF="Buildings_Fluid_FixedResistances.html#Buildings.Fluid.FixedResistances.FixedResistanceDpM"
>Buildings.Fluid.FixedResistances.FixedResistanceDpM</A> preDro(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>use_dh=false,
    <font color="blue">final </font>m_flow_nominal=m_flow_nominal,
    <font color="blue">final </font>deltaM=deltaM,
    <font color="blue">final </font>allowFlowReversal=allowFlowReversal,
    <font color="blue">final </font>show_T=false,
    <font color="blue">final </font>from_dp=from_dp,
    <font color="blue">final </font>linearized=linearizeFlowResistance,
    <font color="blue">final </font>homotopyInitialization=homotopyInitialization,
    <font color="blue">final </font>dp_nominal=dp_nominal) <font color="darkgreen">&quot;Pressure drop model&quot;</font>;</textblock>

  <font color="darkgreen">// Outputs that are needed in models that extend this model</font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> hOut(unit=&quot;J/kg&quot;) <font color="darkgreen">
    &quot;Leaving temperature of the component&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> XiOut[Medium.nXi](<font color="blue">each </font>unit=&quot;1&quot;,
                                                          <font color="blue">each </font>min=0,
                                                          <font color="blue">each </font>max=1) <font color="darkgreen">
    &quot;Leaving species concentration of the component&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> COut[Medium.nC](<font color="blue">each </font>min=0) <font color="darkgreen">
    &quot;Leaving trace substances of the component&quot;</font>;

  <font color="blue">constant </font>Boolean sensibleOnly <font color="darkgreen">&quot;Set to true if sensible exchange only&quot;</font>;
  <font color="blue">constant </font>Boolean use_safeDivision=true <font color="darkgreen">
    &quot;Set to true to improve numerical robustness&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> heaInp(y=Q_flow) <font color="darkgreen">
    &quot;Block to set heat input into volume&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A>
    masExc(<font color="blue">final </font>y=mWat_flow) <font color="darkgreen">&quot;Block to set moisture exchange in volume&quot;</font>;</textblock>
<font color="blue">equation </font>
  <font color="red">connect</font>(vol.hOut, hOut);
  <font color="red">connect</font>(vol.XiOut, XiOut);
  <font color="red">connect</font>(vol.COut, COut);
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(port_a,preDro. port_a);
  <font color="red">connect</font>(preDro.port_b, vol.port_a);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(vol.port_b, port_b);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(heaInp.y, vol.Q_flow);
  <font color="red">connect</font>(masExc.y, vol.mWat_flow);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StaticTwoPortHeatMassExchanger;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StaticFourPortHeatMassExchanger<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfacecfb0ac59541ba4f9angerI.png" ALT="Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.StaticFourPortHeatMassExchanger</H2>
<B>Partial model transporting two fluid streams between four ports without storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interfacecfb0ac59541ba4f9angerD.png" ALT="Buildings.Fluid.Interfaces.StaticFourPortHeatMassExchanger">
<P></P><H3>Information</H3>

<p>
This component transports two fluid streams between four ports, without
storing mass or energy. It is similar to
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"
>
Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger</a>,
but it has four ports instead of two.
</p>
<p>
If <code>dp<i>N</i>_nominal &gt; Modelica.Constants.eps</code>, 
where <code><i>N</i></code> denotes the fluid <i>1</i> or <i>2</i>,
then the model computes
pressure drop due to flow friction in the respective fluid stream.
The pressure drop is defined by a quadratic function that goes through
the point <code>(m<i>N</i>_flow_nominal, dp<i>N</i>_nominal)</code>. 
At <code>|m<i>N</i>_flow| &lt; deltaM<i>N</i> * m<i>N</i>_flow_nominal</code>,
the pressure drop vs. flow relation is linearized.
If the parameter <code>linearizeFlowResistance<i>N</i></code> is set to true,
then the whole pressure drop vs. flow resistance curve is linearized.
</p>

<h4>Implementation</h4>
<p>
This model uses inputs and constants that need to be set by models
that extend or instantiate this model.
The following inputs need to be assigned, where <code><i>N</i></code> denotes <code>1</code> or
<code>2</code>:</p>
<ul>
<li>
<code>Q<i>N</i>_flow</code>, which is the heat flow rate added to the medium <i>N</i>.
</li>
<li>
<code>mWat<i>N</i>_flow</code>, which is the moisture mass flow rate added to the medium <i>N</i>.
</li>
</ul>
<p>
Set the constant <code>sensibleOnly<i>N</i>=true</code> if the model that extends
or instantiates this model sets <code>mWat<i>N</i>_flow = 0</code>.
</p>
<p>
     Note that the model does not implement <code>0 = Q1_flow + Q2_flow</code> or
     <code>0 = mXi1_flow + mXi2_flow</code>. If there is no heat or mass transfer
     with the environment, then a model that extends this model needs to provide these 
     equations.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A> (Parameters for flow resistance for models with four ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly1</TD><TD>&nbsp;</TD><TD>Set to true if sensible exchange only for medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly2</TD><TD>&nbsp;</TD><TD>Set to true if sensible exchange only for medium 2</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1.start</TD><TD>0</TD><TD>Pressure difference between port_a1 and port_b1 [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2.start</TD><TD>0</TD><TD>Pressure difference between port_a2 and port_b2 [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance1</TD><TD>(dp1_nominal &gt; Modelica.Cons...</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance2</TD><TD>(dp2_nominal &gt; Modelica.Cons...</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a1</TD><TD>Fluid connector a1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b1</TD><TD>Fluid connector b1 (positive design flow direction is from port_a1 to port_b1)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a2</TD><TD>Fluid connector a2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b2</TD><TD>Fluid connector b2 (positive design flow direction is from port_a2 to port_b2)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> StaticFourPortHeatMassExchanger <font color="darkgreen">
  &quot;Partial model transporting two fluid streams between four ports without storing mass or energy&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>Buildings.Fluid.Interfaces.PartialFourPortInterface</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"
>Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters</A>(
   <font color="blue">final </font>computeFlowResistance1=(dp1_nominal &gt; Modelica.Constants.eps),
   <font color="blue">final </font>computeFlowResistance2=(dp2_nominal &gt; Modelica.Constants.eps));
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q1_flow <font color="darkgreen">
    &quot;Heat transfered into the medium 1&quot;</font>;
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium1.MassFlowRate</A> mWat1_flow <font color="darkgreen">
    &quot;Moisture mass flow rate added to the medium 1&quot;</font>;
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> Q2_flow <font color="darkgreen">
    &quot;Heat transfered into the medium 2&quot;</font>;
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium2.MassFlowRate</A> mWat2_flow <font color="darkgreen">
    &quot;Moisture mass flow rate added to the medium 2&quot;</font>;
  <font color="blue">constant </font>Boolean sensibleOnly1 <font color="darkgreen">
    &quot;Set to true if sensible exchange only for medium 1&quot;</font>;
  <font color="blue">constant </font>Boolean sensibleOnly2 <font color="darkgreen">
    &quot;Set to true if sensible exchange only for medium 2&quot;</font>;
<font color="blue">protected </font>
  <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger</A> bal1(
    <font color="blue">final </font>sensibleOnly = sensibleOnly1,
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium=<A HREF="Buildings_Fluid_Interfaces_Medium1.html#Buildings.Fluid.Interfaces.FourPort.Medium1"
>Medium1</A>,
    <font color="blue">final </font>m_flow_nominal = m1_flow_nominal,
    <font color="blue">final </font>dp_nominal = dp1_nominal,
    <font color="blue">final </font>allowFlowReversal = allowFlowReversal1,
    <font color="blue">final </font>m_flow_small = m1_flow_small,
    <font color="blue">final </font>homotopyInitialization = homotopyInitialization,
    <font color="blue">final </font>from_dp = from_dp1,
    <font color="blue">final </font>linearizeFlowResistance = linearizeFlowResistance1,
    <font color="blue">final </font>deltaM = deltaM1,
    <font color="blue">final </font>Q_flow = Q1_flow,
    <font color="blue">final </font>mWat_flow = mWat1_flow) <font color="darkgreen">
    &quot;Model for heat, mass, species, trace substance and pressure balance of stream 1&quot;</font>;
  <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger</A> bal2(
    <font color="blue">final </font>sensibleOnly = sensibleOnly2,
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium=<A HREF="Buildings_Fluid_Interfaces_Medium2.html#Buildings.Fluid.Interfaces.FourPort.Medium2"
>Medium2</A>,
    <font color="blue">final </font>m_flow_nominal = m2_flow_nominal,
    <font color="blue">final </font>dp_nominal = dp2_nominal,
    <font color="blue">final </font>allowFlowReversal = allowFlowReversal2,
    <font color="blue">final </font>m_flow_small = m2_flow_small,
    <font color="blue">final </font>homotopyInitialization = homotopyInitialization,
    <font color="blue">final </font>from_dp = from_dp2,
    <font color="blue">final </font>linearizeFlowResistance = linearizeFlowResistance2,
    <font color="blue">final </font>deltaM = deltaM2,
    <font color="blue">final </font>Q_flow = Q2_flow,
    <font color="blue">final </font>mWat_flow = mWat2_flow) <font color="darkgreen">
    &quot;Model for heat, mass, species, trace substance and pressure balance of stream 2&quot;</font>;
<font color="blue">equation </font>
  <font color="red">connect</font>(bal1.port_a, port_a1);
  <font color="red">connect</font>(bal1.port_b, port_b1);
  <font color="red">connect</font>(bal2.port_a, port_a2);
  <font color="red">connect</font>(bal2.port_b, port_b2);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StaticFourPortHeatMassExchanger;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialTwoPortInterface<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfacece5744ecb2dac5c0rfaceI.png" ALT="Buildings.Fluid.Interfaces.PartialTwoPortInterface" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.PartialTwoPortInterface"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.PartialTwoPortInterface</H2>
<B>Partial model transporting fluid between two ports without storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interfacece5744ecb2dac5c0rfaceD.png" ALT="Buildings.Fluid.Interfaces.PartialTwoPortInterface">
<P></P><H3>Information</H3>

<p>
This component defines the interface for models that 
transports a fluid between two ports. It is similar to 
<A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>
Modelica.Fluid.Interfaces.PartialTwoPortTransport</a>, but it does not 
include the species balance
</p> 
<pre>
  port_b.Xi_outflow = inStream(port_a.Xi_outflow);
</pre>
<p>
Thus, it can be used as a base class for a heat <i>and</i> mass transfer component
</p>
<p>
The model is used by other models in this package that add heat transfer,
mass transfer and pressure drop equations. See for example
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger"
>
Buildings.Fluid.Interfaces.StaticTwoPortHeatMassExchanger</a>.
</p>
<P></P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort"
>Modelica.Fluid.Interfaces.PartialTwoPort</A> (Partial component with two ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> PartialTwoPortInterface <font color="darkgreen">
  &quot;Partial model transporting fluid between two ports without storing mass or energy&quot;</font>
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPort"
>Modelica.Fluid.Interfaces.PartialTwoPort</A>(
    port_a(p(start=Medium.p_default,
             nominal=Medium.p_default)),
    port_b(p(start=Medium.p_default,
           nominal=Medium.p_default)));

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow_nominal <font color="darkgreen">
    &quot;Nominal mass flow rate&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow_small(min=0) = 1E-4*<font color="red">abs</font>(m_flow_nominal) <font color="darkgreen">
    &quot;Small mass flow rate for regularization of zero flow&quot;</font>;
  <font color="blue">parameter </font>Boolean homotopyInitialization = true <font color="darkgreen">&quot;= true, use homotopy method&quot;</font>;

  <font color="darkgreen">// Diagnostics</font>
   <font color="blue">parameter </font>Boolean show_T = false <font color="darkgreen">
    &quot;= true, if actual temperature at port is computed&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow(start=0) = port_a.m_flow <font color="darkgreen">
    &quot;Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp(start=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure difference between port_a and port_b&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> sta_a=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium.setState_phX</font>(port_a.p,
                          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a.h_outflow)),
                                   simplified=<font color="red">inStream</font>(port_a.h_outflow)),
                          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a.Xi_outflow)),
                                   simplified=<font color="red">inStream</font>(port_a.Xi_outflow)))<font color="blue">
    else </font>
      <font color="red">Medium.setState_phX</font>(port_a.p,
                          <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a.h_outflow)),
                          <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a.Xi_outflow))) <font color="blue">if </font>
         show_T <font color="darkgreen">&quot;Medium properties in port_a&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> sta_b=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium.setState_phX</font>(port_b.p,
                          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b.h_outflow)),
                                   simplified=port_b.h_outflow),
                          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b.Xi_outflow)),
                            simplified=port_b.Xi_outflow))<font color="blue">
    else </font>
      <font color="red">Medium.setState_phX</font>(port_b.p,
                          <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b.h_outflow)),
                          <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b.Xi_outflow))) <font color="blue">if </font>
          show_T <font color="darkgreen">&quot;Medium properties in port_b&quot;</font>;
<font color="blue">equation </font>
  dp = port_a.p - port_b.p;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialTwoPortInterface;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialFourPortInterface<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interface0bf626e24a9671a0rfaceI.png" ALT="Buildings.Fluid.Interfaces.PartialFourPortInterface" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.PartialFourPortInterface"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.PartialFourPortInterface</H2>
<B>Partial model transporting fluid between two ports without storing mass or energy</B><p></P>
<IMG SRC="Buildings.Fluid.Interface0bf626e24a9671a0rfaceD.png" ALT="Buildings.Fluid.Interfaces.PartialFourPortInterface">
<P></P><H3>Information</H3>

<p>
This component defines the interface for models that 
transport two fluid streams between four ports. 
It is similar to 
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>
Buildings.Fluid.Interfaces.PartialTwoPortInterface</a>,
but it has four ports instead of two.
<p>
The model is used by other models in this package that add heat transfer,
mass transfer and pressure drop equations.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPort"
>Buildings.Fluid.Interfaces.FourPort</A> (Partial model with four ports).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium1</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 1 in the component</TD></TR>
<TR><TD colspan="2">replaceable package Medium2</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium 2 in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal1</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 1, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal2</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal in medium 2, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port a1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b1_start</TD><TD>Medium1.h_default</TD><TD>Start value for enthalpy flowing out of port b1 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_a2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port a2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_outflow_b2_start</TD><TD>Medium2.h_default</TD><TD>Start value for enthalpy flowing out of port b2 [J/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m1_flow_small</TD><TD>1E-4*abs(m1_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m2_flow_small</TD><TD>1E-4*abs(m2_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> PartialFourPortInterface <font color="darkgreen">
  &quot;Partial model transporting fluid between two ports without storing mass or energy&quot;</font>
  <font color="blue">import </font><A HREF="../../msl/3.2/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.FourPort"
>Buildings.Fluid.Interfaces.FourPort</A>(
    port_a1(
      m_flow(min = <font color="blue">if </font>allowFlowReversal1<font color="blue"> then </font>-Constants.inf<font color="blue"> else </font>0)),
    port_b1(
      m_flow(max = <font color="blue">if </font>allowFlowReversal1<font color="blue"> then </font>+Constants.inf<font color="blue"> else </font>0)),
    port_a2(
      m_flow(min = <font color="blue">if </font>allowFlowReversal2<font color="blue"> then </font>-Constants.inf<font color="blue"> else </font>0)),
    port_b2(
      m_flow(max = <font color="blue">if </font>allowFlowReversal2<font color="blue"> then </font>+Constants.inf<font color="blue"> else </font>0)));
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m1_flow_nominal(min=0) <font color="darkgreen">
    &quot;Nominal mass flow rate&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m2_flow_nominal(min=0) <font color="darkgreen">
    &quot;Nominal mass flow rate&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium1.MassFlowRate</A> m1_flow_small(min=0) = 1E-4*<font color="red">abs</font>(m1_flow_nominal) <font color="darkgreen">
    &quot;Small mass flow rate for regularization of zero flow&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium2.MassFlowRate</A> m2_flow_small(min=0) = 1E-4*<font color="red">abs</font>(m2_flow_nominal) <font color="darkgreen">
    &quot;Small mass flow rate for regularization of zero flow&quot;</font>;
  <font color="blue">parameter </font>Boolean homotopyInitialization = true <font color="darkgreen">&quot;= true, use homotopy method&quot;</font>;
  <font color="darkgreen">// Diagnostics</font>
  <font color="blue">parameter </font>Boolean show_T = false <font color="darkgreen">
    &quot;= true, if actual temperature at port is computed&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium1.MassFlowRate</A> m1_flow(start=0) = port_a1.m_flow <font color="darkgreen">
    &quot;Mass flow rate from port_a1 to port_b1 (m1_flow &gt; 0 is design flow direction)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp1(start=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure difference between port_a1 and port_b1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium2.MassFlowRate</A> m2_flow(start=0) = port_a2.m_flow <font color="darkgreen">
    &quot;Mass flow rate from port_a2 to port_b2 (m2_flow &gt; 0 is design flow direction)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp2(start=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure difference between port_a2 and port_b2&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> sta_a1=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium1.setState_phX</font>(port_a1.p,
         <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a1.h_outflow)),
                  simplified=<font color="red">inStream</font>(port_a1.h_outflow)),
         <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a1.Xi_outflow)),
                  simplified=<font color="red">inStream</font>(port_a1.Xi_outflow)))<font color="blue">
    else </font>
      <font color="red">Medium1.setState_phX</font>(port_a1.p,
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a1.h_outflow)),
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a1.Xi_outflow))) <font color="blue">if </font>
         show_T <font color="darkgreen">&quot;Medium properties in port_a1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> sta_b1=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium1.setState_phX</font>(port_b1.p,
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b1.h_outflow)),
                   simplified=port_b1.h_outflow),
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b1.Xi_outflow)),
                   simplified=port_b1.Xi_outflow))<font color="blue">
    else </font>
      <font color="red">Medium1.setState_phX</font>(port_b1.p,
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b1.h_outflow)),
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b1.Xi_outflow))) <font color="blue">if </font>
         show_T <font color="darkgreen">&quot;Medium properties in port_b1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> sta_a2=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium2.setState_phX</font>(port_b2.p,
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a2.h_outflow)),
                   simplified=<font color="red">inStream</font>(port_a2.h_outflow)),
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a2.Xi_outflow)),
                   simplified=<font color="red">inStream</font>(port_a2.Xi_outflow)))<font color="blue">
    else </font>
      <font color="red">Medium2.setState_phX</font>(port_a2.p,
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a2.h_outflow)),
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_a2.Xi_outflow))) <font color="blue">if </font>
         show_T <font color="darkgreen">&quot;Medium properties in port_a2&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> sta_b2=<font color="blue">if </font>homotopyInitialization<font color="blue"> then </font>
      <font color="red">Medium2.setState_phX</font>(port_b2.p,
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b2.h_outflow)),
                   simplified=port_b2.h_outflow),
          <font color="red">homotopy</font>(actual=<font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b2.Xi_outflow)),
                   simplified=port_b2.Xi_outflow))<font color="blue">
    else </font>
      <font color="red">Medium2.setState_phX</font>(port_b2.p,
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b2.h_outflow)),
                           <font color="red">noEvent</font>(<font color="red">actualStream</font>(port_b2.Xi_outflow))) <font color="blue">if </font>
         show_T <font color="darkgreen">&quot;Medium properties in port_b2&quot;</font>;
<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> state_a1_inflow=
    <font color="red">Medium1.setState_phX</font>(port_a1.p,<font color="red"> inStream</font>(port_a1.h_outflow),<font color="red"> inStream</font>(port_a1.Xi_outflow)) <font color="darkgreen">
    &quot;state for medium inflowing through port_a1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium1.ThermodynamicState</A> state_b1_inflow=
    <font color="red">Medium1.setState_phX</font>(port_b1.p,<font color="red"> inStream</font>(port_b1.h_outflow),<font color="red"> inStream</font>(port_b1.Xi_outflow)) <font color="darkgreen">
    &quot;state for medium inflowing through port_b1&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> state_a2_inflow=
    <font color="red">Medium2.setState_phX</font>(port_a2.p,<font color="red"> inStream</font>(port_a2.h_outflow),<font color="red"> inStream</font>(port_a2.Xi_outflow)) <font color="darkgreen">
    &quot;state for medium inflowing through port_a2&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium2.ThermodynamicState</A> state_b2_inflow=
    <font color="red">Medium2.setState_phX</font>(port_b2.p,<font color="red"> inStream</font>(port_b2.h_outflow),<font color="red"> inStream</font>(port_b2.Xi_outflow)) <font color="darkgreen">
    &quot;state for medium inflowing through port_b2&quot;</font>;
<font color="blue">equation </font>
  dp1 = port_a1.p - port_b1.p;
  dp2 = port_a2.p - port_b2.p;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialFourPortInterface;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ConservationEquation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interface1d8308de49633a59ationI.png" ALT="Buildings.Fluid.Interfaces.ConservationEquation" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.ConservationEquation"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.ConservationEquation</H2>
<B>Lumped volume with mass and energy balance</B><p></P>
<IMG SRC="Buildings.Fluid.Interface1d8308de49633a59ationD.png" ALT="Buildings.Fluid.Interfaces.ConservationEquation">
<P></P><H3>Information</H3>

<p>
Basic model for an ideally mixed fluid volume with the ability to store mass and energy.
It implements a dynamic or a steady-state conservation equation for energy and mass fractions.
The model has zero pressure drop between its ports.
</p>
<h4>Implementation</h4>
<p>
When extending or instantiating this model, the input 
<code>fluidVolume</code>, which is the actual volume occupied by the fluid,
needs to be assigned.
For most components, this can be set to a parameter. However, for components such as 
expansion vessels, the fluid volume can change in time.
</p>
Input connectors of the model are
<ul>
<li>
<code>Q_flow</code>, which is the sensible plus latent heat flow rate added to the medium, and
</li>
<li>
<code>mWat_flow</code>, which is the moisture mass flow rate added to the medium.
</li>
</ul>
<p>
The model can be used as a dynamic model or as a steady-state model.
However, for a steady-state model with exactly two fluid ports connected, 
the model
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation"
>
Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation</a>
provides a more efficient implementation.
</p>
<p>
For models that instantiates this model, see
<A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>
Buildings.Fluid.MixingVolumes.MixingVolume</a> and
<A HREF="Buildings_Fluid_Storage.html#Buildings.Fluid.Storage.ExpansionVessel"
>
Buildings.Fluid.Storage.ExpansionVessel</a>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</A> (Declarations for lumped volumes).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_start</TD><TD>Medium.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>Medium.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_nominal[Medium.nC]</TD><TD>fill(1E-2, Medium.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>VesselFluidPorts_b</A></TD><TD>ports[nPorts]</TD><TD>Fluid inlets and outlets</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Heat transfered into the medium [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>mWat_flow</TD><TD>Moisture mass flow rate added to the medium [kg/s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>hOut</TD><TD>Leaving enthalpy of the component [J/kg]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>XiOut[Medium.nXi]</TD><TD>Leaving species concentration of the component [1]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>COut[Medium.nC]</TD><TD>Leaving trace substances of the component</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ConservationEquation <font color="darkgreen">
  &quot;Lumped volume with mass and energy balance&quot;</font>

<font color="darkgreen">//  outer Modelica.Fluid.System system &quot;System properties&quot;;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"
>Buildings.Fluid.Interfaces.LumpedVolumeDeclarations</A>;
  <font color="darkgreen">// Port definitions</font>
  <font color="blue">parameter </font>Integer nPorts=0 <font color="darkgreen">&quot;Number of ports&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Fluid_Vessels_BaseClasses.html#Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b"
>Modelica.Fluid.Vessels.BaseClasses.VesselFluidPorts_b</A> ports[nPorts](
      <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">package</font> Medium = Medium) <font color="darkgreen">&quot;Fluid inlets and outlets&quot;</font>;</textblock>

  <font color="darkgreen">// Set nominal attributes where literal values can be used.</font>
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.BaseProperties"
>Medium.BaseProperties</A> medium(
    preferredMediumStates= <font color="blue">not </font>(energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState),
    p(start=p_start,
      nominal=Medium.p_default,
      stateSelect=<font color="blue">if </font><font color="blue">not </font>(massDynamics == Modelica.Fluid.Types.Dynamics.SteadyState)<font color="blue">
                     then </font>StateSelect.prefer<font color="blue"> else </font>StateSelect.default),
    h(start=hStart),
    T(start=T_start,
      nominal=Medium.T_default,
      stateSelect=<font color="blue">if </font>(<font color="blue">not </font>(energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState))<font color="blue">
                     then </font>StateSelect.prefer<font color="blue"> else </font>StateSelect.default),
    Xi(start=X_start[1:Medium.nXi],
       nominal=Medium.X_default[1:Medium.nXi],
       <font color="blue">each </font>stateSelect=<font color="blue">if </font>(<font color="blue">not </font>(substanceDynamics == Modelica.Fluid.Types.Dynamics.SteadyState))<font color="blue">
                     then </font>StateSelect.prefer<font color="blue"> else </font>StateSelect.default),
    d(start=rho_nominal)) <font color="darkgreen">&quot;Medium properties&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Energy"
>Modelica.SIunits.Energy</A> U <font color="darkgreen">&quot;Internal energy of fluid&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> m <font color="darkgreen">&quot;Mass of fluid&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A>[Medium.nXi] mXi <font color="darkgreen">
    &quot;Masses of independent components in the fluid&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A>[Medium.nC] mC <font color="darkgreen">&quot;Masses of trace substances in the fluid&quot;</font>;
  <font color="darkgreen">// C need to be added here because unlike for Xi, which has medium.Xi,</font>
  <font color="darkgreen">// there is no variable medium.C</font>
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium.ExtraProperty</A> C[Medium.nC](nominal=C_nominal) <font color="darkgreen">
    &quot;Trace substance mixture content&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mb_flow <font color="darkgreen">&quot;Mass flows across boundaries&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A>[Medium.nXi] mbXi_flow <font color="darkgreen">
    &quot;Substance mass flows across boundaries&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraPropertyFlowRate"
>Medium.ExtraPropertyFlowRate</A>[Medium.nC] mbC_flow <font color="darkgreen">
    &quot;Trace substance mass flows across boundaries&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.EnthalpyFlowRate"
>Modelica.SIunits.EnthalpyFlowRate</A> Hb_flow <font color="darkgreen">
    &quot;Enthalpy flow across boundaries or energy source/sink&quot;</font>;

  <font color="darkgreen">// Inputs that need to be defined by an extending class</font>
  <font color="blue">input </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>Modelica.SIunits.Volume</A> fluidVolume <font color="darkgreen">&quot;Volume&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> Q_flow(unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Heat transfered into the medium&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> mWat_flow(unit=&quot;kg/s&quot;) <font color="darkgreen">
    &quot;Moisture mass flow rate added to the medium&quot;</font>;</textblock>

  <font color="darkgreen">// Outputs that are needed in models that extend this model</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> hOut(unit=&quot;J/kg&quot;,
                                             start=hStart) <font color="darkgreen">
    &quot;Leaving enthalpy of the component&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> XiOut[Medium.nXi](<font color="blue">each </font>unit=&quot;1&quot;,
                                                          <font color="blue">each </font>min=0,
                                                          <font color="blue">each </font>max=1) <font color="darkgreen">
    &quot;Leaving species concentration of the component&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> COut[Medium.nC](<font color="blue">each </font>min=0) <font color="darkgreen">
    &quot;Leaving trace substances of the component&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">parameter </font>Boolean initialize_p = <font color="blue">not </font>Medium.singleState <font color="darkgreen">
    &quot;= true to set up initial equations for pressure&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.EnthalpyFlowRate"
>Medium.EnthalpyFlowRate</A> ports_H_flow[nPorts];
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> ports_mXi_flow[nPorts,Medium.nXi];
  <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraPropertyFlowRate"
>Medium.ExtraPropertyFlowRate</A> ports_mC_flow[nPorts,Medium.nC];

  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>Modelica.SIunits.Density</A> rho_nominal=<font color="red">Medium.density</font>(
   <font color="red">Medium.setState_pTX</font>(
     T=T_start,
     p=p_start,
     X=X_start[1:Medium.nXi])) <font color="darkgreen">&quot;Density, used to compute fluid mass&quot;</font>;

  <font color="darkgreen">// Parameter that is used to construct the vector mXi_flow</font>
  <font color="blue">final </font><font color="blue">parameter </font>Real s[Medium.nXi] = {<font color="blue">if </font><font color="red">Modelica.Utilities.Strings.isEqual</font>(string1=Medium.substanceNames[i],
                                            string2=&quot;Water&quot;,
                                            caseSensitive=false)<font color="blue">
                                            then </font>1<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:Medium.nXi} <font color="darkgreen">
    &quot;Vector with zero everywhere except where species is&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hStart=
    <font color="red">Medium.specificEnthalpy_pTX</font>(p_start, T_start, X_start) <font color="darkgreen">
    &quot;Start value for specific enthalpy&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Assert that the substance with name &#39;water&#39; has been found.</font>
  <font color="red">assert</font>(Medium.nXi == 0<font color="blue"> or </font><font color="red">abs</font>(<font color="red">sum</font>(s)-1) &lt; 1e-5,
      &quot;If Medium.nXi &gt; 1, then substance &#39;water&#39; must be present for one component.&#39;&quot;
         + Medium.mediumName + &quot;&#39;.\n&quot;
         + &quot;Check medium model.&quot;);

  <font color="darkgreen">// Make sure that if energyDynamics is SteadyState, then</font>
  <font color="darkgreen">// massDynamics is also SteadyState.</font>
  <font color="darkgreen">// Otherwise, the system of ordinary differential equations may be inconsistent.</font>
  <font color="blue">if </font>energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState<font color="blue"> then</font>
    <font color="red">assert</font>(massDynamics == energyDynamics, &quot;
         If &#39;massDynamics == Modelica.Fluid.Types.Dynamics.SteadyState&#39;, then it is 
         required that &#39;energyDynamics==Modelica.Fluid.Types.Dynamics.SteadyState&#39;.
         Otherwise, the system of equations may not be consistent.
         You need to select other parameter values.&quot;);
  <font color="blue">end if</font>;

  <font color="darkgreen">// initialization of balances</font>
  <font color="blue">if </font>energyDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial<font color="blue"> then</font>
      medium.T = T_start;
  <font color="blue">else</font>
    <font color="blue">if </font>energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial<font color="blue"> then</font>
      <font color="red">  der</font>(medium.T) = 0;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  <font color="blue">if </font>massDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial<font color="blue"> then</font>
    <font color="blue">if </font>initialize_p<font color="blue"> then</font>
      medium.p = p_start;
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    <font color="blue">if </font>massDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial<font color="blue"> then</font>
      <font color="blue">if </font>initialize_p<font color="blue"> then</font>
        <font color="red">der</font>(medium.p) = 0;
      <font color="blue">end if</font>;
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  <font color="blue">if </font>substanceDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial<font color="blue"> then</font>
    medium.Xi = X_start[1:Medium.nXi];
  <font color="blue">else</font>
    <font color="blue">if </font>substanceDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial<font color="blue"> then</font>
      <font color="red">der</font>(medium.Xi) =<font color="red"> zeros</font>(Medium.nXi);
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

  <font color="blue">if </font>traceDynamics == Modelica.Fluid.Types.Dynamics.FixedInitial<font color="blue"> then</font>
    C = C_start[1:Medium.nC];
  <font color="blue">else</font>
    <font color="blue">if </font>traceDynamics == Modelica.Fluid.Types.Dynamics.SteadyStateInitial<font color="blue"> then</font>
      <font color="red">der</font>(C) =<font color="red"> zeros</font>(Medium.nC);
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

<font color="blue">equation </font>
  <font color="darkgreen">// Total quantities</font>
  m = fluidVolume*medium.d;
  mXi = m*medium.Xi;
  U = m*medium.u;
  mC = m*C;

  hOut = medium.h;
  XiOut = medium.Xi;
  COut = C;

  <font color="blue">for </font>i<font color="blue"> in </font>1:nPorts<font color="blue"> loop</font>
    ports_H_flow[i]     = ports[i].m_flow *<font color="red"> actualStream</font>(ports[i].h_outflow) <font color="darkgreen">
      &quot;Enthalpy flow&quot;</font>;
    ports_mXi_flow[i,:] = ports[i].m_flow *<font color="red"> actualStream</font>(ports[i].Xi_outflow) <font color="darkgreen">
      &quot;Component mass flow&quot;</font>;
    ports_mC_flow[i,:]  = ports[i].m_flow *<font color="red"> actualStream</font>(ports[i].C_outflow) <font color="darkgreen">
      &quot;Trace substance mass flow&quot;</font>;
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:Medium.nXi<font color="blue"> loop</font>
    mbXi_flow[i] =<font color="red"> sum</font>(ports_mXi_flow[:,i]);
  <font color="blue">end for</font>;

  <font color="blue">for </font>i<font color="blue"> in </font>1:Medium.nC<font color="blue"> loop</font>
    mbC_flow[i]  =<font color="red"> sum</font>(ports_mC_flow[:,i]);
  <font color="blue">end for</font>;

  mb_flow =<font color="red"> sum</font>(ports.m_flow);
  Hb_flow =<font color="red"> sum</font>(ports_H_flow);

  <font color="darkgreen">// Energy and mass balances</font>
  <font color="blue">if </font>energyDynamics == Modelica.Fluid.Types.Dynamics.SteadyState<font color="blue"> then</font>
    0 = Hb_flow + Q_flow;
  <font color="blue">else</font>
    <font color="red">der</font>(U) = Hb_flow + Q_flow;
  <font color="blue">end if</font>;

  <font color="blue">if </font>massDynamics == Modelica.Fluid.Types.Dynamics.SteadyState<font color="blue"> then</font>
    0 = mb_flow + mWat_flow;
  <font color="blue">else</font>
    <font color="red">der</font>(m) = mb_flow + mWat_flow;
  <font color="blue">end if</font>;

  <font color="blue">if </font>substanceDynamics == Modelica.Fluid.Types.Dynamics.SteadyState<font color="blue"> then</font>
    <font color="red">zeros</font>(Medium.nXi) = mbXi_flow + mWat_flow * s;
  <font color="blue">else</font>
    <font color="red">der</font>(mXi) = mbXi_flow + mWat_flow * s;
  <font color="blue">end if</font>;

  <font color="blue">if </font>traceDynamics == Modelica.Fluid.Types.Dynamics.SteadyState<font color="blue"> then</font>
    <font color="red">zeros</font>(Medium.nC)  = mbC_flow;
  <font color="blue">else</font>
    <font color="red">der</font>(mC)  = mbC_flow;
  <font color="blue">end if</font>;

  <font color="darkgreen">// Properties of outgoing flows</font>
  <font color="blue">for </font>i<font color="blue"> in </font>1:nPorts<font color="blue"> loop</font>
      ports[i].p          = medium.p;
      ports[i].h_outflow  = medium.h;
      ports[i].Xi_outflow = medium.Xi;
      ports[i].C_outflow  = C;
  <font color="blue">end for</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ConservationEquation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StaticTwoPortConservationEquation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.Interfacea868bbaf7da4f56dationI.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.StaticTwoPortConservationEquation</H2>
<B>Partial model for static energy and mass conservation equations</B><p></P>
<IMG SRC="Buildings.Fluid.Interfacea868bbaf7da4f56dationD.png" ALT="Buildings.Fluid.Interfaces.StaticTwoPortConservationEquation">
<P></P><H3>Information</H3>

<p>
This model transports fluid between its two ports, without storing mass or energy. 
It implements a steady-state conservation equation for energy and mass fractions.
The model has zero pressure drop between its ports.
</p>
<h4>Implementation</h4>
Input connectors of the model are
<ul>
<li>
<code>Q_flow</code>, which is the sensible plus latent heat flow rate added to the medium, and
</li>
<li>
<code>mWat_flow</code>, which is the moisture mass flow rate added to the medium.
</li>
</ul>

<p>
The model can only be used as a steady-state model with two fluid ports.
For a model with a dynamic balance, and more fluid ports, use
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.ConservationEquation"
>
Buildings.Fluid.Interfaces.ConservationEquation</a>.
</p>
<p>
Set the constant <code>sensibleOnly=true</code> if the model that extends
or instantiates this model sets <code>mWat_flow = 0</code>.
</p>
<P></P>
Extends from <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A> (Partial model transporting fluid between two ports without storing mass or energy).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD>Boolean</TD><TD>sensibleOnly</TD><TD>&nbsp;</TD><TD>Set to true if sensible exchange only</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>&nbsp;</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp.start</TD><TD>0</TD><TD>Pressure difference between port_a and port_b [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Heat transfered into the medium [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>mWat_flow</TD><TD>Moisture mass flow rate added to the medium [kg/s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>hOut</TD><TD>Leaving temperature of the component [J/kg]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>XiOut[Medium.nXi]</TD><TD>Leaving species concentration of the component [1]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>COut[Medium.nC]</TD><TD>Leaving trace substances of the component</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> StaticTwoPortConservationEquation <font color="darkgreen">
  &quot;Partial model for static energy and mass conservation equations&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>Buildings.Fluid.Interfaces.PartialTwoPortInterface</A>(
  showDesignFlowDirection = false);

  <font color="blue">constant </font>Boolean sensibleOnly <font color="darkgreen">&quot;Set to true if sensible exchange only&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> Q_flow(unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Heat transfered into the medium&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> mWat_flow(unit=&quot;kg/s&quot;) <font color="darkgreen">
    &quot;Moisture mass flow rate added to the medium&quot;</font>;</textblock>

  <font color="darkgreen">// Outputs that are needed in models that extend this model</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> hOut(unit=&quot;J/kg&quot;,
                                             start=<font color="red">Medium.specificEnthalpy_pTX</font>(
                                                     p=Medium.p_default,
                                                     T=Medium.T_default,
                                                     X=Medium.X_default)) <font color="darkgreen">
    &quot;Leaving temperature of the component&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> XiOut[Medium.nXi](<font color="blue">each </font>unit=&quot;1&quot;,
                                                          <font color="blue">each </font>min=0,
                                                          <font color="blue">each </font>max=1) <font color="darkgreen">
    &quot;Leaving species concentration of the component&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> COut[Medium.nC](<font color="blue">each </font>min=0) <font color="darkgreen">
    &quot;Leaving trace substances of the component&quot;</font>;</textblock>

  <font color="blue">constant </font>Boolean use_safeDivision=true <font color="darkgreen">
    &quot;Set to true to improve numerical robustness&quot;</font>;
<font color="blue">protected </font>
  Real m_flowInv(unit=&quot;s/kg&quot;) <font color="darkgreen">&quot;Regularization of 1/m_flow&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mXi_flow[Medium.nXi] <font color="darkgreen">
    &quot;Mass flow rates of independent substances added to the medium&quot;</font>;

  <font color="darkgreen">// Parameters that is used to construct the vector mXi_flow</font>
  <font color="blue">final </font><font color="blue">parameter </font>Real s[Medium.nXi] = {<font color="blue">if </font><font color="red">Modelica.Utilities.Strings.isEqual</font>(string1=Medium.substanceNames[i],
                                            string2=&quot;Water&quot;,
                                            caseSensitive=false)<font color="blue">
                                            then </font>1<font color="blue"> else </font>0 <font color="blue">for </font>i<font color="blue"> in </font>1:Medium.nXi} <font color="darkgreen">
    &quot;Vector with zero everywhere except where species is&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// Assert that the substance with name &#39;water&#39; has been found.</font>
  <font color="red">assert</font>(Medium.nXi == 0<font color="blue"> or </font><font color="red">abs</font>(<font color="red">sum</font>(s)-1) &lt; 1e-5,
      &quot;If Medium.nXi &gt; 1, then substance &#39;water&#39; must be present for one component.&#39;&quot;
         + Medium.mediumName + &quot;&#39;.\n&quot;
         + &quot;Check medium model.&quot;);

<font color="blue">equation </font>
 <font color="darkgreen">// Species flow rate from connector mWat_flow</font>
 mXi_flow = mWat_flow * s;
  <font color="darkgreen">// Regularization of m_flow around the origin to avoid a division by zero</font>
 <font color="blue">if </font>use_safeDivision<font color="blue"> then</font>
    m_flowInv =<font color="red"> Buildings.Utilities.Math.Functions.inverseXRegularized</font>(x=port_a.m_flow, delta=m_flow_small/1E3);
 <font color="blue">else</font>
     m_flowInv = 0;<font color="darkgreen"> // m_flowInv is not used if use_safeDivision = false.</font>
 <font color="blue">end if</font>;

 <font color="blue">if </font>allowFlowReversal<font color="blue"> then</font>
   <font color="darkgreen">// Formulate hOut using spliceFunction. This avoids an event iteration.</font>
   <font color="darkgreen">// The introduced error is small because deltax=m_flow_small/1e3</font>
   hOut =<font color="red"> Buildings.Utilities.Math.Functions.spliceFunction</font>(pos=port_b.h_outflow,
                                                            neg=port_a.h_outflow,
                                                            x=port_a.m_flow,
                                                            deltax=m_flow_small/1E3);
   XiOut =<font color="red"> Buildings.Utilities.Math.Functions.spliceFunction</font>(pos=port_b.Xi_outflow,
                                                            neg=port_a.Xi_outflow,
                                                            x=port_a.m_flow,
                                                            deltax=m_flow_small/1E3);
   COut =<font color="red"> Buildings.Utilities.Math.Functions.spliceFunction</font>(pos=port_b.C_outflow,
                                                            neg=port_a.C_outflow,
                                                            x=port_a.m_flow,
                                                            deltax=m_flow_small/1E3);
 <font color="blue">else</font>
   hOut =  port_b.h_outflow;
   XiOut = port_b.Xi_outflow;
   COut =  port_b.C_outflow;
 <font color="blue">end if</font>;

  <font color="darkgreen">//////////////////////////////////////////////////////////////////////////////////////////</font>
  <font color="darkgreen">// Energy balance and mass balance</font>
  <font color="blue">if </font>sensibleOnly<font color="blue"> then</font>
    <font color="darkgreen">// Mass balance</font>
    port_a.m_flow = -port_b.m_flow;
    <font color="darkgreen">// Energy balance</font>
    <font color="blue">if </font>use_safeDivision<font color="blue"> then</font>
      port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow) + Q_flow * m_flowInv;
      port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow) - Q_flow * m_flowInv;
    <font color="blue">else</font>
      port_a.m_flow * (<font color="red">inStream</font>(port_a.h_outflow) - port_b.h_outflow) = -Q_flow;
      port_a.m_flow * (<font color="red">inStream</font>(port_b.h_outflow) - port_a.h_outflow) = +Q_flow;
    <font color="blue">end if</font>;
    <font color="darkgreen">// Transport of species</font>
    port_a.Xi_outflow =<font color="red"> inStream</font>(port_b.Xi_outflow);
    port_b.Xi_outflow =<font color="red"> inStream</font>(port_a.Xi_outflow);
    <font color="darkgreen">// Transport of trace substances</font>
    port_a.C_outflow =<font color="red"> inStream</font>(port_b.C_outflow);
    port_b.C_outflow =<font color="red"> inStream</font>(port_a.C_outflow);
  <font color="blue">else</font>
    <font color="darkgreen">// Mass balance (no storage)</font>
    port_a.m_flow + port_b.m_flow = -mWat_flow;
    <font color="darkgreen">// Energy balance.</font>
    <font color="darkgreen">// This equation is approximate since m_flow = port_a.m_flow is used for the mass flow rate</font>
    <font color="darkgreen">// at both ports. Since mWat_flow &lt;&lt; m_flow, the error is small.</font>
    <font color="blue">if </font>use_safeDivision<font color="blue"> then</font>
      port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow) + Q_flow * m_flowInv;
      port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow) - Q_flow * m_flowInv;
      <font color="darkgreen">// Transport of species</font>
      port_b.Xi_outflow =<font color="red"> inStream</font>(port_a.Xi_outflow) + mXi_flow * m_flowInv;
      port_a.Xi_outflow =<font color="red"> inStream</font>(port_b.Xi_outflow) - mXi_flow * m_flowInv;
     <font color="blue">else</font>
      port_a.m_flow * (<font color="red">inStream</font>(port_a.h_outflow) - port_b.h_outflow) = -Q_flow;
      port_a.m_flow * (<font color="red">inStream</font>(port_b.h_outflow) - port_a.h_outflow) = +Q_flow;
      <font color="darkgreen">// Transport of species</font>
      port_a.m_flow * (<font color="red">inStream</font>(port_a.Xi_outflow) - port_b.Xi_outflow) = -mXi_flow;
      port_a.m_flow * (<font color="red">inStream</font>(port_b.Xi_outflow) - port_a.Xi_outflow) = +mXi_flow;
     <font color="blue">end if</font>;

    <font color="darkgreen">// Transport of trace substances</font>
   port_a.m_flow*port_a.C_outflow = -port_b.m_flow*<font color="red">inStream</font>(port_b.C_outflow);
   port_b.m_flow*port_b.C_outflow = -port_a.m_flow*<font color="red">inStream</font>(port_a.C_outflow);

  <font color="blue">end if</font>;<font color="darkgreen"> // sensibleOnly</font>

  <font color="darkgreen">//////////////////////////////////////////////////////////////////////////////////////////</font>
  <font color="darkgreen">// No pressure drop in this model</font>
  port_a.p = port_b.p;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StaticTwoPortConservationEquation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TwoPortFlowResistanceParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.Interfaces.TwoPortFlowResistanceParameters"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.TwoPortFlowResistanceParameters</H2>
<B>Parameters for flow resistance for models with two ports</B><p></P>
<P></P><H3>Information</H3>

This class contains parameters that are used to
compute the pressure drop in models that have one fluid stream.
Note that the nominal mass flow rate is not declared here because
the model 
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialTwoPortInterface"
>
PartialTwoPortInterface</a>
already declares it.
<P></P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> TwoPortFlowResistanceParameters <font color="darkgreen">
  &quot;Parameters for flow resistance for models with two ports&quot;</font>

  <font color="blue">parameter </font>Boolean computeFlowResistance = true <font color="darkgreen">
    &quot;=true, compute flow resistance. Set to false to assume no friction&quot;</font>;

  <font color="blue">parameter </font>Boolean from_dp = false <font color="darkgreen">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp_nominal(min=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure&quot;</font>;
  <font color="blue">parameter </font>Boolean linearizeFlowResistance = false <font color="darkgreen">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</font>;
  <font color="blue">parameter </font>Real deltaM = 0.1 <font color="darkgreen">
    &quot;Fraction of nominal flow rate where flow transitions to laminar&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TwoPortFlowResistanceParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FourPortFlowResistanceParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.Interfaces.FourPortFlowResistanceParameters"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.FourPortFlowResistanceParameters</H2>
<B>Parameters for flow resistance for models with four ports</B><p></P>
<P></P><H3>Information</H3>

This class contains parameters that are used to
compute the pressure drop in components that have two fluid streams.
Note that the nominal mass flow rate is not declared here because
the model 
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.PartialFourPortInterface"
>
PartialFourPortInterface</a>
already declares it.
<P></P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp1_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp2_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 1</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance1</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp1</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance1</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM1</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Medium 2</TD></TR>
<TR><TD>Boolean</TD><TD>computeFlowResistance2</TD><TD>true</TD><TD>=true, compute flow resistance. Set to false to assume no friction</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp2</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance2</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM2</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> FourPortFlowResistanceParameters <font color="darkgreen">
  &quot;Parameters for flow resistance for models with four ports&quot;</font>

  <font color="blue">parameter </font>Boolean computeFlowResistance1 = true <font color="darkgreen">
    &quot;=true, compute flow resistance. Set to false to assume no friction&quot;</font>;

  <font color="blue">parameter </font>Boolean from_dp1 = false <font color="darkgreen">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp1_nominal(min=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure&quot;</font>;
  <font color="blue">parameter </font>Boolean linearizeFlowResistance1 = false <font color="darkgreen">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</font>;
  <font color="blue">parameter </font>Real deltaM1 = 0.1 <font color="darkgreen">
    &quot;Fraction of nominal flow rate where flow transitions to laminar&quot;</font>;
  <font color="blue">parameter </font>Boolean computeFlowResistance2 = true <font color="darkgreen">
    &quot;=true, compute flow resistance. Set to false to assume no friction&quot;</font>;

  <font color="blue">parameter </font>Boolean from_dp2 = false <font color="darkgreen">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp2_nominal(min=0, displayUnit=&quot;Pa&quot;) <font color="darkgreen">
    &quot;Pressure&quot;</font>;
  <font color="blue">parameter </font>Boolean linearizeFlowResistance2 = false <font color="darkgreen">
    &quot;= true, use linear relation between m_flow and dp for any flow rate&quot;</font>;
  <font color="blue">parameter </font>Real deltaM2 = 0.1 <font color="darkgreen">
    &quot;Fraction of nominal flow rate where flow transitions to laminar&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>FourPortFlowResistanceParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LumpedVolumeDeclarations<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.Interfaces.LumpedVolumeDeclarations"></A><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces"
>Buildings.Fluid.Interfaces</A>.LumpedVolumeDeclarations</H2>
<B>Declarations for lumped volumes</B><p></P>
<P></P><H3>Information</H3>

<p>
This class contains parameters and medium properties
that are used in the lumped  volume model, and in models that extend the 
lumped volume model.
</p>
<p>
These parameters are used by
<A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.ConservationEquation"
>
Buildings.Fluid.Interfaces.ConservationEquation</a>,
<A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolume"
>
Buildings.Fluid.MixingVolumes.MixingVolume</a>,
<A HREF="Buildings_Rooms.html#Buildings.Rooms.MixedAir"
>
Buildings.Rooms.MixedAir</a>, and by
<a href="modelica://Buildings.Rooms.BaseClasses.MixedAir">
Buildings.Rooms.BaseClasses.MixedAir</a>.
</p>
<P></P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium in the component</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_start</TD><TD>Medium.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>Medium.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_nominal[Medium.nC]</TD><TD>fill(1E-2, Medium.nC)</TD><TD>Nominal value of trace substances. (Set to typical order of magnitude.)</TD></TR>
</TABLE>
<P></P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> LumpedVolumeDeclarations <font color="darkgreen">&quot;Declarations for lumped volumes&quot;</font>
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
    <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>Modelica.Media.Interfaces.PartialMedium</A> <font color="darkgreen">&quot;Medium in the component&quot;</font>;

  <font color="darkgreen">// Assumptions</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> energyDynamics=Modelica.Fluid.Types.Dynamics.DynamicFreeInitial <font color="darkgreen">
    &quot;Formulation of energy balance&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> massDynamics=energyDynamics <font color="darkgreen">
    &quot;Formulation of mass balance&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> substanceDynamics=energyDynamics <font color="darkgreen">
    &quot;Formulation of substance balance&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Modelica.Fluid.Types.Dynamics</A> traceDynamics=energyDynamics <font color="darkgreen">
    &quot;Formulation of trace substance balance&quot;</font>;

  <font color="darkgreen">// Initialization</font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> p_start = Medium.p_default <font color="darkgreen">
    &quot;Start value of pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium.Temperature</A> T_start=Medium.T_default <font color="darkgreen">
    &quot;Start value of temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>Medium.MassFraction</A> X_start[Medium.nX] = Medium.X_default <font color="darkgreen">
    &quot;Start value of mass fractions m_i/m&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium.ExtraProperty</A> C_start[Medium.nC](
       quantity=Medium.extraPropertiesNames)=<font color="red">fill</font>(0, Medium.nC) <font color="darkgreen">
    &quot;Start value of trace substances&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>Medium.ExtraProperty</A> C_nominal[Medium.nC](
       quantity=Medium.extraPropertiesNames) =<font color="red"> fill</font>(1E-2, Medium.nC) <font color="darkgreen">
    &quot;Nominal value of trace substances. (Set to typical order of magnitude.)&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>LumpedVolumeDeclarations;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Wed Feb 12 08:17:12 2014.
</address></BODY>
</HTML>
