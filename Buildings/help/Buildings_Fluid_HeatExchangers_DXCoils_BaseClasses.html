<HTML>
<HEAD>
<TITLE>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Package with base classes for DX cooling coil model&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../Resources/www/modelicaDoc.css">
</HEAD>
<body>
<!-- --- header ------ -->
<div class="headerStyle">
<img src="../Resources/www/lbl-logo.png" alt="LBL logo"/>
</div>
<div class="headerLinks">
<ul><li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt; <a href="Buildings.html">Modelica</a></li></ul>
</div>
<!-- --- end header -- -->

<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BaseClasses<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>Buildings.Fluid.HeatExchangers.DXCoils</A>.BaseClasses</H2>
<B>Package with base classes for DX cooling coil model</B>
<P>
<P><H3>Information</H3></P>

This package contains base classes that are used to construct the models in
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
>Buildings.Fluid.HeatExchangers.DXCoils</a>.
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons_BasesPackage.html#Modelica.Icons.BasesPackage"
>Modelica.Icons.BasesPackage</A> (Icon for packages containing base classes).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
>ApparatusDewPoint</A>
</TD><TD>Calculates air properties at apparatus dew point</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
>ApparatusDryPoint</A>
</TD><TD>Calculates air properties at dry coil surface</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha8c92194f2b979144ationS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"
>Condensation</A>
</TD><TD>Calculates rate of condensation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha924ebce5ae74de27acityS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"
>CoolingCapacity</A>
</TD><TD>Calculates cooling capacity at given temperature and flow fraction</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>DryCoil</A>
</TD><TD>Calculates dry coil condition</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"
>DryWetSelector</A>
</TD><TD>Selects results from dry or wet coil</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha674bdd2f2735086colingS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
>DXCooling</A>
</TD><TD>DX cooling coil operation </TD></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>EssentialParameters</A>
</TD><TD>A partial block for essential parameters</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha77701eece82d67eaationS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"
>Evaporation</A>
</TD><TD>Model that computes evaporation of water that accumulated on the coil surface</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha5e776f995361fe28PowerS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"
>InputPower</A>
</TD><TD>Electrical power consumed by the unit</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha3626cd4d1788ba28itionS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>NominalCondition</A>
</TD><TD>Calculates inlet and outlet fluid parameters at nominal condition</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>PartialCoilCondition</A>
</TD><TD>Partial block for dry and wet coil conditions</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>PartialCoilInterface</A>
</TD><TD>Partial block for DX coil</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil"
>PartialDXCoil</A>
</TD><TD>Partial model for DX coil</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchae2833c094a90cf9bitionS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>PartialSurfaceCondition</A>
</TD><TD>Partial block for apparatus dew and dry point calculation</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"
>SensibleHeatRatio</A>
</TD><TD>Calculates the sensible heat ratio</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect"
>SpeedSelect</A>
</TD><TD>Selects the lower specified speed ratio for multispeed model</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</A>
</TD><TD>Interpolates values between speeds</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha0f2a3a8bf900018f.UACpS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"
>UACp</A>
</TD><TD>Calculates UA/Cp of the coil</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>WetCoil</A>
</TD><TD>Calculates wet coil condition </TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExcha072106c57e87931btionsS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions"
>Functions</A>
</TD><TD>Package with functions</TD></TR>
<TR><TD><IMG SRC="Buildings.Fluid.HeatExchafb83f72f1d162a5dmplesS.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Examples.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Examples"
>Examples</A>
</TD><TD>Package with examples of base class components for DX cooling coil model</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ApparatusDewPoint<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.ApparatusDewPoint</H2>
<B>Calculates air properties at apparatus dew point</B><p>
<IMG SRC="Buildings.Fluid.HeatExchad1856c8f4f4d7f77PointD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint">
<P><H3>Information</H3></P>

<p>
This blocks outputs the state of the moist air at the dew point of the coil.
The bypass factor of the coil and the resulting enthalpy difference is
computed by its base class
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</A> (Partial block for apparatus dew and dry point calculation).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</A></TD><TD>Medium model</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true to interpolate data</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Real</TD><TD>bypass.start</TD><TD>0.25</TD><TD>Bypass factor</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed index</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Cooling capacity of the coil [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Evaporator air mass flow rate [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Evaporator air static pressure [Pa]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Evaporator inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Evaporator air inlet specific enthalpy [J/kg]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>hADP</TD><TD>Specific enthalpy of air at apparatus dew point [J/kg]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>XADP</TD><TD>Humidity mass fraction of air at  apparatus dew point</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TADP</TD><TD>Dry bulb temperature of air at apparatus dew point [K]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ApparatusDewPoint <font color="darkgreen">
  &quot;Calculates air properties at apparatus dew point&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> hADP(
    nominal=40000,
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <font color="darkgreen">&quot;Specific enthalpy of air at apparatus dew point&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> XADP(
    min=0,
    max=1.0) <font color="darkgreen">&quot;Humidity mass fraction of air at  apparatus dew point&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TADP(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;,
    min=233.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at apparatus dew point&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TSatMin = 273.15+3 <font color="darkgreen">
    &quot;Minimum apparatus saturation temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XSatMin = 0.004667 <font color="darkgreen">
    &quot;Mass fraction at saturation of coil inlet conditions&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hMin(fixed=false) <font color="darkgreen">
    &quot;Minimum enthalpy of apparatus dew point&quot;</font>;

<font color="blue">initial </font><font color="blue">equation </font>
<font color="darkgreen">/*  XSatMin = Medium.Xsaturation(
        Medium.setState_pTX(p=p,
                            T=273.15+3,
                            X=cat(1,{XSatMin},{1-sum({XSatMin})})));
*/</font>
  hMin =<font color="red"> Medium.h_pTX</font>(
           p=   Medium.p_default,
           T=   TSatMin,
           X=<font color="red">   cat</font>(1,{XSatMin},{1-<font color="red">sum</font>({XSatMin})}));
<font color="blue">equation </font>
  hADP =<font color="red"> Buildings.Utilities.Math.Functions.smoothMin</font>(
    x1=<font color="red">  Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=hEvaIn - delta_h,
      x2=hMin,
      deltaX=10),
    x2=  hEvaIn+100,
    deltaX=10);
  XADP =<font color="red"> Buildings.Utilities.Psychrometrics.Functions.X_pW</font>(p_w=<font color="red">Medium.saturationPressure</font>(TADP), p=p);
  TADP=<font color="red"> Medium.temperature</font>(<font color="red">Medium.setState_phX</font>(p=p, h=hADP, X=<font color="red">cat</font>(1,{XADP},{1-<font color="red">sum</font>({XADP})})));
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ApparatusDewPoint;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ApparatusDryPoint<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.ApparatusDryPoint</H2>
<B>Calculates air properties at dry coil surface</B><p>
<IMG SRC="Buildings.Fluid.HeatExchaf59fed7a934d7f72PointD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint">
<P><H3>Information</H3></P>

<p>
This blocks outputs the state of the moist air at of the coil, assuming no condensation occurs.
The bypass factor of the coil and the resulting enthalpy difference is
computed by its base class
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</a>.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</A> (Partial block for apparatus dew and dry point calculation).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</A></TD><TD>Medium model</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true to interpolate data</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Real</TD><TD>bypass.start</TD><TD>0.25</TD><TD>Bypass factor</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed index</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Cooling capacity of the coil [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Evaporator air mass flow rate [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Evaporator air static pressure [Pa]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Evaporator inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Evaporator air inlet specific enthalpy [J/kg]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TDry</TD><TD>Dry bulb temperature of air at dry coil condition [K]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ApparatusDryPoint <font color="darkgreen">
  &quot;Calculates air properties at dry coil surface&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TDry(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;,
    min=253.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at dry coil condition&quot;</font>;</textblock>
  <font color="blue">output </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hDry <font color="darkgreen">
    &quot;Enthalpy of air at coil surface&quot;</font>;
<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaInVec[Medium.nX] <font color="darkgreen">
    &quot;Mass fraction of air inlet condition&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TADP(start=283.15) <font color="darkgreen">
    &quot;Apparatus dew point temperature&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hMin <font color="darkgreen">
    &quot;Minimum enthalpy of apparatus dew point&quot;</font>;
<font color="blue">equation </font>
  XEvaInVec =<font color="red">cat</font>(1,{XEvaIn},{1-<font color="red">sum</font>({XEvaIn})});

  XEvaIn =<font color="red"> Buildings.Utilities.Psychrometrics.Functions.X_pW</font>(
     p_w=<font color="red">Medium.saturationPressureLiquid</font>(TADP), p=p);

  hMin =<font color="red"> Medium.specificEnthalpy</font>(<font color="red">Medium.setState_pTX</font>(p=p, T=TADP, X=XEvaInVec));

  hDry =<font color="red"> Buildings.Utilities.Math.Functions.smoothMin</font>(
    x1=<font color="red">  Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=hEvaIn - delta_h,
      x2=hMin,
      deltaX=10),
    x2=  hEvaIn+100,
    deltaX=10);

  TDry=<font color="red"> Medium.temperature</font>(<font color="red">Medium.setState_phX</font>(p=p, h=hDry, X=XEvaInVec)) <font color="darkgreen">
    &quot;XEvaIn=XDry assumption for dry coil&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ApparatusDryPoint;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Condensation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha8c92194f2b979144ationI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.Condensation</H2>
<B>Calculates rate of condensation</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha8c92194f2b979144ationD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation">
<P><H3>Information</H3></P>

<p>
This block computes the water mass flow rate that condenses.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TDewPoi</TD><TD>Dew point temperature [K]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Heat flow [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>SHR</TD><TD>Sensible heat ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>mWat_flow</TD><TD>Mass flow rate of water condensed at cooling coil [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Condensation <font color="darkgreen">&quot;Calculates rate of condensation&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
    <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TDewPoi(
    start=278.15,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">&quot;Dew point temperature&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> Q_flow(
    max=0,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Heat flow&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> SHR(
    min=0,
    max=1) <font color="darkgreen">&quot;Sensible heat ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Mass flow rate of water condensed at cooling coil&quot;</font>;</textblock>
<font color="blue">algorithm </font>
  mWat_flow := (1-SHR)*Q_flow/<font color="red">Medium.enthalpyOfVaporization</font>(T=TDewPoi);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Condensation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CoolingCapacity<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha924ebce5ae74de27acityI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.CoolingCapacity</H2>
<B>Calculates cooling capacity at given temperature and flow fraction</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha924ebce5ae74de27acityD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity">
<P><H3>Information</H3></P>

<h4>
Cooling capacity modifiers
</h4>
<p>There are two cooling capacity modifier functions: The function
<i>cap<sub>&theta;</sub></i> accounts for a performance change due to different
air temperatures and the function
cap<sub>FF </sub> accounts for a performance change due to different air flow rates,
relative to the nominal condition.
These cooling capacity modifiers are multiplied with nominal cooling capacity 
to obtain the cooling capacity of the coil at given inlet temperatures and mass flow rate as
</p>
<p align="center" style="font-style:italic;">
  Q&#775;(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>, ff) = cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>)
            cap<sub>FF</sub>(ff) Q&#775;<sub>nom</sub>,
</p>
<p>
where
<i>&theta;<sub>e,in</sub></i> is the evaporator inlet temperature and 
<i>&theta;<sub>c,in</sub></i> is the condenser inlet temperature in degrees Celsius.
<i>&theta;<sub>e,in</sub></i> is the dry-bulb temperature if the coil is dry, 
or the wet-bulb temperature if the coil is wet.
</p>
<p>
The temperature dependent cooling capacity modifier function is
<p align="center" style="font-style:italic;" >
  cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub> 
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> + 
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>,
</p>
<p>
where the six coefficients are obtained from the coil performance data record.
<p>
The flow fraction dependent cooling capacity modifier function is a polynomial 
with the normalized mass flow rate <i>ff</i> (flow fraction) as the time dependent variable.
The normalized mass flow rate is defined as
</p>
<p align="center" style="font-style:italic;">
  ff = m&#775; &frasl;  m&#775;<sub>nom</sub>,
</p>
<p>
where 
<i>m&#775;</i> is the mass flow rate and
<i>m&#775;<sub>nom</sub></i> is the nominal mass flow rate.
If the coil has multiple stages, then the nominal mass flow rate of the respective stage is used.
Hence,
</p>
<p align="center" style="font-style:italic;">
  cap<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup> 
+ b<sub>4</sub>ff<sup>3</sup> + ...
</p>
The coefficients of the equation are obtained from the coil performance data record.
</p>
<p>
It is important to specify limits of the flow fraction to ensure validity of the 
<i>cap<sub>FF</sub>(&sdot;)</i> function 
in performance record. A non-zero value of 
<i>cap<sub>FF</sub>(0)</i> will lead to an infinite large change in fluid temperatures because
<i>Q&#775; &ne; 0</i> but 
<i>m&#775; = 0</i>.
Hence, when <i>m&#775; &ne; 0</i> is below the valid range of the flow modifier function,
the coil capacity will be reduced and set to zero near <i>m&#775; = 0</i>.
</p>
<p>
<h4>Energy Input Ratio (EIR) modifiers</h4>
<p>
The Energy Input Ratio (<i>EIR</i>) is the inverse of the Coefficient of Performance (<i>COP</i>).
Similar to the cooling rate, the EIR of the coil is the product of a function
that takes into account changes in condenser and evaporator inlet temperatures,
and changes in mass flow rate.
The EIR is computed as
</p>
<p align="center" style="font-style:italic;">
  EIR(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>, ff) = EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>)
           EIR<sub>FF</sub>(ff) &frasl; COP<sub>nominal</sub>
</p>
As for the cooling rate, 
<i>EIR<sub>&theta;</sub>(&sdot;, &sdot;)</i> is
<p align="center" style="font-style:italic;" >
  EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = c<sub>1</sub> + c<sub>2</sub> &theta;<sub>e,in</sub> 
+ c<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + c<sub>4</sub> &theta;<sub>c,in</sub> + 
c<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + c<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>.
</p>
<p>
where the six coefficients are obtained from the coil performance data record, and
<i>&theta;<sub>e,in</sub></i> is the dry-bulb temperature if the coil is dry, or
the wet-bulb temperature otherwise.
</p>
<p>
Similar to the cooling ratio, the change in EIR due to a change in air mass flow rate
is 
<p align="center" style="font-style:italic;">
  EIR<sub>FF</sub>(ff) = d<sub>1</sub> + d<sub>2</sub> ff + d<sub>3</sub> ff<sup>2</sup> 
+ d<sub>4</sub>ff<sup>3</sup> + ...
</p>
<h4>Obtaining the polynomial coefficients</h4>
<p>
The package 
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
contains performance curves.
Alternatively, users can enter their own performance curves by 
making an instance of a curve in 
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
and specifying custom coefficients for the above polynomials.
The polynomial coefficients can be obtained by doing a curve fit that fits the
polynomials to a set of data. 
The site 
<a href="http://www.scipy.org/Cookbook/FittingData">
http://www.scipy.org/Cookbook/FittingData</a>
shows examples for how to fit data.
If a coil has multiple stages, then the fit need to be done for each stage.
For variable frequency coils, multiple fits need to be done for user selected
compressor speeds. For intermediate speeds, the performance data will be interpolated
by the model 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed"
>
Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed</a>.
</p>
<p>
The table below shows the polynomials explained above,
the name of the polynomial coefficients in 
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves">
Buildings.Fluid.HeatExchangers.DXCoils.Data.PerformanceCurves</a>
and the independent parameters against which the data need to be fitted.
</p>
<p>
<p>
  <table border="1" cellspacing=0 cellpadding=2 style="border-collapse:collapse;">
  <tr>
      <th>Modelica name of coefficient in data record</th>
      <th>Polynomial of the above info section</th>
       <th>Parameters for curve fit</th>
    </tr>
    <tr>
      <td><code>capFunT</code></td>
      <td><i>
        cap<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub> 
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> + 
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>
        </i></td>
        <td><i>
        cap<sub>&theta;</sub>, &theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>
        </i></td>
    </tr>
    <tr>
      <td><code>capFunFF</code></td>
      <td><i>
        cap<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup> 
        + b<sub>4</sub>ff<sup>3</sup> + ...
        </i></td>
        <td><i>
        cap<sub>FF</sub>, ff
        </i></td>
    </tr>


    <tr>
      <td><code>EIRFunT</code></td>
      <td><i>
        EIR<sub>&theta;</sub>(&theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>) = a<sub>1</sub> + a<sub>2</sub> &theta;<sub>e,in</sub> 
+ a<sub>3</sub> &theta;<sub>e,in</sub> <sup>2</sup> + a<sub>4</sub> &theta;<sub>c,in</sub> + 
a<sub>5</sub> &theta;<sub>c,in</sub> <sup>2</sup> + a<sub>6</sub> &theta;<sub>e,in</sub> &theta;<sub>c,in</sub>
        </i></td>
        <td><i>
        EIR<sub>&theta;</sub>, &theta;<sub>e,in</sub>, &theta;<sub>c,in</sub>
        </i></td>
    </tr>
    <tr>
      <td><code>EIRFunFF</code></td>
      <td><i>
        EIR<sub>FF</sub>(ff) = b<sub>1</sub> + b<sub>2</sub> ff + b<sub>3</sub> ff<sup>2</sup> 
        + b<sub>4</sub>ff<sup>3</sup> + ...
        </i></td>
        <td><i>
        EIR<sub>FF</sub>, ff
        </i></td>
    </tr>
  </table>
</p>
<p>
Note that for the above polynomials, the units for temperature is degree Celsius and not Kelvins.
</p>
<h4>Implementation</h4>
<p>
A parameter of the performance curve is the range of mass flow fraction <i>ff</i> for
which the data are valid. 
Below this range, this model reduces the cooling capacity and the energy input ratio 
so that both are zero if <i>ff &lt; ff<sub>min</sub>/4</i>, where
<i>ff<sub>min</sub></i> is the minimum flow fraction for which the performance curves are valid.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>nSta</TD><TD>&nbsp;</TD><TD>Number of coil stages (not counting the off stage)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>&nbsp;</TD><TD>Small mass flow rate for regularization [kg/s]</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage"
>Stage</A></TD><TD>sta[nSta]</TD><TD>&nbsp;</TD><TD>Performance data for this stage</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Temperature of air entering the condenser coil  [K]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate at the evaporator [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the evaporator (wet bulb for wet coil and dry bulb for dry coil) [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow[nSta]</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR[nSta]</TD><TD>Energy Input Ratio</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> CoolingCapacity <font color="darkgreen">
  &quot;Calculates cooling capacity at given temperature and flow fraction&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stage(<font color="blue">final </font>min=0) <font color="darkgreen">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TConIn(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">&quot;Temperature of air entering the condenser coil &quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> m_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Air mass flow rate at the evaporator&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TEvaIn(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">
    &quot;Temperature of air entering the evaporator (wet bulb for wet coil and dry bulb for dry coil)&quot;</font>;
    </textblock>
  <font color="blue">parameter </font>Integer nSta(min=1) <font color="darkgreen">
    &quot;Number of coil stages (not counting the off stage)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow_small <font color="darkgreen">
    &quot;Small mass flow rate for regularization&quot;</font>;
  <font color="blue">parameter </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.Stage</A>
                                                                          sta[nSta] <font color="darkgreen">
    &quot;Performance data for this stage&quot;</font>;
  <font color="blue">output </font>Real[nSta] ff(<font color="blue">each </font>min=0) <font color="darkgreen">
    &quot;Air flow fraction: ratio of actual air flow rate by rated mass flwo rate&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> Q_flow[nSta](
    <font color="blue">each </font>max=0,
    <font color="blue">each </font>unit=&quot;W&quot;) <font color="darkgreen">&quot;Total cooling capacity&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> EIR[nSta](<font color="blue">each </font>min=0) <font color="darkgreen">
    &quot;Energy Input Ratio&quot;</font>;</textblock>
<font color="darkgreen">//------------------------------Cooling capacity---------------------------------//</font>
  <font color="blue">output </font>Real cap_T[nSta](<font color="blue">each </font>min=0, <font color="blue">each </font>nominal=1, <font color="blue">each </font>start=1) <font color="darkgreen">
    &quot;Cooling capacity modification factor as a function of temperature&quot;</font>;
  <font color="blue">output </font>Real cap_FF[nSta](<font color="blue">each </font>min=0, <font color="blue">each </font>nominal=1, <font color="blue">each </font>start=1) <font color="darkgreen">
    &quot;Cooling capacity modification factor as a function of flow fraction&quot;</font>;
<font color="darkgreen">//----------------------------Energy Input Ratio---------------------------------//</font>
  <font color="blue">output </font>Real EIR_T[nSta](<font color="blue">each </font>min=0, <font color="blue">each </font>nominal=1, <font color="blue">each </font>start=1) <font color="darkgreen">
    &quot;EIR modification factor as a function of temperature&quot;</font>;
  <font color="blue">output </font>Real EIR_FF[nSta](<font color="blue">each </font>min=0, <font color="blue">each </font>nominal=1, <font color="blue">each </font>start=1) <font color="darkgreen">
    &quot;EIR modification factor as a function of flow fraction&quot;</font>;
  <font color="blue">output </font>Real corFac[nSta](<font color="blue">each </font>min=0, <font color="blue">each </font>max=1, <font color="blue">each </font>nominal=1, <font color="blue">each </font>start=1) <font color="darkgreen">
    &quot;Correction factor that is one inside the valid flow fraction, and attains zero below the valid flow fraction&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">output </font>Boolean checkBoundsTEva[nSta] <font color="darkgreen">
    &quot;Flag, used to check for out of bounds data&quot;</font>;
  <font color="blue">output </font>Boolean checkBoundsTCon[nSta] <font color="darkgreen">
    &quot;Flag, used to check for out of bounds data&quot;</font>;

<font color="blue">initial </font><font color="blue">algorithm </font>
  <font color="darkgreen">// Verify correctness of performance curves, and write warning if error is bigger than 10%</font>
   <font color="blue">for </font>iSta<font color="blue"> in </font>1:nSta<font color="blue"> loop</font>
    <font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</font>(
       <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(
         a=sta[iSta].perCur.capFunT,
         x1=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].nomVal.TEvaIn_nominal),
         x2=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].nomVal.TConIn_nominal)),
         msg=&quot;Capacity as a function of temperature &quot;,
         curveName=&quot;sta[&quot; +<font color="red"> String</font>(iSta) + &quot;].perCur.capFunT&quot;);

    <font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</font>(
       <font color="red">Buildings.Fluid.Utilities.extendedPolynomial</font>(
         x=1,
         c=sta[iSta].perCur.capFunFF,
         xMin=sta[iSta].perCur.ffMin,
         xMax=sta[iSta].perCur.ffMin),
         msg=&quot;Capacity as a function of normalized mass flow rate &quot;,
         curveName=&quot;sta[&quot; +<font color="red"> String</font>(iSta) + &quot;].perCur.capFunFF&quot;);

    <font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</font>(
       <font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(
         a=sta[iSta].perCur.EIRFunT,
         x1=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].nomVal.TEvaIn_nominal),
         x2=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].nomVal.TConIn_nominal)),
         msg=&quot;EIR as a function of temperature &quot;,
         curveName=&quot;sta[&quot; +<font color="red"> String</font>(iSta) + &quot;].perCur.EIRFunT&quot;);

    <font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.warnIfPerformanceOutOfBounds</font>(
       <font color="red">Buildings.Fluid.Utilities.extendedPolynomial</font>(
         x=1,
         c=sta[iSta].perCur.EIRFunFF,
         xMin=sta[iSta].perCur.ffMin,
         xMax=sta[iSta].perCur.ffMin),
         msg=&quot;EIR as a function of normalized mass flow rate &quot;,
         curveName=&quot;sta[&quot; +<font color="red"> String</font>(iSta) + &quot;].perCur.EIRFunFF&quot;);
   <font color="blue">end for</font>;
   <font color="blue">for </font>iSta<font color="blue"> in </font>1:nSta<font color="blue"> loop</font>
     checkBoundsTEva[iSta] :=true;
     checkBoundsTCon[iSta] :=true;
   <font color="blue">end for</font>;

<font color="blue">equation </font>
  <font color="darkgreen">  // Modelica requires to evaluate the when() block for each element in iSta=1...nSta.</font>
  <font color="darkgreen">  // But we only want to check the stage that is currently running.</font>
  <font color="darkgreen">  // Hence, the test starts with stage == iSta.</font>
    <font color="blue">for </font>iSta<font color="blue"> in </font>1:nSta<font color="blue"> loop</font>
   <font color="darkgreen">// Check whether data are outside of bounds</font>
      <font color="blue">when </font>( stage == iSta<font color="blue"> and </font><font color="red">pre</font>(checkBoundsTEva[stage]))<font color="blue"> then</font>
      <font color="red">  assert</font>( <font color="blue">not </font>(TEvaIn &gt; sta[stage].perCur.TEvaInMax<font color="blue"> or </font>TEvaIn &lt; sta[stage].perCur.TEvaInMin),
        &quot;*** Warning: Evaporator temperature TEvaIn is out of bounds in DX coil model at time = &quot; +<font color="red"> String</font>(time) + &quot;.
        stage     = &quot; +<font color="red"> String</font>(iSta) + &quot;
        TEvaInMin = &quot; +<font color="red"> String</font>(sta[iSta].perCur.TEvaInMin) + &quot; Kelvin (&quot; +
                        <font color="red">String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].perCur.TEvaInMin)) + &quot; degC)
        TEvaIn    = &quot; +<font color="red"> String</font>(TEvaIn) + &quot; Kelvin (&quot; +<font color="red"> String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TEvaIn)) + &quot; degC)
        TEvaInMax = &quot; +<font color="red"> String</font>(sta[iSta].perCur.TEvaInMax) + &quot; Kelvin (&quot; +
                        <font color="red">String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].perCur.TEvaInMax)) + &quot; degC)
        Extrapolation can introduce large errors.
        This warning will only be reported once for each stage.&quot;,
        level=  AssertionLevel.warning);
        checkBoundsTEva[iSta] = false;
      <font color="blue">end when</font>;
      <font color="blue">when </font>( stage == iSta<font color="blue"> and </font><font color="red">pre</font>(checkBoundsTCon[stage]))<font color="blue"> then</font>
      <font color="red">  assert</font>( <font color="blue">not </font>( TConIn &gt; sta[stage].perCur.TConInMax<font color="blue"> or </font>TConIn &lt; sta[stage].perCur.TConInMin),
        &quot;*** Warning: Condenser temperature TConIn is out of bounds in DX coil model at time = &quot; +<font color="red"> String</font>(time) + &quot;.
        stage     = &quot; +<font color="red"> String</font>(iSta) + &quot;
        TConInMin = &quot; +<font color="red"> String</font>(sta[iSta].perCur.TConInMin) + &quot; Kelvin (&quot; +
                        <font color="red">String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].perCur.TConInMin)) + &quot; degC)
        TConIn    = &quot; +<font color="red"> String</font>(TConIn) + &quot; Kelvin (&quot; +<font color="red"> String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TConIn)) + &quot; degC)
        TConInMax = &quot; +<font color="red"> String</font>(sta[iSta].perCur.TConInMax) + &quot; Kelvin (&quot; +
                        <font color="red">String</font>(<font color="red">Modelica.SIunits.Conversions.to_degC</font>(sta[iSta].perCur.TConInMax)) + &quot; degC)
        Extrapolation can introduce large errors.
        This warning will only be reported once for each stage.&quot;,
        level=  AssertionLevel.warning);
        checkBoundsTCon[iSta] = false;
      <font color="blue">end when</font>;
    <font color="blue">end for</font>;

<font color="blue">if </font>stage &gt; 0<font color="blue"> then</font>
    <font color="blue">for </font>iSta<font color="blue"> in </font>1:nSta<font color="blue"> loop</font>

    <font color="darkgreen">// Compute performance</font>
    ff[iSta]=<font color="red">Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=m_flow,
      x2=m_flow_small,
      deltaX=m_flow_small/10)/sta[iSta].nomVal.m_flow_nominal;
  <font color="darkgreen">//-------------------------Cooling capacity modifiers----------------------------//</font>
    <font color="darkgreen">// Compute the DX coil capacity fractions, using a biquadratic curve.</font>
    <font color="darkgreen">// Since the regression for capacity can have negative values</font>
    <font color="darkgreen">// (for unreasonable temperatures), we constrain its return value to be</font>
    <font color="darkgreen">// non-negative.</font>
    cap_T[iSta] =<font color="red">Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=<font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(
        a=sta[iSta].perCur.capFunT,
        x1=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TEvaIn),
        x2=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TConIn)),
      x2=0.001,
      deltaX=0.0001) <font color="darkgreen">
        &quot;Cooling capacity modification factor as function of temperature&quot;</font>;
    cap_FF[iSta] =<font color="red"> Buildings.Fluid.Utilities.extendedPolynomial</font>(
      x=ff[iSta],
      c=sta[iSta].perCur.capFunFF,
      xMin=sta[iSta].perCur.ffMin,
      xMax=sta[iSta].perCur.ffMin);
    <font color="darkgreen">//-----------------------Energy Input Ratio modifiers--------------------------//</font>
    EIR_T[iSta] =<font color="red">Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=<font color="red">Buildings.Utilities.Math.Functions.biquadratic</font>(
        a=sta[iSta].perCur.EIRFunT,
        x1=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TEvaIn),
        x2=<font color="red">Modelica.SIunits.Conversions.to_degC</font>(TConIn)),
      x2=0.001,
      deltaX=0.0001);
    EIR_FF[iSta] =<font color="red"> Buildings.Fluid.Utilities.extendedPolynomial</font>(
       x=ff[iSta],
       c=sta[iSta].perCur.EIRFunFF,
       xMin=sta[iSta].perCur.ffMin,
       xMax=sta[iSta].perCur.ffMin) <font color="darkgreen">
        &quot;Cooling capacity modification factor as function of flow fraction&quot;</font>;
    <font color="darkgreen">//------------ Correction factor for flow rate outside of validity of data ---//</font>
    corFac[iSta] =<font color="red">Buildings.Utilities.Math.Functions.smoothHeaviside</font>(
       x=ff[iSta] - sta[iSta].perCur.ffMin/4,
       delta=sta[iSta].perCur.ffMin/4);

    Q_flow[iSta] = corFac[iSta]*cap_T[iSta]*cap_FF[iSta]*sta[iSta].nomVal.Q_flow_nominal;
    EIR[iSta]    = corFac[iSta]*EIR_T[iSta]*EIR_FF[iSta]/sta[iSta].nomVal.COP_nominal;
    <font color="blue">end for</font>;
  <font color="blue">else</font><font color="darkgreen"> //cooling coil off</font>
   ff     =<font color="red"> fill</font>(0, nSta);
   cap_T  =<font color="red"> fill</font>(0, nSta);
   cap_FF =<font color="red"> fill</font>(0, nSta);
   EIR_T  =<font color="red"> fill</font>(0, nSta);
   EIR_FF =<font color="red"> fill</font>(0, nSta);
   corFac =<font color="red"> fill</font>(0, nSta);
   Q_flow =<font color="red"> fill</font>(0, nSta);
   EIR    =<font color="red"> fill</font>(0, nSta);
  <font color="blue">end if</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>CoolingCapacity;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DryCoil<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.DryCoil</H2>
<B>Calculates dry coil condition</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha7b1370a8257fcdfcyCoilD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil">
<P><H3>Information</H3></P>

<p>
This block calculates the rate of cooling and the coil surface condition
under the assumption that the coil is dry.
</p>
<p>
The wet coil conditions are computed in
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil</a>.
See 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</A> (Partial block for dry and wet coil conditions).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true for coil with variable speed</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TDry</TD><TD>Dry bulb temperature of air at ADP [K]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DryCoil <font color="darkgreen">&quot;Calculates dry coil condition&quot;</font>
 <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TDry(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=233.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at ADP&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint</A> appDryPt(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>datCoi=datCoi,
    <font color="blue">final </font>variableSpeedCoil=variableSpeedCoil) <font color="darkgreen">
    &quot;Calculates air properties at dry coil condition&quot;</font>;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(appDryPt.TDry, TDry);
  <font color="red">connect</font>(hEvaIn, appDryPt.hEvaIn);
  <font color="red">connect</font>(XEvaIn, appDryPt.XEvaIn);
  <font color="red">connect</font>(p, appDryPt.p);
  <font color="red">connect</font>(m_flow, appDryPt.m_flow);
  <font color="red">connect</font>(speRat, appDryPt.speRat);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(speShiQ_flow.y, appDryPt.Q_flow);
  <font color="red">connect</font>(TEvaIn, cooCap.TEvaIn);
  <font color="red">connect</font>(appDryPt.stage, stage);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DryCoil;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DryWetSelector<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.DryWetSelector</H2>
<B>Selects results from dry or wet coil</B><p>
<IMG SRC="Buildings.Fluid.HeatExchaf63652c0b5cf61f2ectorD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector">
<P><H3>Information</H3></P>

<p>
This block smoothly transitions the results from the dry coil and
the wet coil computation.
The independent variable for the transition is the difference between
the water mass fractions at the apparatus dew point, as computed by the wet coil model,
and the coil inlet mass fraction. 
</p>
<P>

<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XADP</TD><TD>Mass fraction at ADP</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>EIRWet</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>QWet_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>SHRWet</TD><TD>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TADPWet</TD><TD>Dry bulb temperature of air at ADP [K]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>mWetWat_flow</TD><TD>Mass flow rate of water condensed at cooling coil [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>EIRDry</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>QDry_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TADPDry</TD><TD>Dry bulb temperature of air at ADP [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>SHR</TD><TD>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TADP</TD><TD>Dry bulb temperature of air at ADP [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>mWat_flow</TD><TD>Mass flow rate of water condensed at cooling coil [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> DryWetSelector <font color="darkgreen">&quot;Selects results from dry or wet coil&quot;</font>

 <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> deltaX=0.0001 <font color="darkgreen">
    &quot;Range of x where transition between dry and wet coil occurs&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XEvaIn <font color="darkgreen">&quot;Inlet air mass fraction&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XADP <font color="darkgreen">&quot;Mass fraction at ADP&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> EIRWet <font color="darkgreen">&quot;Energy Input Ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> QWet_flow(
    max=0,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Total cooling capacity&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> SHRWet(
    min=0,
    max=1.0) <font color="darkgreen">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TADPWet(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at ADP&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> mWetWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Mass flow rate of water condensed at cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> EIRDry <font color="darkgreen">&quot;Energy Input Ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> QDry_flow(max=0, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Total cooling capacity&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TADPDry(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at ADP&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> EIR <font color="darkgreen">&quot;Energy Input Ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> Q_flow(
    max=0,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Total cooling capacity&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> SHR(
    min=0,
    max=1.0) <font color="darkgreen">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TADP(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at ADP&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Mass flow rate of water condensed at cooling coil&quot;</font>;</textblock>

 <font color="blue">output </font>Real fraDry(min=0, max=1) <font color="darkgreen">
    &quot;Fraction of results that are taken from the dry coil model&quot;</font>;
 <font color="blue">output </font>Real fraWet(min=0, max=1) <font color="darkgreen">
    &quot;Fraction of results that are taken from the wet coil model&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">output </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> dX <font color="darkgreen">
    &quot;Difference between apparatus dew point mass fraction of wet coil and inlet air mass fraction&quot;</font>;
<font color="blue">equation </font>
  dX = XADP-XEvaIn;
  fraDry=<font color="red">Buildings.Utilities.Math.Functions.spliceFunction</font>(
    pos=+1,
    neg=0,
    x= dX+deltaX,
    deltax= deltaX);
  fraWet=1-fraDry;
  EIR       = fraDry * EIRDry    + fraWet * EIRWet;
  Q_flow    = fraDry * QDry_flow + fraWet * QWet_flow;
  SHR       = fraDry             + fraWet * SHRWet;
  TADP      = fraDry * TADPDry   + fraWet * TADPWet;
  mWat_flow =                      fraWet * mWetWat_flow;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DryWetSelector;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DXCooling<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha674bdd2f2735086colingI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.DXCooling</H2>
<B>DX cooling coil operation </B><p>
<IMG SRC="Buildings.Fluid.HeatExcha674bdd2f2735086colingD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling">
<P><H3>Information</H3></P>

<p>
This block combines the models for the dry coil and the wet coil.
Output of the block is the coil performance which, depending on the
mass fraction at the apparatus dew point temperature and 
the mass fraction of the coil inlet air,
may be from the dry coil, the wet coil, or a weighted average of the two.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</A> (Partial block for DX coil).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true for coil with variable speed</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TCoiSur</TD><TD>Coil surface temperature [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>mWat_flow</TD><TD>Mass flow rate of water condensed at cooling coil [kg/s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>SHR</TD><TD>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DXCooling <font color="darkgreen">&quot;DX cooling coil operation &quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;

  <font color="blue">constant </font>Boolean variableSpeedCoil <font color="darkgreen">
    &quot;Flag, set to true for coil with variable speed&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TCoiSur(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=240,
    max=400) <font color="darkgreen">&quot;Coil surface temperature&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
>WetCoil</A> wetCoi(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>variableSpeedCoil = variableSpeedCoil,
    <font color="blue">final </font>datCoi=datCoi) <font color="darkgreen">&quot;Wet coil condition&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>DryCoil</A> dryCoi(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>variableSpeedCoil = variableSpeedCoil,
    <font color="blue">final </font>datCoi=datCoi) <font color="darkgreen">&quot;Dry coil condition&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryWetSelector</A> dryWet <font color="darkgreen">
    &quot;Actual coil condition&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Mass flow rate of water condensed at cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> SHR(
    min=0,
    max=1.0) <font color="darkgreen">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</font>;</textblock>
<font color="blue">equation </font>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(TConIn, wetCoi.TConIn);
  <font color="red">connect</font>(TConIn, dryCoi.TConIn);
  <font color="red">connect</font>(m_flow, wetCoi.m_flow);
  <font color="red">connect</font>(m_flow, dryCoi.m_flow);
  <font color="red">connect</font>(TEvaIn, wetCoi.TEvaIn);
  <font color="red">connect</font>(TEvaIn, dryCoi.TEvaIn);
  <font color="red">connect</font>(p, wetCoi.p);
  <font color="red">connect</font>(XEvaIn, wetCoi.XEvaIn);
  <font color="red">connect</font>(hEvaIn, wetCoi.hEvaIn);
  <font color="red">connect</font>(hEvaIn, dryCoi.hEvaIn);
  <font color="red">connect</font>(p, dryCoi.p);
  <font color="red">connect</font>(XEvaIn, dryCoi.XEvaIn);
  <font color="red">connect</font>(speRat, wetCoi.speRat);
  <font color="red">connect</font>(speRat, dryCoi.speRat);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(XEvaIn, dryWet.XEvaIn);
  <font color="red">connect</font>(stage, dryCoi.stage);
  <font color="red">connect</font>(stage, wetCoi.stage);
  <font color="red">connect</font>(dryWet.EIRWet, wetCoi.EIR);
  <font color="red">connect</font>(wetCoi.Q_flow, dryWet.QWet_flow);
  <font color="red">connect</font>(wetCoi.SHR, dryWet.SHRWet);
  <font color="red">connect</font>(wetCoi.mWat_flow, dryWet.mWetWat_flow);
  <font color="red">connect</font>(dryCoi.EIR, dryWet.EIRDry);
  <font color="red">connect</font>(dryCoi.Q_flow, dryWet.QDry_flow);
  <font color="red">connect</font>(dryCoi.TDry, dryWet.TADPDry);
  <font color="red">connect</font>(wetCoi.TADP, dryWet.TADPWet);
  <font color="red">connect</font>(dryWet.EIR, EIR);
  <font color="red">connect</font>(dryWet.Q_flow, Q_flow);
  <font color="red">connect</font>(dryWet.SHR, SHR);
  <font color="red">connect</font>(dryWet.TADP, TCoiSur);
  <font color="red">connect</font>(dryWet.mWat_flow, mWat_flow);
  <font color="red">connect</font>(wetCoi.XADP, dryWet.XADP);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DXCooling;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EssentialParameters<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.EssentialParameters</H2>
<B>A partial block for essential parameters</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha292b0d1e3b2d3401etersD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters">
<P><H3>Information</H3></P>

<p>
This partial block declares parameters that are required by most classes
in the package
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils"
> 
Buildings.Fluid.HeatExchangers.DXCoils</a>.
</p>
<P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">block</font> EssentialParameters <font color="darkgreen">
  &quot;A partial block for essential parameters&quot;</font>

<textblock type="annotcomp" expanded="false">  <font color="blue">parameter </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil</A>
                                                                 datCoi <font color="darkgreen">
    &quot;Performance data&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer nSta=datCoi.nSta <font color="darkgreen">&quot;Number of stages&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>EssentialParameters;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Evaporation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha77701eece82d67eaationI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.Evaporation</H2>
<B>Model that computes evaporation of water that accumulated on the coil surface</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha77701eece82d67eaationD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation">
<P><H3>Information</H3></P>

<p>
This model computes the water accumulation on the surface of a cooling coil.
When the cooling coil operates, water is accumulated on the coil surface
up to a maximum amount of water before water starts to drain away
from the coil.
When the coil is off, the accumulated water evaporates into
the air stream.
</p>
<h4>Physical description</h4>
<p>
The calculations are based on Shirey et al. (2006).
</p>
<h5>Parameters</h5>
<p>
The maximum amount of water that can be accumulated is computed
based on the following model, where we used the convention that latent heat
removed from the air is negative:
The parameter <i>t<sub>wet</sub></i>
defines how long it takes for condensate to drip of the coil, assuming the
coil starts completely dry and operates at the nominal operating point.
Henderson et al. (2003) measured values for 
<i>t<sub>wet</sub></i>
from <i>16.5</i> minutes (<i>990</i> seconds) to 
<i>29</i> minutes (<i>1740</i> seconds). 
Thus, we use a default value of <i>t<sub>wet</sub>=1400</i> seconds.
The maximum amount of water that can accumulate on the coil is
<p align="center" style="font-style:italic;">
  m<sub>max</sub> = -Q&#775;<sub>L,nom</sub> &nbsp; t<sub>wet</sub> &frasl; h<sub>fg</sub> 
</p>
where
<i>Q&#775;<sub>L,nom</sub>&lt;0</i> is the latent capacity at the nominal conditions and
<i>h<sub>fg</sub></i> is the latent heat of evaporation.
</p>
<p>
When the coil is off, the water that has been accumulated on the coil 
evaporates into the air. The rate of water vapor evaporation at nominal operating
conditions is defined by the parameter <i>&gamma;<sub>nom</sub></i>. The definition of
<i>&gamma;<sub>nom</sub></i> is
<p align="center" style="font-style:italic;">
  &gamma;<sub>nom</sub> = Q&#775;<sub>e,nom</sub> &frasl; Q&#775;<sub>L,nom</sub>,
</p>
where 
<i>Q&#775;<sub>e,nom</sub>&lt;0</i> is the rate of evaporation from the coil surface into 
the air stream right after the coil is switched off.
The default value is <i>&gamma;<sub>nom</sub> = 1.5</i>.
</p>
<h5>Time dependent calculations</h5>
<p>
First, we discuss the accumulation of water on the coil.
The rate of water accumulation is computed as
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>wat</sub>(t)
</p>
where
<i>m&#775;<sub>wat</sub>(t) &le; 0</i> is the water vapor mass flow rate that is extracted
from the air at the current operating conditions.
The actual water vapor mass flow rate that is removed 
from the air stream is as computed by the steady-state 
cooling coil performance model
because for the coil outlet conditions, it does not matter whether the water
accumulates on the coil or drips away from the coil.
The initial value for the water accumulation is zero at the start of the simulation, and
set to whatever water remains after the coil has been switched off and 
the water partially or completely evaporated into the air stream.
</p>
<p>
Now, we discuss the evaporation of the water on the coil surface into the air
when the coil is off.
The model in Shirey et al. (2006) is based on the assumption that the wet coil acts
as an evaporative cooler.
The change of water on the coil is
</p>
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>max</sub>(t) &eta;(t),
</p>
<p>
where
<i>m&#775;<sub>max</sub>(t) &gt; 0</i> is 
the maximum water mass flow rate from the coil to the air and
<i>&eta;(t) &isin; [0, 1]</i> is the mass transfer effectiveness.
For an evaporative cooler, 
</p>
<p align="center" style="font-style:italic;">
  &eta;(t) = 1-exp(-NTU(t)),
</p>
where
<i>NTU(t)=(hA)<sub>m</sub>/C&#775;<sub>a</sub></i> are the number of mass transfer units and 
<i>C&#775;<sub>a</sub></i> is the air capacity flow rate.
The mass transfer coefficient <i>(hA)<sub>m</sub></i>
is assumed to be proportional to the wet coil area, which
is assumed to be equal to the ratio <i>m(t) &frasl; m<sub>max</sub>(t)</i>.
Hence,
</p>
<p align="center" style="font-style:italic;">
  (hA)<sub>m</sub>(t) &prop; m(t) &frasl; m<sub>max</sub>(t).
</p>
<p>
Furthermore, the mass transfer coefficient depends on the velocity, and 
hence mass flow rate, as
</p>
<p align="center" style="font-style:italic;">
  (hA)<sub>m</sub>(t) &prop; m&#775;<sub>a</sub>(t)<sup>0.8</sup>,
</p>
<p>
where
<i>m&#775;<sub>a</sub>(t)</i> is the current air mass flow rate,
from which follows that
</p>
<p align="center" style="font-style:italic;">
  NTU(t) &prop; m&#775;<sub>a</sub>(t)<sup>-0.2</sup>.
</p>
<p>
Therefore, the water mass flow rate from the coil into the
air stream is
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>wat</sub>(t) = m&#775;<sub>max</sub>(t) 
  (1-exp(-K  
          (m(t) &frasl; m<sub>tot</sub>)
          (m&#775;<sub>a</sub>(t) &frasl; m&#775;<sub>a,nom</sub>)<sup>-0.2</sup>

  )),
</p>
<p>
where
<i>K &gt; 0</i> is a constant to be determined below
and the rate of change of water on the coil surface is as before
</p>
<p align="center" style="font-style:italic;">
  dm(t)&frasl;dt = -m&#775;<sub>wat</sub>(t).
</p>
<p>
The maximum mass transfer is
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>max</sub> = m&#775;<sub>a</sub> (x<sub>wb</sub>(t) - x(t)),
</p>
<p>
where
<i>x<sub>wb</sub>(t)</i> is the moisture content of air
at the wet bulb state and
<i>x(t)</i> is the actual moisture content of the air.
</p>
<p>
The constant <i>K</i> is determined from the nominal conditions as follows:
At the nominal condition, we have
<i>m(t) &frasl; m<sub>tot</sub>=1</i> and
<i>m&#775;<sub>a</sub>(t) &frasl; m&#775;<sub>a,nom</sub>=1</i>,
and, hence,
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>nom</sub> = m&#775;<sub>max,nom</sub> (1-e<sup>-K</sup>).
</p>
<p>
Because 
</p>
<p align="center" style="font-style:italic;">
  m&#775;<sub>nom</sub> = - &gamma; Q&#775;<sub>L,nom</sub> &frasl; h<sub>fg</sub>,
</p>
<p>
it follows that
</p>
<p align="center" style="font-style:italic;">
  K = -ln(    
  1 + &gamma;<sub>nom</sub> Q&#775;<sub>L,nom</sub> &frasl;
  m&#775;<sub>a,nom</sub> &frasl; h<sub>fg</sub> &frasl;
  (x<sub>wb,nom</sub>-x<sub>nom</sub>)
),
</p>
<p>
where
<i>x<sub>nom</sub></i> is the humidity ratio at the coil at nominal condition and
<i>x<sub>wb,nom</sub></i> is the humidity ratio at the wet bulb condition. 
Note that the <i>ln(&middot;)</i> in the above equation requires that the argument
is positive. See the implementation section below for how this is implemented.
</p>
<h4>Implementation</h4>
<h5>Potential for moisture transfer</h5>
<p>
For the potential that causes the moisture transfer,
the difference in mass fraction between the current 
coil air and the coil air at the wet bulb conditions is used, provided that
the air mass flow rate is within <i>1&frasl;3</i> of the nominal mass flow rate.
For smaller air mass flow rates, the outlet conditions are used to ensure that
the outlet conditions are not supersaturated air.
The transition between these two driving potential is continuously differentiable 
in the mass flow rate.
</p>
<h5>Computation of mass transfer effectiveness</h5>
<p>
To evaluate
</p>
<p align="center" style="font-style:italic;">
  K = -ln(    
  1 + &gamma;<sub>nom</sub> Q&#775;<sub>L,nom</sub> &frasl;
  m&#775;<sub>a,nom</sub> &frasl; h<sub>fg</sub> &frasl;
  (x<sub>wb,nom</sub>-x<sub>nom</sub>)
),
</p>
<p>
the argument of the <i>ln(&middot;)</i> function must be positive. 
However, often the parameter <i>&gamma;<sub>nom</sub></i> is not known, and the default
value of 
<i>&gamma;<sub>nom</sub> = 1.5</i> may yield negative arguments for 
the function <i>ln(&middot;)</i>.
We therefore set a lower bound on <i>&gamma;<sub>nom</sub></i> as follows:
Note that <i>&gamma;<sub>nom</sub></i> must be such that
<i>0 &lt; m&#775;<sub>wat,nom</sub> &lt; m&#775;<sub>max,nom</sub></i>.
This condition is equivalent to
</p>
<p align="center" style="font-style:italic;">
  0 &lt; &gamma;<sub>nom</sub> &lt; m&#775;<sub>a,nom</sub> (x<sub>wb,nom</sub>-x<sub>nom</sub>)
  h<sub>fg</sub>
  &frasl; (-Q&#775;<sub>L,nom</sub>)
</p>
<p>
If <i>&gamma;<sub>nom</sub></i> were equal to the right hand side, then the
mass transfer effectiveness would be one. Hence, we set the maximum value of
&gamma;<sub>nom,max</sub> to 
</p>
<p align="center" style="font-style:italic;">
  &gamma;<sub>nom,max</sub> = 0.8  m&#775;<sub>a,nom</sub> (x<sub>wb,nom</sub>-x<sub>nom</sub>)
  h<sub>fg</sub>
  &frasl; Q&#775;<sub>L,nom</sub>,
</p>
<p>
which corresponds to a mass transfer effectiveness of <i>0.8</i>. If 
<i>&gamma;<sub>nom</sub> &gt; &gamma;<sub>nom,max</sub></i>, the model sets
<i>&gamma;<sub>nom</sub>=&gamma;<sub>nom,max</sub></i> and writes a warning message.
</p>
<h5>Regularization near zero air mass flow rate</h5>
<p>
To regularize the equations near zero air mass flow rate and zero humidity on the coil, the
following conditions have been imposed in such a way that the model
is once continuously differentiable with bounded derivatives on compact sets:
<ul>
<li>
We impose that 
<i>m&#775;<sub>wat</sub>(t) &rarr; 0</i> as <i>m &rarr; 0</i> 
to ensure that there is no evaporation if no water remains on the coil.
</li>
<li>
We impose that 
<i>m&#775;<sub>wat</sub>(t) &frasl; m&#775;<sub>a</sub>(t) &rarr; 0</i> 
as <i>m&#775;<sub>a</sub>(t) &rarr; 0</i> 
to ensure that the evaporation mass flow rate remains bounded at zero air flow rate
and that it is symmetric near zero without having to trigger an event.
</li>
</ul>
This is implemented by replacing for <i>|m&#775;<sub>a</sub>(t)| &lt; &delta;</i>
the equation for the evaporation mass flow rate by
</p>
<p align="center" style="font-style:italic;">
 m&#775;<sub>wat</sub>(t) = C m m&#775;<sub>a</sub><sup>2</sup>(t) 
 (x<sub>wb,nom</sub>-x<sub>nom</sub>),
</p>
<p>
where
<i>C=K &delta;<sup>-0.2</sup></i> which approximates continuity at 
<i>|m&#775;<sub>a</sub>|=&delta;</i>. Note that differentiability is ensured
because the two equations are combined using the function
<A HREF="Buildings_Utilities_Math_Functions.html#Buildings.Utilities.Math.Functions.spliceFunction"
>
Buildings.Utilities.Math.Functions.spliceFunction</a>.
Also note that based on physics, we would not have to square
<i>m&#775;<sub>a</sub></i>, but this was done to avoid an event
that would be triggered if <i>|m&#775;<sub>a</sub>|</i> would have been used.
Since the equation is active only at very small air flow rates when the fan is off,
the error is negligible for typical applications.
</p>
<h4>References</h4>
<p>
Hugh I. Henderson, Jr., Don B. Shirey III and Richard A. Raustad.
Understanding the Dehumidification Performance of Air-Conditioning Equipment at Part-Load Conditions.
<i>CIBSE/ASHRAE Conference</i>, Edinburgh, Scotland, September 2003.
</p>
<p>
Don B. Shirey III, Hugh I. Henderson, Jr. and Richard A. Raustad.
<a href="http://www.fsec.ucf.edu/en/publications/pdf/FSEC-CR-1537-05.pdf">
Understanding the Dehumidification Performance of Air-Conditioning Equipment at Part-Load Conditions.</a>
Florida Solar Energy Center, Technical Report FSEC-CR-1537-05, January 2006.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</A></TD><TD>nomVal</TD><TD>&nbsp;</TD><TD>Nominal values</TD></TR>
<TR><TD>Boolean</TD><TD>computeReevaporation</TD><TD>true</TD><TD>Set to true to compute reevaporation of water that accumulated on coil</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>mAir_flow_small</TD><TD>0.1*abs(nomVal.m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>on</TD><TD>Control signal, true if compressor is on</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>mWat_flow</TD><TD>Water flow rate added into the medium [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TWat</TD><TD>Temperature of liquid that is drained from or injected into volume [K]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>mAir_flow</TD><TD>Air mass flow rate [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaOut</TD><TD>Water mass fraction [1]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaOut</TD><TD>Air temperature [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>mTotWat_flow</TD><TD>Total moisture mass flow rate into the air stream [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Evaporation <font color="darkgreen">
  &quot;Model that computes evaporation of water that accumulated on the coil surface&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
    <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;

<textblock type="annotcomp" expanded="false">  <font color="blue">parameter </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues</A>
     nomVal <font color="darkgreen">&quot;Nominal values&quot;</font>;</textblock>

    <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mAir_flow_small(min=0)=
      0.1*<font color="red">abs</font>(nomVal.m_flow_nominal) <font color="darkgreen">
    &quot;Small mass flow rate for regularization of zero flow&quot;</font>;

  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> mMax(min=0, fixed=false) <font color="darkgreen">
    &quot;Maximum mass of water that can accumulate on the coil&quot;</font>;

  <font color="blue">parameter </font>Boolean computeReevaporation=true <font color="darkgreen">
    &quot;Set to true to compute reevaporation of water that accumulated on coil&quot;</font>;

  <font color="darkgreen">////////////////////////////////////////////////////////////////////////////////</font>
  <font color="darkgreen">// Input and output signals</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> on <font color="darkgreen">
    &quot;Control signal, true if compressor is on&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> mWat_flow(<font color="blue">final </font>quantity=&quot;MassFlowRate&quot;,
                                                 <font color="blue">final </font>unit = &quot;kg/s&quot;) <font color="darkgreen">
    &quot;Water flow rate added into the medium&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TWat(<font color="blue">final </font>quantity=&quot;Temperature&quot;,
                                            <font color="blue">final </font>unit = &quot;K&quot;,
                                            displayUnit = &quot;degC&quot;) <font color="darkgreen">
    &quot;Temperature of liquid that is drained from or injected into volume&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> mAir_flow(<font color="blue">final </font>quantity=&quot;MassFlowRate&quot;,
                                                 <font color="blue">final </font>unit = &quot;kg/s&quot;) <font color="darkgreen">
    &quot;Air mass flow rate&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XEvaOut(min=0, max=1, unit=&quot;1&quot;) <font color="darkgreen">
    &quot;Water mass fraction&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TEvaOut(
    <font color="blue">final </font>quantity=&quot;Temperature&quot;,
    <font color="blue">final </font>unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">&quot;Air temperature&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> mTotWat_flow(<font color="blue">final </font>quantity=&quot;MassFlowRate&quot;,
                                                     <font color="blue">final </font>unit = &quot;kg/s&quot;) <font color="darkgreen">
    &quot;Total moisture mass flow rate into the air stream&quot;</font>;</textblock>

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> m(start=0, nominal=-5000*1400/2257E3) <font color="darkgreen">
    &quot;Mass of water that accumulated on the coil&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> mEva_flow(max=0) <font color="darkgreen">
    &quot;Moisture mass flow rate that evaporates into air stream&quot;</font>;
  <font color="darkgreen">////////////////////////////////////////////////////////////////////////////////</font>
  <font color="darkgreen">// Protected parameters and variables</font>
<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QSen_flow_nominal(max=0, fixed=false) <font color="darkgreen">
    &quot;Nominal sensible heat flow rate (negative number)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.HeatFlowRate"
>Modelica.SIunits.HeatFlowRate</A> QLat_flow_nominal(max=0, fixed=false) <font color="darkgreen">
    &quot;Nominal latent heat flow rate (negative number)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaIn_nominal(fixed=false) <font color="darkgreen">
    &quot;Mass fraction at nominal inlet conditions&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaOut_nominal(fixed=false) <font color="darkgreen">
    &quot;Mass fraction at nominal outlet conditions&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEvaOut_nominal(fixed=false) <font color="darkgreen">
    &quot;Dry bulb temperature at nominal outlet conditions&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEvaWetBulOut_nominal(fixed=false) <font color="darkgreen">
    &quot;Wet bulb temperature at nominal outlet conditions&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaWetBulOut_nominal(fixed=false) <font color="darkgreen">
    &quot;Water vapor mass fraction at nominal outlet wet bulb condition&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> dX_nominal(max=0, fixed=false) <font color="darkgreen">
    &quot;Driving potential for mass transfer&quot;</font>;

  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_fg(fixed=false) <font color="darkgreen">
    &quot;Latent heat of vaporization&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real gammaMax(min=0, fixed=false) <font color="darkgreen">&quot;Maximum value for gamma&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real logArg(min=0, fixed=false) <font color="darkgreen">
    &quot;Argument for the log function&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real K(min=0, fixed=false) <font color="darkgreen">
    &quot;Coefficient used for convective mass transfer&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real K2(min=0, fixed=false) <font color="darkgreen">
    &quot;Coefficient used for convective mass transfer&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaWetBulOut <font color="darkgreen">
    &quot;Water vapor mass fraction at wet bulb conditions at air inlet&quot;</font>;

  <font color="darkgreen"> // off = not on is required because Dymola 2013 fails during model</font>
  <font color="darkgreen"> // check if on, which is an input connector, is used in the edge() function</font>
  Boolean off=<font color="blue">not </font>on <font color="darkgreen">&quot;Signal, true when component is off&quot;</font>;

  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEvaWetBulOut <font color="darkgreen">&quot;Wet bulb temperature at coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> dX <font color="darkgreen">
    &quot;Difference in water vapor concentration that drives mass transfer&quot;</font>;

  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</A> cpAir_nominal=
     Buildings.Media.PerfectGases.Common.SingleGasData.Air.cp <font color="darkgreen">
    &quot;Specific heat capacity of air&quot;</font>;
  <font color="blue">constant </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</A> cpSte_nominal=
     Buildings.Media.PerfectGases.Common.SingleGasData.H2O.cp <font color="darkgreen">
    &quot;Specific heat capacity of water vapor&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  QSen_flow_nominal=nomVal.SHR_nominal * nomVal.Q_flow_nominal;
  QLat_flow_nominal=nomVal.Q_flow_nominal-QSen_flow_nominal;
  h_fg =<font color="red"> Medium.enthalpyOfVaporization</font>(nomVal.TEvaIn_nominal);

  mMax = -QLat_flow_nominal * nomVal.tWet/h_fg;

  XEvaIn_nominal=<font color="red">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
     pSat=<font color="red">Medium.saturationPressure</font>(nomVal.TEvaIn_nominal),
     p=nomVal.p_nominal,
     phi=nomVal.phiIn_nominal);
  XEvaOut_nominal = XEvaIn_nominal + QLat_flow_nominal/nomVal.m_flow_nominal/h_fg;

  <font color="darkgreen">// Compute outlet air temperature</font>
  TEvaOut_nominal =
  (nomVal.TEvaIn_nominal*<font color="red">Medium.specificHeatCapacityCp</font>(
      <font color="red">Medium.setState_pTX</font>(p=nomVal.p_nominal,
                          T=nomVal.TEvaIn_nominal,
                          X=<font color="red">cat</font>(1, {XEvaIn_nominal, 1-XEvaIn_nominal})))
     + QSen_flow_nominal/nomVal.m_flow_nominal)
     /<font color="red"> Medium.specificHeatCapacityCp</font>(
      <font color="red">Medium.setState_pTX</font>(p=nomVal.p_nominal,
                          T=nomVal.TEvaIn_nominal,
                          X=<font color="red">cat</font>(1, {XEvaOut_nominal, 1-XEvaOut_nominal})));
  <font color="darkgreen">// Compute wet bulb temperature.</font>
  <font color="darkgreen">// The computation of the wet bulb temperature requires an iterative</font>
  <font color="darkgreen">// solution. It therefore cannot be done in a function.</font>
  <font color="darkgreen">// The block Buildings.Utilities.Psychrometrics.WetBul_pTX</font>
  <font color="darkgreen">// implements the equation below, but it cannot</font>
  <font color="darkgreen">// be used here because blocks cannot be used to assign parameter</font>
  <font color="darkgreen">// values.</font>
  XEvaWetBulOut_nominal   =<font color="red"> Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
      pSat=<font color="red">  Medium.saturationPressureLiquid</font>(Tsat=TEvaWetBulOut_nominal),
      p=     nomVal.p_nominal,
      phi=   1);
  TEvaWetBulOut_nominal = (TEvaOut_nominal
       * ((1-XEvaOut_nominal) * cpAir_nominal + XEvaOut_nominal * cpSte_nominal)
       + (XEvaOut_nominal-XEvaWetBulOut_nominal) * h_fg)/
            ( (1-XEvaWetBulOut_nominal)*cpAir_nominal + XEvaWetBulOut_nominal * cpSte_nominal);

  <font color="darkgreen">// Potential difference in moisture concentration that drives mass transfer at nominal condition</font>
  dX_nominal = XEvaOut_nominal-XEvaWetBulOut_nominal;
  <font color="blue">if </font>(dX_nominal &gt; 1E-10)<font color="blue"> then</font>
    <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;Warning: In DX coil model, dX_nominal = &quot; +<font color="red"> String</font>(dX_nominal) + &quot;
       This means that the coil is not dehumidifying air at the nominal conditions.
       Check nominal parameters.
         &quot; +<font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.nominalValuesToString</font>(
                                                                                           nomVal));
  <font color="blue">end if</font>;

  gammaMax = 0.8 * nomVal.m_flow_nominal * dX_nominal * h_fg / QLat_flow_nominal;

  <font color="darkgreen">// If gamma is bigger than a maximum value, write a warning and then</font>
  <font color="darkgreen">// use the smaller value.</font>
  <font color="blue">if </font>(nomVal.gamma &gt; gammaMax)<font color="blue"> then</font>
    <font color="red"> Modelica.Utilities.Streams.print</font>(&quot;Warning: In DX coil model, gamma is too large for these coil conditions.
  Instead of gamma = &quot; +<font color="red"> String</font>(nomVal.gamma) + &quot;, a value of &quot; +<font color="red"> String</font>(gammaMax) + &quot;, which 
  corresponds to a mass transfer effectiveness of 0.8, will be used.
  Coil nominal performance data are:
   nomVal.m_flow_nominal = &quot; +<font color="red"> String</font>(nomVal.m_flow_nominal) + &quot;
   dX_nominal = XEvaOut_nominal-XEvaWetBulOut_nominal = &quot; +<font color="red"> String</font>(XEvaOut_nominal) + &quot; - &quot; +
      <font color="red">String</font>(XEvaWetBulOut_nominal) + &quot; = &quot; +<font color="red"> String</font>(dX_nominal) + &quot;
   QLat_flow_nominal  = &quot; +<font color="red"> String</font>(QLat_flow_nominal) + &quot;\n&quot;);
  <font color="blue">end if</font>;

  logArg = 1-<font color="red">min</font>(nomVal.gamma, gammaMax)*QLat_flow_nominal/nomVal.m_flow_nominal/h_fg/dX_nominal;

  K = -<font color="red">Modelica.Math.log</font>(logArg);
  K2 = K/mMax*nomVal.m_flow_nominal^(-0.2);

  <font color="red">assert</font>(QLat_flow_nominal &lt; 0, &quot;QLat_nominal must be a negative number. Check parameters.&quot;);

  <font color="red">assert</font>(K &gt; 0, &quot;Require K&gt;0 but received &quot; +<font color="red"> String</font>(K) + &quot;
    The parameter are:
    QSen_flow_nominal     = &quot; +<font color="red"> String</font>(QSen_flow_nominal) + &quot;
    QLat_flow_nominal     = &quot; +<font color="red"> String</font>(QLat_flow_nominal) + &quot;
    XEvaOut_nominal        = &quot; +<font color="red"> String</font>(XEvaOut_nominal) + &quot;
   &quot; +<font color="red"> Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.nominalValuesToString</font>(
                                                                                     nomVal) + &quot;
  Check parameters. Maybe the sensible heat ratio is too big, or the mass flow rate too small.&quot;);

<font color="blue">equation </font>
  <font color="darkgreen">// When the coil switches off, set accumulated water to</font>
  <font color="darkgreen">// lower value of actual accumulated water or maximum water content</font>
  <font color="blue">if </font>computeReevaporation<font color="blue"> then</font>
    <font color="blue">when </font><font color="red">edge</font>(off)<font color="blue"> then</font>
      <font color="red">reinit</font>(m,<font color="red"> min</font>(m, mMax));
    <font color="blue">end when</font>;

    <font color="blue">if </font>on<font color="blue"> then</font>
      dX = 0;
      mEva_flow = 0;
      mTotWat_flow = mWat_flow;
      <font color="red">der</font>(m) = -mWat_flow;
      TEvaWetBulOut = 293.15;
      XEvaWetBulOut = 0;
    <font color="blue">else</font>
      <font color="darkgreen">// Compute wet bulb temperature.</font>
      <font color="darkgreen">// The computation of the wet bulb temperature requires an iterative</font>
      <font color="darkgreen">// solution. It therefore cannot be done in a function.</font>
      <font color="darkgreen">// The block Buildings.Utilities.Psychrometrics.WetBul_pTX</font>
      <font color="darkgreen">// implements the equation below, but it is not used here</font>
      <font color="darkgreen">// because otherwise, in each branch of the if-then construct,</font>
      <font color="darkgreen">// an iteration would be done. This would be inefficient because</font>
      <font color="darkgreen">// the wet bulb conditions are only needed in this branch.</font>
      XEvaWetBulOut =<font color="red"> Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
        pSat=<font color="red">  Medium.saturationPressureLiquid</font>(Tsat=TEvaWetBulOut),
        p=     nomVal.p_nominal,
        phi=   1);
      TEvaWetBulOut = (TEvaOut * ((1-XEvaOut) * cpAir_nominal + XEvaOut * cpSte_nominal)
         + (XEvaOut-XEvaWetBulOut) * h_fg)/
              ( (1-XEvaWetBulOut)*cpAir_nominal + XEvaWetBulOut * cpSte_nominal);

      dX =<font color="red"> smooth</font>(1,<font color="red"> noEvent</font>(
         <font color="red">Buildings.Utilities.Math.Functions.spliceFunction</font>(
         pos=XEvaOut,
         neg=XEvaWetBulOut,
         x=<font color="red">abs</font>(mAir_flow)-nomVal.m_flow_nominal/2,
         deltax=nomVal.m_flow_nominal/3)))
        - XEvaWetBulOut;
      mEva_flow = -<font color="red">smooth</font>(1,<font color="red"> noEvent</font>(dX *
        <font color="red">Buildings.Utilities.Math.Functions.spliceFunction</font>(
         pos=<font color="blue">if </font><font color="red">abs</font>(mAir_flow) &gt; mAir_flow_small/3<font color="blue"> then </font>
            <font color="red">abs</font>(mAir_flow) * (1-<font color="red">Modelica.Math.exp</font>(-K2*m*<font color="red">abs</font>(mAir_flow)^(-0.2)))<font color="blue"> else </font>0,
         neg=K2*mAir_flow_small^(-0.2)*m*mAir_flow^2,
         x=<font color="red">abs</font>(mAir_flow)- 2*mAir_flow_small/3,
         deltax=2*mAir_flow_small/6)));
      <font color="red">der</font>(m) = -mEva_flow;
      mTotWat_flow = mWat_flow + mEva_flow;
    <font color="blue">end if</font>;

  <font color="blue">else</font><font color="darkgreen"> // The model is configured to not compute reevaporation</font>
    dX = 0;
    mEva_flow = 0;
    mTotWat_flow = mWat_flow;
    m = 0;
    TEvaWetBulOut = 293.15;
    XEvaWetBulOut = 0;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Evaporation;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE InputPower<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha5e776f995361fe28PowerI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.InputPower</H2>
<B>Electrical power consumed by the unit</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha5e776f995361fe28PowerD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower">
<P><H3>Information</H3></P>

<p>
This block calculates total electrical energy consumed by the unit using 
the rate of cooling and the energy input ratio <i>EIR</i>.
</p>
<p>
The electrical energy consumed by the unit is
</p>
<p align="center" style="font-style:italic;">
  P = -Q<sub>cool</sub> EIR
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Cooling capacity of the coil [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>EIR</TD><TD>Energy input ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>SHR</TD><TD>Sensible heat ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>P</TD><TD>Electrical power consumed by the unit [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>QSen_flow</TD><TD>Sensible heat flow rate [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>QLat_flow</TD><TD>Latent heat flow rate [W]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> InputPower <font color="darkgreen">&quot;Electrical power consumed by the unit&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
<textblock type="annotcomp" expanded="false">   <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> Q_flow(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Cooling capacity of the coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> EIR <font color="darkgreen">&quot;Energy input ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> SHR(min=0, max=1) <font color="darkgreen">&quot;Sensible heat ratio&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> P(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Electrical power consumed by the unit&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> QSen_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Sensible heat flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> QLat_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Latent heat flow rate&quot;</font>;</textblock>
<font color="blue">equation </font>
  P = -EIR*Q_flow;
  QSen_flow = Q_flow * SHR;
  QLat_flow = Q_flow - QSen_flow;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>InputPower;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE NominalCondition<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha3626cd4d1788ba28itionI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.NominalCondition</H2>
<B>Calculates inlet and outlet fluid parameters at nominal condition</B><p>
<P><H3>Information</H3></P>

<p>
This block calculates inlet and outlet fluid parameters at the nominal condition.
These parameters are required to determine the apparatus dew point at the nominal condition. 
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A> (Icon for records).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</A></TD><TD>per</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> NominalCondition <font color="darkgreen">
  &quot;Calculates inlet and outlet fluid parameters at nominal condition&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;
  <font color="blue">parameter </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues</A>
                                                                          per <font color="darkgreen">
    &quot;Performance data&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaIn_nominal=
     <font color="red">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
        pSat=<font color="red">Medium.saturationPressure</font>(per.TEvaIn_nominal),
        p=per.p_nominal,
        phi=per.phiIn_nominal) <font color="darkgreen">
    &quot;Rated/Nominal mass fraction of air entering coil&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hEvaIn_nominal=
   <font color="red">Medium.h_pTX</font>(
     p=per.p_nominal,
     T=per.TEvaIn_nominal,
     X=<font color="red">cat</font>(1,{XEvaIn_nominal}, {1-<font color="red">sum</font>({XEvaIn_nominal})})) <font color="darkgreen">
    &quot;Rated enthalpy of air entering cooling coil&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hOut_nominal=
    hEvaIn_nominal + per.Q_flow_nominal / per.m_flow_nominal <font color="darkgreen">
    &quot;Rated enthalpy of air exiting cooling coil&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TOut_nominal=
    per.TEvaIn_nominal + (per.SHR_nominal * per.Q_flow_nominal)/(per.m_flow_nominal * Cp_nominal) <font color="darkgreen">
    &quot;Dry-bulb temperature of the air leaving the cooling coil at nominal condition&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaOut_nominal(start=0.005, min=0, max=1.0)=
     XEvaIn_nominal + (hOut_nominal- hEvaIn_nominal)*(1-per.SHR_nominal)/
     <font color="red">Medium.enthalpyOfCondensingGas</font>(T=per.TEvaIn_nominal) <font color="darkgreen">
    &quot;Rated/Nominal mass fraction of air leaving the coil&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificHeatCapacity"
>Modelica.SIunits.SpecificHeatCapacity</A> Cp_nominal=
    <font color="red">Medium.specificHeatCapacityCp</font>(<font color="red">Medium.setState_pTX</font>(
          p=per.p_nominal, T=per.TEvaIn_nominal, X=<font color="red">cat</font>(1,{XEvaIn_nominal}, {1-<font color="red">sum</font>({XEvaIn_nominal})}))) <font color="darkgreen">
    &quot;Specific heat of air at specified nominal condition&quot;</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>NominalCondition;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialCoilCondition<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.PartialCoilCondition</H2>
<B>Partial block for dry and wet coil conditions</B><p>
<IMG SRC="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition">
<P><H3>Information</H3></P>

<p>
This partial block is the base class for 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil</a> and
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil</a>.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</A> (Partial block for DX coil).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true for coil with variable speed</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">block</font> PartialCoilCondition <font color="darkgreen">
  &quot;Partial block for dry and wet coil conditions&quot;</font>
  <font color="blue">import </font><A HREF="Buildings.html#Buildings"
>Buildings</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface</A>;

  <font color="blue">constant </font>Boolean variableSpeedCoil <font color="darkgreen">
    &quot;Flag, set to true for coil with variable speed&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoolingCapacity</A> cooCap(
    <font color="blue">final </font>sta=datCoi.sta,
    <font color="blue">final </font>nSta=datCoi.nSta,
    <font color="blue">final </font>m_flow_small=datCoi.m_flow_small) <font color="darkgreen">&quot;Performance data&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">protected </font>
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</A> speShiEIR(
    <font color="blue">final </font>variableSpeedCoil=variableSpeedCoil,
    <font color="blue">final </font>nSta=nSta,
    <font color="blue">final </font>speSet=datCoi.sta.spe) <font color="darkgreen">&quot;Interpolates EIR&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"
>SpeedShift</A> speShiQ_flow(
    <font color="blue">final </font>variableSpeedCoil=variableSpeedCoil,
    <font color="blue">final </font>nSta=nSta,
    <font color="blue">final </font>speSet=datCoi.sta.spe) <font color="darkgreen">&quot;Interpolates Q_flow&quot;</font>;</textblock>
<font color="blue">equation </font>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(cooCap.EIR, speShiEIR.u);
  <font color="red">connect</font>(cooCap.Q_flow, speShiQ_flow.u);
  <font color="red">connect</font>(speShiEIR.y, EIR);
  <font color="red">connect</font>(speRat, speShiEIR.speRat);
  <font color="red">connect</font>(speRat, speShiQ_flow.speRat);
  <font color="red">connect</font>(speShiQ_flow.y, Q_flow);
  <font color="red">connect</font>(stage, speShiQ_flow.stage);
  <font color="red">connect</font>(speShiEIR.stage, stage);
  <font color="red">connect</font>(cooCap.m_flow, m_flow);
  <font color="red">connect</font>(cooCap.TConIn, TConIn);
  <font color="red">connect</font>(cooCap.stage, stage);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialCoilCondition;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialCoilInterface<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchae858fc254f2ac3f3itionI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.PartialCoilInterface</H2>
<B>Partial block for DX coil</B><p>
<IMG SRC="Buildings.Fluid.HeatExchadb27dc53cc93e876rfaceD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilInterface">
<P><H3>Information</H3></P>

<p>
This partial block declares the inputs and outputs that are common for  
<a href="modelica://Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoilCondition"> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.CoilCondition</a> and
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling</a>.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block), <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A> (A partial block for essential parameters).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">block</font> PartialCoilInterface <font color="darkgreen">&quot;Partial block for DX coil&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stage <font color="darkgreen">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> speRat <font color="darkgreen">&quot;Speed ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> m_flow <font color="darkgreen">&quot;Air mass flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TEvaIn <font color="darkgreen">
    &quot;Temperature of air entering the cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XEvaIn <font color="darkgreen">&quot;Inlet air mass fraction&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> p <font color="darkgreen">&quot;Pressure at inlet of coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> hEvaIn <font color="darkgreen">
    &quot;Specific enthalpy of air entering the coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TConIn(
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">
    &quot;Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> EIR <font color="darkgreen">&quot;Energy Input Ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> Q_flow(
    max=0,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Total cooling capacity&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialCoilInterface;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialDXCoil<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.PartialDXCoil</H2>
<B>Partial model for DX coil</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha5585a7c2cd552408XCoilD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialDXCoil">
<P><H3>Information</H3></P>

<p>
This partial model is the base class for
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.SingleSpeed"
> 
Buildings.Fluid.HeatExchangers.DXCoils.SingleSpeed</a>
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.MultiStage"
> 
Buildings.Fluid.HeatExchangers.DXCoils.MultiStage</a> and
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils.html#Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed"
> 
Buildings.Fluid.HeatExchangers.DXCoils.VariableSpeed</a>.
</p>
<p>
See 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A> (A partial block for essential parameters), <A HREF="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexWater"
>Buildings.Fluid.BaseClasses.IndexWater</A> (Computes the index of the water substance), <A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</A> (Partial model transporting one fluid stream with storing mass or energy).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</A></TD><TD>Medium model</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_nominal</TD><TD>datCoi.sta[nSta].nomVal.m_fl...</TD><TD>Nominal mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp_nominal</TD><TD>&nbsp;</TD><TD>Pressure [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow.start</TD><TD>0</TD><TD>Mass flow rate from port_a to port_b (m_flow &gt; 0 is design flow direction) [kg/s]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp.start</TD><TD>0</TD><TD>Pressure difference between port_a and port_b [Pa]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>1E-4*abs(m_flow_nominal)</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_V_flow</TD><TD>false</TD><TD>= true, if volume flow rate at inflowing port is computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>false</TD><TD>= true, if actual temperature at port is computed (may lead to events)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Flow resistance</B></TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>false</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>linearizeFlowResistance</TD><TD>false</TD><TD>= true, use linear relation between m_flow and dp for any flow rate</TD></TR>
<TR><TD>Real</TD><TD>deltaM</TD><TD>0.1</TD><TD>Fraction of nominal flow rate where flow transitions to laminar</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Dynamics</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Nominal condition</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>tau</TD><TD>30</TD><TD>Time constant at nominal flow (if energyDynamics &lt;&gt; SteadyState) [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Equations</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>Modelica.Fluid.Types.Dynamic...</TD><TD>Formulation of energy balance</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>energyDynamics</TD><TD>Formulation of mass balance</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Moisture balance</TD></TR>
<TR><TD>Boolean</TD><TD>computeReevaporation</TD><TD>true</TD><TD>Set to true to compute reevaporation of water that accumulated on coil</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_start</TD><TD>Medium.p_default</TD><TD>Start value of pressure [Pa]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>Medium.T_default</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>P</TD><TD>Electrical power consumed by the unit [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>QSen_flow</TD><TD>Sensible heat flow rate [W]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>QLat_flow</TD><TD>Latent heat flow rate [W]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> PartialDXCoil <font color="darkgreen">&quot;Partial model for DX coil&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_BaseClasses.html#Buildings.Fluid.BaseClasses.IndexWater"
>Buildings.Fluid.BaseClasses.IndexWater</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_Interfaces.html#Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger"
>Buildings.Fluid.Interfaces.TwoPortHeatMassExchanger</A>(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">redeclare </font><font color="blue">final </font><A HREF="Buildings_Fluid_MixingVolumes.html#Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir"
>Buildings.Fluid.MixingVolumes.MixingVolumeMoistAir</A> vol,
    <font color="blue">final </font>m_flow_nominal = datCoi.sta[nSta].nomVal.m_flow_nominal);

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TConIn(
    unit=&quot;K&quot;,
    displayUnit=&quot;degC&quot;) <font color="darkgreen">
    &quot;Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> P(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Electrical power consumed by the unit&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> QSen_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Sensible heat flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> QLat_flow(quantity=&quot;Power&quot;, unit=&quot;W&quot;) <font color="darkgreen">
    &quot;Latent heat flow rate&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DXCooling</A> dxCoo(
    <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>datCoi=datCoi) <font color="darkgreen">&quot;DX cooling coil operation&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Evaporation"
>Evaporation</A> eva(<font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
                  <font color="blue">final </font>nomVal=datCoi.sta[nSta].nomVal,
                  <font color="blue">final </font>computeReevaporation = computeReevaporation) <font color="darkgreen">
    &quot;Model that computes evaporation of water that accumulated on the coil surface&quot;</font>;</textblock>
  <font color="blue">parameter </font>Boolean computeReevaporation=true <font color="darkgreen">
    &quot;Set to true to compute reevaporation of water that accumulated on coil&quot;</font>;

  <font color="darkgreen">// Flow reversal is not needed. Also, if ff &lt; ffMin/4, then</font>
  <font color="darkgreen">// Q_flow and EIR are set the zero. Hence, it is safe to assume</font>
  <font color="darkgreen">// forward flow, which will avoid an event</font>
<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hEvaIn=
    <font color="red">inStream</font>(port_a.h_outflow) <font color="darkgreen">&quot;Enthalpy of air entering the cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TEvaIn =<font color="red"> Medium.T_phX</font>(p=port_a.p, h=hEvaIn, X=XEvaIn) <font color="darkgreen">
    &quot;Dry bulb temperature of air entering the cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XEvaIn[Medium.nXi] =<font color="red"> inStream</font>(port_a.Xi_outflow) <font color="darkgreen">
    &quot;Mass fraction/absolute humidity of air entering the cooling coil&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> p(<font color="blue">final </font>y=port_a.p) <font color="darkgreen">
    &quot;Inlet air pressure&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> X(<font color="blue">final </font>y=XEvaIn[i_w]) <font color="darkgreen">
    &quot;Inlet air mass fraction&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> T(<font color="blue">final </font>y=TEvaIn) <font color="darkgreen">
    &quot;Inlet air temperature&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> m(<font color="blue">final </font>y=port_a.m_flow) <font color="darkgreen">
    &quot;Inlet air mass flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.RealExpression"
>Modelica.Blocks.Sources.RealExpression</A> h(<font color="blue">final </font>y=hEvaIn) <font color="darkgreen">
    &quot;Inlet air specific enthalpy&quot;</font>;
  <A HREF="Buildings_HeatTransfer_Sources.html#Buildings.HeatTransfer.Sources.PrescribedHeatFlow"
>Buildings.HeatTransfer.Sources.PrescribedHeatFlow</A> q <font color="darkgreen">&quot;Heat extracted by coil&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.InputPower"
>BaseClasses.InputPower</A> pwr <font color="darkgreen">&quot;Electrical power consumed by the unit&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Thermal_HeatTransfer_Sensors.html#Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor"
>Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor</A> TVol <font color="darkgreen">
    &quot;Temperature of the control volume&quot;</font>;</textblock>
<font color="blue">initial </font><font color="blue">algorithm </font>
  <font color="darkgreen">// Make sure that |Q_flow_nominal[nSta]| &gt;= |Q_flow_nominal[i]| for all stages because the data</font>
  <font color="darkgreen">// of nSta are used in the evaporation model</font>
  <font color="blue">for </font>i<font color="blue"> in </font>1:(nSta-1)<font color="blue"> loop</font>
    <font color="red">assert</font>(datCoi.sta[i].nomVal.Q_flow_nominal &gt;= datCoi.sta[nSta].nomVal.Q_flow_nominal,
    &quot;Error in DX coil performance data: Q_flow_nominal of the highest stage must have
    the biggest value in magnitude. Obtained &quot; +<font color="red"> Modelica.Math.Vectors.toString</font>(
    {datCoi.sta[i].nomVal.Q_flow_nominal <font color="blue">for </font>i<font color="blue"> in </font>1:nSta}, &quot;Q_flow_nominal&quot;));
   <font color="blue">end for</font>;


<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(TConIn, dxCoo.TConIn);
  <font color="red">connect</font>(m.y, dxCoo.m_flow);
  <font color="red">connect</font>(T.y, dxCoo.TEvaIn);
  <font color="red">connect</font>(p.y, dxCoo.p);
  <font color="red">connect</font>(X.y, dxCoo.XEvaIn);
  <font color="red">connect</font>(h.y, dxCoo.hEvaIn);
  <font color="red">connect</font>(dxCoo.EIR, pwr.EIR);
  <font color="red">connect</font>(dxCoo.Q_flow, pwr.Q_flow);
  <font color="red">connect</font>(dxCoo.SHR, pwr.SHR);
  <font color="red">connect</font>(q.port, vol.heatPort);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(pwr.P, P);
  <font color="red">connect</font>(dxCoo.Q_flow, q.Q_flow);
  <font color="red">connect</font>(eva.mWat_flow, dxCoo.mWat_flow);
  <font color="red">connect</font>(dxCoo.TCoiSur, vol.TWat);
  <font color="red">connect</font>(dxCoo.TCoiSur, eva.TWat);
  <font color="red">connect</font>(m.y, eva.mAir_flow);
  <font color="red">connect</font>(TVol.port, q.port);
  <font color="red">connect</font>(pwr.QSen_flow, QSen_flow);
  <font color="red">connect</font>(pwr.QLat_flow, QLat_flow);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(eva.mTotWat_flow, vol.mWat_flow);
  <font color="red">connect</font>(TVol.T, eva.TEvaOut);
  <font color="red">connect</font>(vol.X_w, eva.XEvaOut);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialDXCoil;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialSurfaceCondition<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchae2833c094a90cf9bitionI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.PartialSurfaceCondition</H2>
<B>Partial block for apparatus dew and dry point calculation</B><p>
<IMG SRC="Buildings.Fluid.HeatExchae2833c094a90cf9bitionD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialSurfaceCondition">
<P><H3>Information</H3></P>

<p>
This partial block is the base class for
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint</a> and
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDryPoint</a>.
</p>
<p>
This block calculates the <i>UA/c<sub>p</sub></i> value, the bypass factor and the
enthalpy difference across the coil.
It uses the function
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</a>
for intermediate compressor speeds.
</p>
<h4>Implementation</h4>
<p>
For coils that only have discrete compressor speeds, this block does not do an interpolation
for intermediate speeds.
For coils with variable speed compressors, the computations are also done if the coil is off,
as this ensures that the derivatives are continuous near the off conditions.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block), <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A> (A partial block for essential parameters).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true to interpolate data</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed index</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>Q_flow</TD><TD>Cooling capacity of the coil [W]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Evaporator air mass flow rate [kg/s]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Evaporator air static pressure [Pa]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Evaporator inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Evaporator air inlet specific enthalpy [J/kg]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">block</font> PartialSurfaceCondition <font color="darkgreen">
  &quot;Partial block for apparatus dew and dry point calculation&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.EssentialParameters</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;

  <font color="blue">constant </font>Boolean variableSpeedCoil <font color="darkgreen">&quot;Flag, set to true to interpolate data&quot;</font>;

  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow_small = datCoi.m_flow_small <font color="darkgreen">
    &quot;Small mass flow rate for the evaporator, used for regularization&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</A> maxSpe(displayUnit=&quot;1/min&quot;)= datCoi.sta[nSta].spe <font color="darkgreen">
    &quot;Maximum rotational speed&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> speRat <font color="darkgreen">&quot;Speed index&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> Q_flow(
    quantity=&quot;Power&quot;,
    unit=&quot;W&quot;) <font color="darkgreen">&quot;Cooling capacity of the coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> m_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Evaporator air mass flow rate&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> p(
    quantity=&quot;Pressure&quot;,
    unit=&quot;Pa&quot;) <font color="darkgreen">&quot;Evaporator air static pressure&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XEvaIn <font color="darkgreen">
    &quot;Evaporator inlet air mass fraction&quot;</font>;</textblock><font color="darkgreen"> //(start=0.005, min=0, max=1.0)</font>
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> hEvaIn(
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <font color="darkgreen">&quot;Evaporator air inlet specific enthalpy&quot;</font>;</textblock>
  <font color="blue">output </font>Real bypass(
    start=0.25,
    min=0,
    max=1.0) <font color="darkgreen">&quot;Bypass factor&quot;</font>;
 <font color="blue">output </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</A> spe(displayUnit=&quot;1/min&quot;) <font color="darkgreen">
    &quot;Rotational speed&quot;</font>;

<textblock type="annotcomp" expanded="false">  <font color="blue">final </font><font color="blue">parameter </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp</A> uacp[nSta](
      <font color="blue">final </font>per=datCoi.sta.nomVal,
      <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium) <font color="darkgreen">&quot;Calculates UA/Cp of the coil&quot;</font>;</textblock>

<font color="blue">protected </font>
  <font color="blue">output </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> m_flow_nonzero <font color="darkgreen">
    &quot;Evaporator air mass flow rate, bounded away from zero&quot;</font>;
  <font color="blue">output </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> delta_h(
    start=40000,
    min=0.0) <font color="darkgreen">
    &quot;Enthalpy required to be removed from the inlet air to attain apparatus dry point condition&quot;</font>;
  <font color="blue">output </font>Real UAcp(
    min=0,
    fixed=false) <font color="darkgreen">&quot;UA/Cp of coil&quot;</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">public </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stage <font color="darkgreen">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</font>;</textblock>
<font color="blue">algorithm </font>
  <font color="blue">if </font><font color="blue">not </font>variableSpeedCoil<font color="blue"> and </font>stage == 0<font color="blue"> then</font>
    m_flow_nonzero := 0;
    UAcp           := 0;
    bypass         := 0;
    delta_h        := 0;
  <font color="blue">else</font>
    <font color="darkgreen">// Small mass flow rate to avoid division by zero</font>
    m_flow_nonzero :=<font color="red"> Buildings.Utilities.Math.Functions.smoothMax</font>(
      x1=m_flow,
      x2=m_flow_small,
      deltaX=0.1*m_flow_small);
    spe:=speRat*maxSpe;

    <font color="blue">if </font>variableSpeedCoil<font color="blue"> then</font>
      UAcp :=<font color="red"> Buildings.Utilities.Math.Functions.smoothMax</font>(
         x1=<font color="red">Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</font>(
           spe=spe,
           speSet={datCoi.sta[iSpe].spe <font color="blue">for </font>iSpe<font color="blue"> in </font>1:nSta},
           u={uacp[iSpe].UAcp <font color="blue">for </font>iSpe<font color="blue"> in </font>1:nSta}),
         x2=uacp[nSta].UAcp/1E3,
         deltaX=uacp[nSta].UAcp/1E4);
     <font color="blue">else</font>
      UAcp := uacp[stage].UAcp;
     <font color="blue">end if</font>;

    bypass :=<font color="red"> Buildings.Utilities.Math.Functions.smoothLimit</font>(
      x=<font color="red">  Modelica.Math.exp</font>(-UAcp / m_flow_nonzero),
      l=  0.01,
      u=  0.99,
      deltaX=  0.001);
   delta_h:=<font color="red">Buildings.Utilities.Math.Functions.smoothMin</font>(
      x1=-Q_flow/m_flow_nonzero/(1 - bypass),
      x2=0.999*hEvaIn,
      deltaX=0.0001);
    <font color="blue">end if</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PartialSurfaceCondition;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SensibleHeatRatio<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.SensibleHeatRatio</H2>
<B>Calculates the sensible heat ratio</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha11adce10f89a9e20RatioD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio">
<P><H3>Information</H3></P>

<p>
This block computes the sensible heat ratio.
</p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>on</TD><TD>Set to true to enable compressor, or false to disable compressor</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XADP</TD><TD>Humidity mass fraction of air at ADP</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hADP</TD><TD>Specific enthalpy of air at ADP [J/kg]</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>SHR</TD><TD>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> SensibleHeatRatio <font color="darkgreen">&quot;Calculates the sensible heat ratio&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> on <font color="darkgreen">
    &quot;Set to true to enable compressor, or false to disable compressor&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> p <font color="darkgreen">&quot;Pressure at inlet of coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> TEvaIn <font color="darkgreen">
    &quot;Temperature of air entering the cooling coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> XADP(
    min=0,
    max=1.0) <font color="darkgreen">&quot;Humidity mass fraction of air at ADP&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> hADP(
    nominal=40000,
    quantity=&quot;SpecificEnergy&quot;,
    unit=&quot;J/kg&quot;) <font color="darkgreen">&quot;Specific enthalpy of air at ADP&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> hEvaIn <font color="darkgreen">
    &quot;Specific enthalpy of air entering the coil&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> SHR(
    min=0,
    max=1.0) <font color="darkgreen">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</font>;</textblock>

<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> h_TEvaIn_XADP <font color="darkgreen">
    &quot;Enthalpy at inlet air temperature and humidity mass fraction at ADP&quot;</font>;
  Real entRat <font color="darkgreen">&quot;Enthalpy ratio&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> epsH = 100 <font color="darkgreen">
    &quot;Small value for enthalpy to avoid division by zero&quot;</font>;
<font color="blue">algorithm </font>
<font color="darkgreen">//===================================Sensible heat ratio calculation===========================================//</font>
  <font color="darkgreen">//Coil on-off condition</font>
  <font color="blue">if </font>on<font color="blue"> then</font>
   <font color="darkgreen">//Calculate enthalpy at inlet air temperature and absolute humidity at ADP i.e. h_TEvaIn_wADP</font>
    h_TEvaIn_XADP :=<font color="red"> Medium.h_pTX</font>(
      p=p,
      T=TEvaIn,
      X=<font color="red">cat</font>(1, {XADP}, {1-XADP}));
    <font color="darkgreen">//Calculate Sensible Heat Ratio</font>
    entRat := (h_TEvaIn_XADP - hADP)/
      <font color="red">Buildings.Utilities.Math.Functions.smoothMax</font>(
        x1=      epsH,
        x2=      hEvaIn - hADP,
        deltaX=  0.1*epsH);
    SHR :=<font color="red"> Buildings.Utilities.Math.Functions.smoothMin</font>(
      x1=entRat,
      x2=0.999,
      deltaX=0.0001) <font color="darkgreen">
      &quot;To restrict the value of SHR in case of zero mass flow rate or dry coil condition&quot;</font>;
  <font color="blue">else</font><font color="darkgreen">  //Coil off</font>
    h_TEvaIn_XADP := 0;
    entRat     := 1;
    SHR        := 0;
  <font color="blue">end if</font>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SensibleHeatRatio;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SpeedSelect<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.SpeedSelect</H2>
<B>Selects the lower specified speed ratio for multispeed model</B><p>
<IMG SRC="Buildings.Fluid.HeatExcha6f5fe0cd6a3992daelectD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedSelect">
<P><H3>Information</H3></P>

<p>
This blocks outputs the normalized speed of the compressor,
whereas the highest stage is assigned a normalized speed of one,
and all other stages are proportional to their actual speed.
  </p>
<P>
Extends from <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>nSta</TD><TD>&nbsp;</TD><TD>Number of standard compressor speeds</TD></TR>
<TR><TD>Real</TD><TD>speSet[nSta]</TD><TD>&nbsp;</TD><TD>Array of standard compressor speeds</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of cooling coil (0: off, 1: first stage, 2: second stage...)</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>speRat</TD><TD>Standard speed ratio</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> SpeedSelect <font color="darkgreen">
  &quot;Selects the lower specified speed ratio for multispeed model&quot;</font>
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;

  <font color="blue">parameter </font>Integer nSta(min=1) <font color="darkgreen">&quot;Number of standard compressor speeds&quot;</font>;
  <font color="blue">parameter </font>Real speSet[nSta] <font color="darkgreen">&quot;Array of standard compressor speeds&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stage <font color="darkgreen">
    &quot;Stage of cooling coil (0: off, 1: first stage, 2: second stage...)&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> speRat <font color="darkgreen">&quot;Standard speed ratio&quot;</font>;</textblock>
<font color="blue">protected </font>
  <font color="blue">final </font><font color="blue">parameter </font>Real speRatNor[nSta](<font color="blue">each </font>min=0, max=1)=
    {speSet[i]/speSet[nSta] <font color="blue">for </font>i<font color="blue"> in </font>1:nSta} <font color="darkgreen">
    &quot;Array of normalized speed ratios for the compressor&quot;</font>;

<font color="blue">algorithm </font>
 <font color="red">assert</font>(stage &gt;= 0<font color="blue"> and </font>stage &lt;= nSta, &quot;Compressor speed is out of range.
  Model has &quot; +<font color="red"> String</font>(nSta) + &quot; speeds, but received control signal &quot; +
  <font color="red">String</font>(stage));
 speRat :=<font color="blue">if </font>stage == 0<font color="blue"> then </font>0<font color="blue"> else </font>speRatNor[stage];
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SpeedSelect;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SpeedShift<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.SpeedShift</H2>
<B>Interpolates values between speeds</B><p>
<IMG SRC="Buildings.Fluid.HeatExchae5e3ed3d735158e2ShiftD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SpeedShift">
<P><H3>Information</H3></P>

<p>
This block uses the
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses_Functions.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift"
> 
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</a> function 
to interpolate the input array.
Depending on input speed ratio and speed set array the input array <i>u</i> is interpolated.  
</p>
<P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>nSta</TD><TD>&nbsp;</TD><TD>Number of standard compressor speeds</TD></TR>
<TR><TD><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>AngularVelocity</A></TD><TD>speSet[nSta]</TD><TD>&nbsp;</TD><TD>Compressor speeds [rad/s]</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true to interpolate data</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u[nSta]</TD><TD>Array to be interpolated</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Interpolated value</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> SpeedShift <font color="darkgreen">&quot;Interpolates values between speeds&quot;</font>
  <font color="blue">parameter </font>Integer nSta <font color="darkgreen">&quot;Number of standard compressor speeds&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>Modelica.SIunits.AngularVelocity</A> speSet[nSta](<font color="blue">each </font>displayUnit=&quot;1/min&quot;) <font color="darkgreen">
    &quot;Compressor speeds&quot;</font>;
  <font color="blue">constant </font>Boolean variableSpeedCoil <font color="darkgreen">&quot;Flag, set to true to interpolate data&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> speRat <font color="darkgreen">&quot;Speed ratio&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> u[nSta] <font color="darkgreen">&quot;Array to be interpolated&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> y <font color="darkgreen">&quot;Interpolated value&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>Modelica.Blocks.Interfaces.IntegerInput</A> stage <font color="darkgreen">
    &quot;Stage of coil, or 0/1 for variable-speed coil&quot;</font>;</textblock>
<font color="blue">equation </font>
  <font color="blue">if </font>variableSpeedCoil<font color="blue"> then</font>
    y=<font color="red">Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Functions.speedShift</font>(
      spe=speRat*speSet[nSta],
      speSet=speSet,
      u=u);
  <font color="blue">else</font>
    y = <font color="blue">if </font>stage == 0<font color="blue"> then </font>0<font color="blue">  else </font>u[stage];
  <font color="blue">end if</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>SpeedShift;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE UACp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExcha0f2a3a8bf900018f.UACpI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.UACp"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.UACp</H2>
<B>Calculates UA/Cp of the coil</B><p>
<P><H3>Information</H3></P>

<p>
This model calculates the <i>UA/c<sub>p</sub></i> value and the bypass factor
of the coil from the nominal inlet and outlet 
air properties. 
The nominal conditions are calculated using 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</a>.</p>
<p>
For a heat exchanger where one medium changes phase, the <i>NTU-&epsilon;</i> relation
is
<p align="center" style="font-style:italic;">
  &epsilon; = 1 - exp(-NTU) = 1-exp(-UA &frasl; c<sub>p</sub> &frasl; m&#775;)
</p>
<p>
Since the bypass factor <i>b</i> is defined as <i>b=1-&epsilon;</i>,
one can write
</p>
<p align="center" style="font-style:italic;">
  b = exp(-UA &frasl; c<sub>p</sub> &frasl; m&#775;)
</p>
<p>
and, hence, 
<p align="center" style="font-style:italic;">
 UA &frasl; c<sub>p</sub> = - m&#775; log(b)
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</A> (Calculates inlet and outlet fluid parameters at nominal condition), <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>PartialCondensingGases</A></TD><TD>Medium model</TD></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.BaseClasses.NominalValues"
>NominalValues</A></TD><TD>per</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>Boolean</TD><TD>homotopyInitialization</TD><TD>true</TD><TD>= true, use homotopy method</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> UACp <font color="darkgreen">&quot;Calculates UA/Cp of the coil&quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.NominalCondition</A>;
  <font color="blue">extends </font><A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>Modelica.SIunits.MassFraction</A> XADP_nominal(
    start=0.008,
    min=0,
    max=1.0,
    fixed=false) <font color="darkgreen">
    &quot;Rated/Nominal mass fraction of air at coil apparatus dew point&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Modelica.SIunits.Temperature</A> TADP_nominal(
    start=273.15+10,
    fixed=false) <font color="darkgreen">&quot;Coil apparatus dew point temperature&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hADP_nominal(
    fixed=false) <font color="darkgreen">
    &quot;Enthalpy of air at coil apparatus dew point (at rated condition)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real bypass_nominal(
    start=0.25,
    min=0,
    max=1.0,
    fixed=false) <font color="darkgreen">&quot;Bypass factor for nominal condition&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Real UAcp(
    min=0,
    unit=&quot;kg/s&quot;,
    fixed=false) <font color="darkgreen">&quot;UA/Cp of coil&quot;</font>;
  <font color="blue">parameter </font>Boolean homotopyInitialization = true <font color="darkgreen">&quot;= true, use homotopy method&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">constant </font>Real phiADP_nominal = 1.0 <font color="darkgreen">&quot;Realtive humidity at ADP&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="../../msl/3.2/help/Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>Modelica.SIunits.AbsolutePressure</A> psat_ADP_nominal(
    start=1250,
    fixed=false) <font color="darkgreen">&quot;Saturation pressure&quot;</font>;
<font color="blue">initial </font><font color="blue">equation </font>
<font color="darkgreen">//------------------------Apparatus Dew Point (ADP) calculations---------------------//</font>
  <font color="darkgreen">//Solve Eq. 1 , 2 and 3 for air properties (XADP_nominal and TADP_nominal)</font>
  <font color="darkgreen">//of saturated air at coil apparatus dew point</font>
<font color="darkgreen">//---------------------------------------Eq.1---------------------------------------//</font>
  (XEvaIn_nominal - XEvaOut_nominal)*(per.TEvaIn_nominal - TADP_nominal)
     =(XEvaIn_nominal  - XADP_nominal)*(per.TEvaIn_nominal - TOut_nominal);
<font color="darkgreen">//---------------------------------------Eq.2---------------------------------------//</font>
  <font color="blue">if </font>homotopyInitialization<font color="blue"> then</font>
    psat_ADP_nominal=<font color="red">homotopy</font>(
      actual=<font color="red">Medium.saturationPressureLiquid</font>(Tsat=TADP_nominal),
      simplified=1252.393+83.933*(TADP_nominal-283.15));
  <font color="blue">else</font><font color="darkgreen"> // do not use homotopy</font>
    psat_ADP_nominal=<font color="red">Medium.saturationPressureLiquid</font>(TADP_nominal);
  <font color="blue">end if</font>;
  <font color="darkgreen">//  Taylor series</font>
  <font color="darkgreen">//  psat_ADP_nominal=1252.393+83.933*(TADP_nominal-283.15);</font>
  <font color="darkgreen">//  Non-linear equation</font>
  <font color="darkgreen">//  psat_ADP_nominal =  Medium.saturationPressureLiquid(TADP_nominal);</font>
<font color="darkgreen">//---------------------------------------Eq.3---------------------------------------//</font>
  <font color="blue">if </font>homotopyInitialization<font color="blue"> then</font>
    XADP_nominal=<font color="red">homotopy</font>(
      actual=<font color="red">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
        pSat=psat_ADP_nominal,
        p=per.p_nominal,
        phi=phiADP_nominal),
      simplified=0.007572544+6.19495*(10^(-6))*(psat_ADP_nominal-1228));

  <font color="blue">else</font><font color="darkgreen"> // do not use homotopy</font>
    XADP_nominal=<font color="red">Buildings.Utilities.Psychrometrics.Functions.X_pSatpphi</font>(
        pSat=psat_ADP_nominal,
        p=per.p_nominal,
        phi=phiADP_nominal);
  <font color="blue">end if</font>;
<font color="darkgreen">//-----------------------------------uACp calculations-----------------------------//</font>
  hADP_nominal =<font color="red"> Medium.h_pTX</font>(
              p=per.p_nominal,
              T=TADP_nominal,
              X=<font color="red">cat</font>(1,{XADP_nominal}, {1-<font color="red">sum</font>({XADP_nominal})}));
  bypass_nominal=<font color="red">Buildings.Utilities.Math.Functions.smoothLimit</font>(
              x=(hOut_nominal-hADP_nominal)/(hEvaIn_nominal-hADP_nominal),
              l=1e-3,
              u=0.999,
              deltaX=1e-4);
  UAcp = -per.m_flow_nominal *<font color="red"> Modelica.Math.log</font>(bypass_nominal);

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>UACp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WetCoil<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilI.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil"></A><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses</A>.WetCoil</H2>
<B>Calculates wet coil condition </B><p>
<IMG SRC="Buildings.Fluid.HeatExchac6d89d57cbafcdf8tCoilD.png" ALT="Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.WetCoil">
<P><H3>Information</H3></P>

<p>
This block calculates the rate of cooling and the coil surface condition
under the assumption that the coil is wet.
</p>
<p>
The dry coil conditions are computed in
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil"
>
Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.DryCoil</a>.
See 
<A HREF="Buildings_Fluid_HeatExchangers_DXCoils_UsersGuide.html#Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide"
>
Buildings.Fluid.HeatExchangers.DXCoils.UsersGuide</a>
for an explanation of the model.
</p>
<P>
Extends from <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</A> (Partial block for dry and wet coil conditions).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_Data_Generic.html#Buildings.Fluid.HeatExchangers.DXCoils.Data.Generic.DXCoil"
>DXCoil</A></TD><TD>datCoi</TD><TD>&nbsp;</TD><TD>Performance data</TD></TR>
<TR><TD>Boolean</TD><TD>variableSpeedCoil</TD><TD>&nbsp;</TD><TD>Flag, set to true for coil with variable speed</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Interfaces.Pa...</TD><TD>Medium model</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.IntegerInput"
>IntegerInput</A></TD><TD>stage</TD><TD>Stage of coil, or 0/1 for variable-speed coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>speRat</TD><TD>Speed ratio</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>m_flow</TD><TD>Air mass flow rate</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TEvaIn</TD><TD>Temperature of air entering the cooling coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>XEvaIn</TD><TD>Inlet air mass fraction</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>p</TD><TD>Pressure at inlet of coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>hEvaIn</TD><TD>Specific enthalpy of air entering the coil</TD></TR>
<TR><TD>input <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>TConIn</TD><TD>Outside air dry bulb temperature for an air cooled condenser or wetbulb temperature for an evaporative cooled condenser [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>EIR</TD><TD>Energy Input Ratio</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>Q_flow</TD><TD>Total cooling capacity [W]</TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>TADP</TD><TD>Dry bulb temperature of air at ADP [K]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>SHR</TD><TD>Sensible Heat Ratio: Ratio of sensible heat load to total heat load</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>mWat_flow</TD><TD>Mass flow rate of water condensed at cooling coil [kg/s]</TD></TR>
<TR><TD>output <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>XADP</TD><TD>Humidity mass fraction of air at  apparatus dew point</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> WetCoil <font color="darkgreen">&quot;Calculates wet coil condition &quot;</font>
  <font color="blue">extends </font><A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.PartialCoilCondition</A>;
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="../../msl/3.2/help/Modelica_Media_Interfaces_PartialCondensingGases.html#Modelica.Media.Interfaces.PartialCondensingGases"
>Modelica.Media.Interfaces.PartialCondensingGases</A> <font color="darkgreen">&quot;Medium model&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> TADP(
    quantity=&quot;Temperature&quot;,
    unit=&quot;K&quot;,
    min=273.15,
    max=373.15) <font color="darkgreen">&quot;Dry bulb temperature of air at ADP&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> SHR(
    min=0,
    max=1.0) <font color="darkgreen">
    &quot;Sensible Heat Ratio: Ratio of sensible heat load to total heat load&quot;</font>;
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> mWat_flow(
    quantity=&quot;MassFlowRate&quot;,
    unit=&quot;kg/s&quot;) <font color="darkgreen">&quot;Mass flow rate of water condensed at cooling coil&quot;</font>;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Buildings_Utilities_Psychrometrics.html#Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi"
>Buildings.Utilities.Psychrometrics.TWetBul_TDryBulXi</A> wetBul(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium) <font color="darkgreen">&quot;Calculates wet-bulb temperature&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.ApparatusDewPoint</A> appDewPt(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>datCoi=datCoi,
    <font color="blue">final </font>variableSpeedCoil=variableSpeedCoil) <font color="darkgreen">
    &quot;Calculates air properties at apparatus dew point (ADP) at existing air-flow conditions&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.SensibleHeatRatio</A> shr(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium) <font color="darkgreen">&quot;Calculates sensible heat ratio&quot;</font>;
  <A HREF="Buildings_Fluid_HeatExchangers_DXCoils_BaseClasses.html#Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation"
>Buildings.Fluid.HeatExchangers.DXCoils.BaseClasses.Condensation</A> conRat(
      <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium) <font color="darkgreen">&quot;Calculates rate of condensation&quot;</font>;
<font color="blue">protected </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.IntegerToBoolean"
>Modelica.Blocks.Math.IntegerToBoolean</A> onSwi(<font color="blue">final </font>threshold=1) <font color="darkgreen">
    &quot;On/off switch&quot;</font>;
<font color="blue">public </font>
  <A HREF="../../msl/3.2/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> XADP <font color="darkgreen">
    &quot;Humidity mass fraction of air at  apparatus dew point&quot;</font>;</textblock>
<font color="blue">equation </font>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(appDewPt.TADP, TADP);
  <font color="red">connect</font>(XEvaIn, appDewPt.XEvaIn);
  <font color="red">connect</font>(p, appDewPt.p);</textblock>

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(m_flow, appDewPt.m_flow);
  <font color="red">connect</font>(p, wetBul.p);
  <font color="red">connect</font>(XEvaIn, wetBul.Xi[1]);
  <font color="red">connect</font>(speRat, appDewPt.speRat);
  <font color="red">connect</font>(appDewPt.XADP, shr.XADP);
  <font color="red">connect</font>(appDewPt.hADP, shr.hADP);
  <font color="red">connect</font>(shr.SHR, SHR);
  <font color="red">connect</font>(p, shr.p);
  <font color="red">connect</font>(TEvaIn, wetBul.TDryBul);
  <font color="red">connect</font>(TEvaIn, shr.TEvaIn);
  <font color="red">connect</font>(hEvaIn, shr.hEvaIn);
  <font color="red">connect</font>(hEvaIn, appDewPt.hEvaIn);
  <font color="red">connect</font>(appDewPt.TADP, conRat.TDewPoi);
  <font color="red">connect</font>(conRat.mWat_flow, mWat_flow);
  <font color="red">connect</font>(shr.SHR, conRat.SHR);
  <font color="red">connect</font>(speShiQ_flow.y, conRat.Q_flow);
  <font color="red">connect</font>(speShiQ_flow.y, appDewPt.Q_flow);
  <font color="red">connect</font>(onSwi.y, shr.on);
  <font color="red">connect</font>(onSwi.u, stage);
  <font color="red">connect</font>(wetBul.TWetBul, cooCap.TEvaIn);
  <font color="red">connect</font>(appDewPt.XADP, XADP);
  <font color="red">connect</font>(appDewPt.stage, stage);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>WetCoil;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Wed May 15 09:44:19 2013.
</address></BODY>
</HTML>
