within Buildings.Fluid.Chillers.Validation;
model IndirectAbsorption_EnergyPlus
  "Validation with EnergyPlus model"
 package Medium = Buildings.Media.Water "Medium model";

  Absorption_Indirect_Steam
    absChi( redeclare package Medium1 = Medium,
            redeclare package Medium2 = Medium,
            per=per,
            allowFlowReversal1=true,
            allowFlowReversal2=true,
            m1_flow_nominal=mCon_flow_nominal,
            m2_flow_nominal=mEva_flow_nominal,
            show_T=true,
            dp1_nominal=200,
            dp2_nominal=200,
            tau1=30,
            tau2=30,
            homotopyInitialization=true,
    energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial,
    massDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial,
            T1_start=55 + 273.15,
            T2_start=12 + 273.15)
   "Absorption indirect chiller"
    annotation (Placement(transformation(extent={{32,-10},{52,10}})));
  parameter Data.AbsorptionIndirect.EnergyPlusAbsorptionChiller per
   "EnergyPlus chiller performance"
    annotation (Placement(transformation(extent={{98,-8},{118,12}})));
  parameter Modelica.SIunits.MassFlowRate mEva_flow_nominal=per.mEva_flow_nominal
    "Evaporator nominal mass flow rate";
  parameter Modelica.SIunits.MassFlowRate mCon_flow_nominal=per.mCon_flow_nominal
    "Condenser nominal mass flow rate";

    Sources.MassFlowSource_T conPum(
      use_m_flow_in=false,
      m_flow=mCon_flow_nominal,
      nPorts=1,
      use_T_in=true,
      redeclare package Medium = Medium)
    "Condenser water pump"
      annotation (
      Placement(transformation(
        extent={{13,-13},{-13,13}},
        rotation=180,
        origin={-41,87})));
    Sources.MassFlowSource_T evaPum(
      m_flow=mEva_flow_nominal,
      nPorts=1,
      use_T_in=true,
      redeclare package Medium = Medium)
    "Evaporator water pump"
      annotation (
      Placement(transformation(
        extent={{-12,-12},{12,12}},
        rotation=180,
        origin={90,-40})));
    Modelica.Fluid.Sources.FixedBoundary cooVol(redeclare package Medium =
               Medium, nPorts=1)
      "Volume for cooling load"
       annotation (Placement(transformation(extent={{-48,-92},{-28,-72}})));
    Modelica.Fluid.Sources.FixedBoundary heaVol(redeclare package Medium =
                Medium, nPorts=1)
      "Volume for heating load"
       annotation (Placement(transformation(extent={{118,74},{98,94}})));
    FixedResistances.PressureDrop res1(
      redeclare package Medium = Medium,
      m_flow_nominal=mCon_flow_nominal,
      dp_nominal=6000)
      "Flow resistance"
       annotation (Placement(transformation(extent={{64,74},{84,94}})));
    FixedResistances.PressureDrop res2(
      redeclare package Medium = Medium,
       m_flow_nominal=mEva_flow_nominal,
       dp_nominal=6000)
      "Flow resistance"
       annotation (Placement(transformation(extent={{-10,-92},{10,-72}})));
      Modelica.Blocks.Sources.TimeTable TEvaEnt(
    table=[0,279.8; 600,279.8; 1200,279.8; 1800,279.8; 2400,279.8; 3000,279.8; 3600,
        279.8; 4200,279.8; 4800,279.8; 5400,279.8; 6000,279.8; 6600,279.8; 7200,
        279.8; 7800,279.8; 8400,279.8; 9000,279.8; 9600,279.8; 10200,279.8; 10800,
        279.8; 11400,279.8; 12000,279.8; 12600,279.8; 13200,279.8; 13800,279.8;
        14400,279.8; 15000,279.8; 15600,279.8; 16200,279.8; 16800,279.8; 17400,279.8;
        18000,279.8; 18600,279.8; 19200,279.8; 19800,279.8; 20400,279.8; 21000,279.8;
        21600,279.8; 22200,279.8; 22800,279.8; 23400,279.8; 24000,279.8; 24600,279.8;
        25200,279.8; 25800,279.8; 26400,279.8; 27000,279.8; 27600,279.8; 28200,279.8;
        28800,279.8; 29400,279.8; 30000,279.8; 30600,279.8; 31200,279.8; 31800,279.8;
        32400,279.8; 33000,279.8; 33600,279.8; 34200,279.8; 34800,279.8; 35400,279.8;
        36000,279.8; 36600,279.8; 37200,279.8; 37800,279.8; 38400,279.8; 39000,279.8;
        39600,279.8; 40200,279.8; 40800,279.8; 41400,279.8; 42000,279.8; 42600,279.8;
        43200,279.8; 43800,279.8; 44400,279.8; 45000,279.8; 45600,279.8; 46200,279.8;
        46800,279.8; 47400,279.8; 48000,279.8; 48600,279.8; 49200,279.8; 49800,279.8;
        50400,279.8; 51000,279.8; 51600,279.8; 52200,279.8; 52800,279.8; 53400,279.8;
        54000,279.8; 54600,279.8; 55200,279.8; 55800,279.8; 56400,279.8; 57000,279.8;
        57600,279.8; 58200,279.8; 58800,279.8; 59400,279.8; 60000,279.8; 60600,279.8;
        61200,279.8; 61800,279.8; 62400,279.8; 63000,279.8; 63600,279.8; 64200,279.8;
        64800,279.8; 65400,279.8; 66000,279.8; 66600,279.8; 67200,279.8; 67800,279.8;
        68400,279.8; 69000,279.8; 69600,279.8; 70200,279.8; 70800,279.8; 71400,279.8;
        72000,279.8; 72600,279.8; 73200,279.8; 73800,279.8; 74400,279.8; 75000,279.8;
        75600,279.8; 76200,279.8; 76800,279.8; 77400,279.8; 78000,279.8; 78600,279.8;
        79200,279.8; 79800,279.8; 80400,279.8; 81000,279.8; 81600,279.8; 82200,279.8;
        82800,279.8; 83400,279.8; 84000,279.8; 84600,279.8; 85200,279.8; 85800,279.8;
        86400,279.8; 87000,289.7; 87600,289.7; 88200,289.7; 88800,289.7; 89400,289.7;
        90000,289.7; 90600,289.7; 91200,289.7; 91800,289.7; 92400,289.7; 93000,289.7;
        93600,289.7; 94200,289.7; 94800,289.7; 95400,289.7; 96000,289.7; 96600,289.7;
        97200,289.7; 97800,289.7; 98400,289.7; 99000,289.7; 99600,289.7; 100200,
        289.7; 100800,289.7; 101400,289.7; 102000,289.7; 102600,289.7; 103200,289.7;
        103800,289.7; 104400,289.7; 105000,289.7; 105600,289.7; 106200,289.7; 106800,
        289.7; 107400,289.7; 108000,289.7; 108600,289.7; 109200,289.7; 109800,289.7;
        110400,289.7; 111000,289.7; 111600,289.7; 112200,290.2; 112800,286.5; 113400,
        284.4; 114000,283.8; 114600,283.7; 115200,283.5; 115800,284.4; 116400,284;
        117000,284.5; 117600,284.7; 118200,284.9; 118800,285.1; 119400,285.2; 120000,
        285.3; 120600,285.5; 121200,285.7; 121800,285.8; 122400,286; 123000,286.1;
        123600,286.2; 124200,286.5; 124800,286.6; 125400,286.9; 126000,287; 126600,
        287.3; 127200,287.5; 127800,287.8; 128400,287.9; 129000,288.2; 129600,288.4;
        130200,288.5; 130800,288.7; 131400,288.7; 132000,288.8; 132600,288.8; 133200,
        288.9; 133800,289; 134400,289; 135000,289.2; 135600,289.2; 136200,289.4;
        136800,289.4; 137400,289.4; 138000,289.5; 138600,289.5; 139200,289.6; 139800,
        289.6; 140400,289.6; 141000,289.6; 141600,289.7; 142200,289.7; 142800,289.7;
        143400,289.7; 144000,289.8; 144600,289.8; 145200,289.8; 145800,289.8; 146400,
        289.7; 147000,289.7; 147600,289.7; 148200,289.7; 148800,289.7; 149400,289.7;
        150000,289.7; 150600,289.7; 151200,289.7],
        offset=0,startTime=0)
        "EnergyPlus: entering water temperature at the evaporator"
         annotation (Placement(transformation(extent={{66,-90},{86,-70}})));
      Modelica.Blocks.Sources.TimeTable absChiMod(table=[0,0; 600,0; 1200,0; 1800,
        0; 2400,0; 3000,0; 3600,0; 4200,0; 4800,0; 5400,0; 6000,0; 6600,0; 7200,
        0; 7800,0; 8400,0; 9000,0; 9600,0; 10200,0; 10800,0; 11400,0; 12000,0; 12600,
        0; 13200,0; 13800,0; 14400,0; 15000,0; 15600,0; 16200,0; 16800,0; 17400,
        0; 18000,0; 18600,0; 19200,0; 19800,0; 20400,0; 21000,0; 21600,0; 22200,
        0; 22800,0; 23400,0; 24000,0; 24600,0; 25200,0; 25800,0; 26400,0; 27000,
        0; 27600,0; 28200,0; 28800,0; 29400,0; 30000,0; 30600,0; 31200,0; 31800,
        0; 32400,0; 33000,0; 33600,0; 34200,0; 34800,0; 35400,0; 36000,0; 36600,
        0; 37200,0; 37800,0; 38400,0; 39000,0; 39600,0; 40200,0; 40800,0; 41400,
        0; 42000,0; 42600,0; 43200,0; 43800,0; 44400,0; 45000,0; 45600,0; 46200,
        0; 46800,0; 47400,0; 48000,0; 48600,0; 49200,0; 49800,0; 50400,0; 51000,
        0; 51600,0; 52200,0; 52800,0; 53400,0; 54000,0; 54600,0; 55200,0; 55800,
        0; 56400,0; 57000,0; 57600,0; 58200,0; 58800,0; 59400,0; 60000,0; 60600,
        0; 61200,0; 61800,0; 62400,0; 63000,0; 63600,0; 64200,0; 64800,0; 65400,
        0; 66000,0; 66600,0; 67200,0; 67800,0; 68400,0; 69000,0; 69600,0; 70200,
        0; 70800,0; 71400,0; 72000,0; 72600,0; 73200,0; 73800,0; 74400,0; 75000,
        0; 75600,0; 76200,0; 76800,0; 77400,0; 78000,0; 78600,0; 79200,0; 79800,
        0; 80400,0; 81000,0; 81600,0; 82200,0; 82800,0; 83400,0; 84000,0; 84600,
        0; 85200,0; 85800,0; 86400,0; 87000,0; 87600,0; 88200,0; 88800,0; 89400,
        0; 90000,0; 90600,0; 91200,0; 91800,0; 92400,0; 93000,0; 93600,0; 94200,
        0; 94800,0; 95400,0; 96000,0; 96600,0; 97200,0; 97800,0; 98400,0; 99000,
        0; 99600,0; 100200,0; 100800,0; 101400,0; 102000,0; 102600,0; 103200,0;
        103800,0; 104400,0; 105000,0; 105600,0; 106200,0; 106800,0; 107400,0; 108000,
        0; 108600,0; 109200,0; 109800,0; 110400,0; 111000,0; 111600,0; 112200,1;
        112800,1; 113400,1; 114000,1; 114600,1; 115200,1; 115800,1; 116400,1; 117000,
        1; 117600,1; 118200,1; 118800,1; 119400,1; 120000,1; 120600,1; 121200,1;
        121800,1; 122400,1; 123000,1; 123600,1; 124200,1; 124800,1; 125400,1; 126000,
        1; 126600,1; 127200,1; 127800,1; 128400,1; 129000,1; 129600,1; 130200,1;
        130800,1; 131400,1; 132000,1; 132600,1; 133200,1; 133800,1; 134400,1; 135000,
        1; 135600,1; 136200,1; 136800,1; 137400,1; 138000,1; 138600,1; 139200,1;
        139800,1; 140400,1; 141000,1; 141600,1; 142200,1; 142800,1; 143400,1; 144000,
        1; 144600,1; 145200,1; 145800,1; 146400,1; 147000,1; 147600,1; 148200,0;
        148800,0; 149400,0; 150000,0; 150600,0; 151200,0])
        "EnergyPlus absorption chiller mode control signal"
        annotation (Placement(transformation(extent={{-120,-10},{-100,10}})));
      Modelica.Blocks.Sources.TimeTable TEvaSet(
    table=[0,279.8; 600,279.8; 1200,279.8; 1800,279.8; 2400,279.8; 3000,279.8; 3600,
        279.8; 4200,279.8; 4800,279.8; 5400,279.8; 6000,279.8; 6600,279.8; 7200,
        279.8; 7800,279.8; 8400,279.8; 9000,279.8; 9600,279.8; 10200,279.8; 10800,
        279.8; 11400,279.8; 12000,279.8; 12600,279.8; 13200,279.8; 13800,279.8;
        14400,279.8; 15000,279.8; 15600,279.8; 16200,279.8; 16800,279.8; 17400,279.8;
        18000,279.8; 18600,279.8; 19200,279.8; 19800,279.8; 20400,279.8; 21000,279.8;
        21600,279.8; 22200,279.8; 22800,279.8; 23400,279.8; 24000,279.8; 24600,279.8;
        25200,279.8; 25800,279.8; 26400,279.8; 27000,279.8; 27600,279.8; 28200,279.8;
        28800,279.8; 29400,279.8; 30000,279.8; 30600,279.8; 31200,279.8; 31800,279.8;
        32400,279.8; 33000,279.8; 33600,279.8; 34200,279.8; 34800,279.8; 35400,279.8;
        36000,279.8; 36600,279.8; 37200,279.8; 37800,279.8; 38400,279.8; 39000,279.8;
        39600,279.8; 40200,279.8; 40800,279.8; 41400,279.8; 42000,279.8; 42600,279.8;
        43200,279.8; 43800,279.8; 44400,279.8; 45000,279.8; 45600,279.8; 46200,279.8;
        46800,279.8; 47400,279.8; 48000,279.8; 48600,279.8; 49200,279.8; 49800,279.8;
        50400,279.8; 51000,279.8; 51600,279.8; 52200,279.8; 52800,279.8; 53400,279.8;
        54000,279.8; 54600,279.8; 55200,279.8; 55800,279.8; 56400,279.8; 57000,279.8;
        57600,279.8; 58200,279.8; 58800,279.8; 59400,279.8; 60000,279.8; 60600,279.8;
        61200,279.8; 61800,279.8; 62400,279.8; 63000,279.8; 63600,279.8; 64200,279.8;
        64800,279.8; 65400,279.8; 66000,279.8; 66600,279.8; 67200,279.8; 67800,279.8;
        68400,279.8; 69000,279.8; 69600,279.8; 70200,279.8; 70800,279.8; 71400,279.8;
        72000,279.8; 72600,279.8; 73200,279.8; 73800,279.8; 74400,279.8; 75000,279.8;
        75600,279.8; 76200,279.8; 76800,279.8; 77400,279.8; 78000,279.8; 78600,279.8;
        79200,279.8; 79800,279.8; 80400,279.8; 81000,279.8; 81600,279.8; 82200,279.8;
        82800,279.8; 83400,279.8; 84000,279.8; 84600,279.8; 85200,279.8; 85800,279.8;
        86400,279.8; 87000,289.7; 87600,289.7; 88200,289.7; 88800,289.7; 89400,289.7;
        90000,289.7; 90600,289.7; 91200,289.7; 91800,289.7; 92400,289.7; 93000,289.7;
        93600,289.7; 94200,289.7; 94800,289.7; 95400,289.7; 96000,289.7; 96600,289.7;
        97200,289.7; 97800,289.7; 98400,289.7; 99000,289.7; 99600,289.7; 100200,
        289.7; 100800,289.7; 101400,289.7; 102000,289.7; 102600,289.7; 103200,289.7;
        103800,289.7; 104400,289.7; 105000,289.7; 105600,289.7; 106200,289.7; 106800,
        289.7; 107400,289.7; 108000,289.7; 108600,289.7; 109200,289.7; 109800,289.7;
        110400,289.7; 111000,289.7; 111600,289.7; 112200,279.8; 112800,279.8; 113400,
        279.8; 114000,279.8; 114600,279.8; 115200,279.8; 115800,280.7; 116400,279.8;
        117000,279.8; 117600,279.8; 118200,279.8; 118800,279.8; 119400,279.8; 120000,
        279.8; 120600,279.8; 121200,279.8; 121800,279.8; 122400,279.8; 123000,279.8;
        123600,279.8; 124200,279.8; 124800,279.8; 125400,279.8; 126000,279.8; 126600,
        279.8; 127200,279.8; 127800,279.8; 128400,279.8; 129000,279.8; 129600,279.8;
        130200,279.8; 130800,279.8; 131400,279.8; 132000,279.8; 132600,279.8; 133200,
        279.8; 133800,279.8; 134400,279.8; 135000,279.8; 135600,279.8; 136200,279.8;
        136800,279.8; 137400,279.8; 138000,279.8; 138600,279.8; 139200,279.8; 139800,
        279.8; 140400,279.8; 141000,279.8; 141600,279.8; 142200,279.8; 142800,279.8;
        143400,279.8; 144000,279.8; 144600,279.8; 145200,279.8; 145800,279.8; 146400,
        279.8; 147000,279.8; 147600,279.8; 148200,289.7; 148800,289.7; 149400,289.7;
        150000,289.7; 150600,289.7; 151200,289.7],
        offset=0,
        startTime=0)
        "EnergyPlus: leaving water temperature at the evaporator"
         annotation (Placement(transformation(extent={{-20,-40},{0,-20}})));
      Modelica.Blocks.Sources.TimeTable QEvaEP(table=[0,0; 600,0; 1200,0; 1800,0;
        2400,0; 3000,0; 3600,0; 4200,0; 4800,0; 5400,0; 6000,0; 6600,0; 7200,0;
        7800,0; 8400,0; 9000,0; 9600,0; 10200,0; 10800,0; 11400,0; 12000,0; 12600,
        0; 13200,0; 13800,0; 14400,0; 15000,0; 15600,0; 16200,0; 16800,0; 17400,
        0; 18000,0; 18600,0; 19200,0; 19800,0; 20400,0; 21000,0; 21600,0; 22200,
        0; 22800,0; 23400,0; 24000,0; 24600,0; 25200,0; 25800,0; 26400,0; 27000,
        0; 27600,0; 28200,0; 28800,0; 29400,0; 30000,0; 30600,0; 31200,0; 31800,
        0; 32400,0; 33000,0; 33600,0; 34200,0; 34800,0; 35400,0; 36000,0; 36600,
        0; 37200,0; 37800,0; 38400,0; 39000,0; 39600,0; 40200,0; 40800,0; 41400,
        0; 42000,0; 42600,0; 43200,0; 43800,0; 44400,0; 45000,0; 45600,0; 46200,
        0; 46800,0; 47400,0; 48000,0; 48600,0; 49200,0; 49800,0; 50400,0; 51000,
        0; 51600,0; 52200,0; 52800,0; 53400,0; 54000,0; 54600,0; 55200,0; 55800,
        0; 56400,0; 57000,0; 57600,0; 58200,0; 58800,0; 59400,0; 60000,0; 60600,
        0; 61200,0; 61800,0; 62400,0; 63000,0; 63600,0; 64200,0; 64800,0; 65400,
        0; 66000,0; 66600,0; 67200,0; 67800,0; 68400,0; 69000,0; 69600,0; 70200,
        0; 70800,0; 71400,0; 72000,0; 72600,0; 73200,0; 73800,0; 74400,0; 75000,
        0; 75600,0; 76200,0; 76800,0; 77400,0; 78000,0; 78600,0; 79200,0; 79800,
        0; 80400,0; 81000,0; 81600,0; 82200,0; 82800,0; 83400,0; 84000,0; 84600,
        0; 85200,0; 85800,0; 86400,0; 87000,0; 87600,0; 88200,0; 88800,0; 89400,
        0; 90000,0; 90600,0; 91200,0; 91800,0; 92400,0; 93000,0; 93600,0; 94200,
        0; 94800,0; 95400,0; 96000,0; 96600,0; 97200,0; 97800,0; 98400,0; 99000,
        0; 99600,0; 100200,0; 100800,0; 101400,0; 102000,0; 102600,0; 103200,0;
        103800,0; 104400,0; 105000,0; 105600,0; 106200,0; 106800,0; 107400,0; 108000,
        0; 108600,0; 109200,0; 109800,0; 110400,0; 111000,0; 111600,0; 112200,-8263;
        112800,-7514; 113400,-6764; 114000,-6148; 114600,-5893; 115200,-5710; 115800,
        -5541; 116400,-6475; 117000,-6830; 117600,-6911; 118200,-7026; 118800,-7083;
        119400,-7134; 120000,-7173; 120600,-7240; 121200,-7293; 121800,-7330; 122400,
        -7391; 123000,-7440; 123600,-7475; 124200,-7542; 124800,-7576; 125400,-7643;
        126000,-7683; 126600,-7746; 127200,-7805; 127800,-7856; 128400,-7889; 129000,
        -7935; 129600,-7978; 130200,-8003; 130800,-8031; 131400,-8042; 132000,-8048;
        132600,-8055; 133200,-8073; 133800,-8081; 134400,-8089; 135000,-8113; 135600,
        -8125; 136200,-8143; 136800,-8149; 137400,-8155; 138000,-8169; 138600,-8174;
        139200,-8176; 139800,-8180; 140400,-8183; 141000,-8187; 141600,-8190; 142200,
        -8194; 142800,-8197; 143400,-8201; 144000,-8205; 144600,-8208; 145200,-8208;
        145800,-8206; 146400,-8204; 147000,-8202; 147600,-8200; 148200,0; 148800,
        0; 149400,0; 150000,0; 150600,0; 151200,0])
        "EnergyPlus results: heat flow at the evaporator"
         annotation (Placement(transformation(extent={{-140,-90},{-120,-70}})));
      Modelica.Blocks.Sources.TimeTable QConEP(table=[0,0; 600,0; 1200,0; 1800,0;
        2400,0; 3000,0; 3600,0; 4200,0; 4800,0; 5400,0; 6000,0; 6600,0; 7200,0;
        7800,0; 8400,0; 9000,0; 9600,0; 10200,0; 10800,0; 11400,0; 12000,0; 12600,
        0; 13200,0; 13800,0; 14400,0; 15000,0; 15600,0; 16200,0; 16800,0; 17400,
        0; 18000,0; 18600,0; 19200,0; 19800,0; 20400,0; 21000,0; 21600,0; 22200,
        0; 22800,0; 23400,0; 24000,0; 24600,0; 25200,0; 25800,0; 26400,0; 27000,
        0; 27600,0; 28200,0; 28800,0; 29400,0; 30000,0; 30600,0; 31200,0; 31800,
        0; 32400,0; 33000,0; 33600,0; 34200,0; 34800,0; 35400,0; 36000,0; 36600,
        0; 37200,0; 37800,0; 38400,0; 39000,0; 39600,0; 40200,0; 40800,0; 41400,
        0; 42000,0; 42600,0; 43200,0; 43800,0; 44400,0; 45000,0; 45600,0; 46200,
        0; 46800,0; 47400,0; 48000,0; 48600,0; 49200,0; 49800,0; 50400,0; 51000,
        0; 51600,0; 52200,0; 52800,0; 53400,0; 54000,0; 54600,0; 55200,0; 55800,
        0; 56400,0; 57000,0; 57600,0; 58200,0; 58800,0; 59400,0; 60000,0; 60600,
        0; 61200,0; 61800,0; 62400,0; 63000,0; 63600,0; 64200,0; 64800,0; 65400,
        0; 66000,0; 66600,0; 67200,0; 67800,0; 68400,0; 69000,0; 69600,0; 70200,
        0; 70800,0; 71400,0; 72000,0; 72600,0; 73200,0; 73800,0; 74400,0; 75000,
        0; 75600,0; 76200,0; 76800,0; 77400,0; 78000,0; 78600,0; 79200,0; 79800,
        0; 80400,0; 81000,0; 81600,0; 82200,0; 82800,0; 83400,0; 84000,0; 84600,
        0; 85200,0; 85800,0; 86400,0; 87000,0; 87600,0; 88200,0; 88800,0; 89400,
        0; 90000,0; 90600,0; 91200,0; 91800,0; 92400,0; 93000,0; 93600,0; 94200,
        0; 94800,0; 95400,0; 96000,0; 96600,0; 97200,0; 97800,0; 98400,0; 99000,
        0; 99600,0; 100200,0; 100800,0; 101400,0; 102000,0; 102600,0; 103200,0;
        103800,0; 104400,0; 105000,0; 105600,0; 106200,0; 106800,0; 107400,0; 108000,
        0; 108600,0; 109200,0; 109800,0; 110400,0; 111000,0; 111600,0; 112200,23017;
        112800,20929; 113400,18845; 114000,17142; 114600,16443; 115200,15942; 115800,
        15438; 116400,18043; 117000,19027; 117600,19251; 118200,19571; 118800,19731;
        119400,19872; 120000,19980; 120600,20166; 121200,20314; 121800,20416; 122400,
        20587; 123000,20724; 123600,20820; 124200,21008; 124800,21103; 125400,21289;
        126000,21399; 126600,21577; 127200,21741; 127800,21883; 128400,21975; 129000,
        22102; 129600,22223; 130200,22293; 130800,22370; 131400,22401; 132000,22417;
        132600,22438; 133200,22488; 133800,22509; 134400,22532; 135000,22599; 135600,
        22632; 136200,22684; 136800,22698; 137400,22716; 138000,22755; 138600,22768;
        139200,22776; 139800,22784; 140400,22794; 141000,22804; 141600,22814; 142200,
        22824; 142800,22834; 143400,22844; 144000,22854; 144600,22864; 145200,22864;
        145800,22858; 146400,22851; 147000,22846; 147600,22842; 148200,0; 148800,
        0; 149400,0; 150000,0; 150600,0; 151200,0])
        "EnergyPlus results: heat flow at the condenser  "
        annotation (Placement(transformation(extent={{-84,-90},{-64,-70}})));
      Modelica.Blocks.Sources.TimeTable pumP(table=[0,0; 600,0; 1200,0; 1800,0;
        2400,0; 3000,0; 3600,0; 4200,0; 4800,0; 5400,0; 6000,0; 6600,0; 7200,0;
        7800,0; 8400,0; 9000,0; 9600,0; 10200,0; 10800,0; 11400,0; 12000,0; 12600,
        0; 13200,0; 13800,0; 14400,0; 15000,0; 15600,0; 16200,0; 16800,0; 17400,
        0; 18000,0; 18600,0; 19200,0; 19800,0; 20400,0; 21000,0; 21600,0; 22200,
        0; 22800,0; 23400,0; 24000,0; 24600,0; 25200,0; 25800,0; 26400,0; 27000,
        0; 27600,0; 28200,0; 28800,0; 29400,0; 30000,0; 30600,0; 31200,0; 31800,
        0; 32400,0; 33000,0; 33600,0; 34200,0; 34800,0; 35400,0; 36000,0; 36600,
        0; 37200,0; 37800,0; 38400,0; 39000,0; 39600,0; 40200,0; 40800,0; 41400,
        0; 42000,0; 42600,0; 43200,0; 43800,0; 44400,0; 45000,0; 45600,0; 46200,
        0; 46800,0; 47400,0; 48000,0; 48600,0; 49200,0; 49800,0; 50400,0; 51000,
        0; 51600,0; 52200,0; 52800,0; 53400,0; 54000,0; 54600,0; 55200,0; 55800,
        0; 56400,0; 57000,0; 57600,0; 58200,0; 58800,0; 59400,0; 60000,0; 60600,
        0; 61200,0; 61800,0; 62400,0; 63000,0; 63600,0; 64200,0; 64800,0; 65400,
        0; 66000,0; 66600,0; 67200,0; 67800,0; 68400,0; 69000,0; 69600,0; 70200,
        0; 70800,0; 71400,0; 72000,0; 72600,0; 73200,0; 73800,0; 74400,0; 75000,
        0; 75600,0; 76200,0; 76800,0; 77400,0; 78000,0; 78600,0; 79200,0; 79800,
        0; 80400,0; 81000,0; 81600,0; 82200,0; 82800,0; 83400,0; 84000,0; 84600,
        0; 85200,0; 85800,0; 86400,0; 87000,0; 87600,0; 88200,0; 88800,0; 89400,
        0; 90000,0; 90600,0; 91200,0; 91800,0; 92400,0; 93000,0; 93600,0; 94200,
        0; 94800,0; 95400,0; 96000,0; 96600,0; 97200,0; 97800,0; 98400,0; 99000,
        0; 99600,0; 100200,0; 100800,0; 101400,0; 102000,0; 102600,0; 103200,0;
        103800,0; 104400,0; 105000,0; 105600,0; 106200,0; 106800,0; 107400,0; 108000,
        0; 108600,0; 109200,0; 109800,0; 110400,0; 111000,0; 111600,0; 112200,150;
        112800,150; 113400,150; 114000,150; 114600,150; 115200,150; 115800,125;
        116400,150; 117000,150; 117600,150; 118200,150; 118800,150; 119400,150;
        120000,150; 120600,150; 121200,150; 121800,150; 122400,150; 123000,150;
        123600,150; 124200,150; 124800,150; 125400,150; 126000,150; 126600,150;
        127200,150; 127800,150; 128400,150; 129000,150; 129600,150; 130200,150;
        130800,150; 131400,150; 132000,150; 132600,150; 133200,150; 133800,150;
        134400,150; 135000,150; 135600,150; 136200,150; 136800,150; 137400,150;
        138000,150; 138600,150; 139200,150; 139800,150; 140400,150; 141000,150;
        141600,150; 142200,150; 142800,150; 143400,150; 144000,150; 144600,150;
        145200,150; 145800,150; 146400,150; 147000,150; 147600,150; 148200,0; 148800,
        0; 149400,0; 150000,0; 150600,0; 151200,0])
    "EnergyPlus results: chiller pump power"
         annotation (Placement(transformation(extent={{-114,-58},{-94,-38}})));
      Modelica.Blocks.Sources.TimeTable QGen(table=[0,0; 600,0; 1200,0; 1800,0;
        2400,0; 3000,0; 3600,0; 4200,0; 4800,0; 5400,0; 6000,0; 6600,0; 7200,0;
        7800,0; 8400,0; 9000,0; 9600,0; 10200,0; 10800,0; 11400,0; 12000,0; 12600,
        0; 13200,0; 13800,0; 14400,0; 15000,0; 15600,0; 16200,0; 16800,0; 17400,
        0; 18000,0; 18600,0; 19200,0; 19800,0; 20400,0; 21000,00; 21600,0; 22200,
        0; 22800,0; 23400,0; 24000,0; 24600,0; 25200,0; 25800,0; 26400,0; 27000,
        0; 27600,0; 28200,0; 28800,0; 29400,0; 30000,0; 30600,0; 31200,0; 31800,
        0; 32400,0; 33000,0; 33600,0; 34200,0; 34800,0; 35400,0; 36000,0; 36600,
        0; 37200,0; 37800,0; 38400,0; 39000,0; 39600,0; 40200,0; 40800,0; 41400,
        0; 42000,0; 42600,0; 43200,0; 43800,0; 44400,0; 45000,0; 45600,0; 46200,
        0; 46800,0; 47400,0; 48000,0; 48600,0; 49200,0; 49800,0; 50400,0; 51000,
        0; 51600,0; 52200,0; 52800,0; 53400,0; 54000,0; 54600,0; 55200,0; 55800,
        0; 56400,0; 57000,0; 57600,0; 58200,0; 58800,0; 59400,0; 60000,0; 60600,
        0; 61200,0; 61800,0; 62400,0; 63000,0; 63600,0; 64200,0; 64800,0; 65400,
        0; 66000,0; 66600,0; 67200,0; 67800,0; 68400,0; 69000,0; 69600,0; 70200,
        0; 70800,0; 71400,0; 72000,0; 72600,0; 73200,0; 73800,0; 74400,0; 75000,
        0; 75600,0; 76200,0; 76800,0; 77400,0; 78000,0; 78600,0; 79200,0; 79800,
        0; 80400,0; 81000,0; 81600,0; 82200,0; 82800,0; 83400,0; 84000,0; 84600,
        0; 85200,0; 85800,0; 86400,0; 87000,0; 87600,0; 88200,0; 88800,0; 89400,
        0; 90000,0; 90600,0; 91200,0; 91800,0; 92400,0; 93000,0; 93600,0; 94200,
        0; 94800,0; 95400,0; 96000,0; 96600,0; 97200,0; 97800,0; 98400,0; 99000,
        0; 99600,0; 100200,0; 100800,0; 101400,0; 102000,0; 102600,0; 103200,0;
        103800,0; 104400,0; 105000,0; 105600,0; 106200,0; 106800,0; 107400,0; 108000,
        0; 108600,0; 109200,0; 109800,0; 110400,0; 111000,0; 111600,0; 112200,14604;
        112800,13265; 113400,11930; 114000,10844; 114600,10400; 115200,10082; 115800,
        9772; 116400,11418; 117000,12047; 117600,12190; 118200,12395; 118800,12497;
        119400,12588; 120000,12657; 120600,12776; 121200,12871; 121800,12937; 122400,
        13046; 123000,13133; 123600,13195; 124200,13316; 124800,13377; 125400,13496;
        126000,13567; 126600,13681; 127200,13786; 127800,13877; 128400,13936; 129000,
        14017; 129600,14095; 130200,14140; 130800,14189; 131400,14209; 132000,14219;
        132600,14233; 133200,14265; 133800,14278; 134400,14293; 135000,14336; 135600,
        14357; 136200,14390; 136800,14400; 137400,14411; 138000,14436; 138600,14444;
        139200,14449; 139800,144550; 140400,14461; 141000,14467; 141600,14474; 142200,
        14480; 142800,14487; 143400,14493; 144000,14499; 144600,14506; 145200,14506;
        145800,14502; 146400,14498; 147000,14495; 147600,14492; 148200,0; 148800,
        0; 149400,0; 150000,0; 150600,0; 151200,0])
        "EnergyPlus results: heat flow at the generator "
         annotation (Placement(transformation(extent={{-112,-90},{-92,-70}})));
  Modelica.Blocks.Math.RealToBoolean realToBoolean(threshold=1)
    annotation (Placement(transformation(extent={{-52,10},{-32,-10}})));
  Modelica.Blocks.Sources.Constant TGenEnt(k=273.15 + 105)
    annotation (Placement(transformation(extent={{-20,40},{0,60}})));
     Modelica.Blocks.Sources.TimeTable TConEnt(table=[0,283; 600,283; 1200,283;
        1800,283; 2400,283; 3000,283; 3600,283; 4200,283; 4800,283; 5400,283; 6000,
        283; 6600,283; 7200,283; 7800,283; 8400,283; 9000,283; 9600,283; 10200,283;
        10800,283; 11400,283; 12000,283; 12600,283; 13200,283; 13800,283; 14400,
        283; 15000,283; 15600,283; 16200,283; 16800,283; 17400,283; 18000,283; 18600,
        283; 19200,283; 19800,283; 20400,283; 21000,283; 21600,283; 22200,283; 22800,
        283; 23400,283; 24000,283; 24600,283; 25200,283; 25800,283; 26400,283; 27000,
        283; 27600,283; 28200,283; 28800,283; 29400,283; 30000,283; 30600,283; 31200,
        283; 31800,283; 32400,283; 33000,283; 33600,283; 34200,283; 34800,283; 35400,
        283; 36000,283; 36600,283; 37200,283; 37800,283; 38400,283; 39000,283; 39600,
        283; 40200,283; 40800,283; 41400,283; 42000,283; 42600,283; 43200,283; 43800,
        283; 44400,283; 45000,283; 45600,283; 46200,283; 46800,283; 47400,283; 48000,
        283; 48600,283; 49200,283; 49800,283; 50400,283; 51000,283; 51600,283; 52200,
        283; 52800,283; 53400,283; 54000,283; 54600,283; 55200,283; 55800,283; 56400,
        283; 57000,283; 57600,283; 58200,283; 58800,283; 59400,283; 60000,283; 60600,
        283; 61200,283; 61800,283; 62400,283; 63000,283; 63600,283; 64200,283; 64800,
        283; 65400,283; 66000,283; 66600,283; 67200,283; 67800,283; 68400,283; 69000,
        283; 69600,283; 70200,283; 70800,283; 71400,283; 72000,283; 72600,283; 73200,
        283; 73800,283; 74400,283; 75000,283; 75600,283; 76200,283; 76800,283; 77400,
        283; 78000,283; 78600,283; 79200,283; 79800,283; 80400,283; 81000,283; 81600,
        283; 82200,283; 82800,283; 83400,283; 84000,283; 84600,283; 85200,283; 85800,
        283; 86400,283; 87000,303; 87600,303; 88200,303; 88800,303; 89400,303; 90000,
        303; 90600,303; 91200,303; 91800,303; 92400,303; 93000,303; 93600,303; 94200,
        303; 94800,303; 95400,303; 96000,303; 96600,303; 97200,303; 97800,303; 98400,
        303; 99000,303; 99600,303; 100200,303; 100800,303; 101400,303; 102000,303;
        102600,303; 103200,303; 103800,303; 104400,303; 105000,303; 105600,303;
        106200,303; 106800,303; 107400,303; 108000,303; 108600,303; 109200,303;
        109800,303; 110400,303; 111000,303; 111600,303; 112200,308; 112800,307;
        113400,306; 114000,305; 114600,305; 115200,305; 115800,305; 116400,306;
        117000,306; 117600,306; 118200,306; 118800,306; 119400,306; 120000,307;
        120600,307; 121200,307; 121800,307; 122400,307; 123000,307; 123600,307;
        124200,307; 124800,307; 125400,307; 126000,307; 126600,307; 127200,308;
        127800,308; 128400,308; 129000,308; 129600,308; 130200,308; 130800,308;
        131400,308; 132000,308; 132600,308; 133200,308; 133800,308; 134400,308;
        135000,308; 135600,308; 136200,308; 136800,308; 137400,308; 138000,308;
        138600,308; 139200,308; 139800,308; 140400,308; 141000,308; 141600,308;
        142200,308; 142800,308; 143400,308; 144000,308; 144600,308; 145200,308;
        145800,308; 146400,308; 147000,308; 147600,308; 148200,303; 148800,303;
        149400,303; 150000,303; 150600,303; 151200,303], offset=0)
       "EnergyPlus: entering  water temperature at the condenser"
        annotation (Placement(transformation(extent={{-120,74},{-100,94}})));
equation
  connect(absChi.port_a1, conPum.ports[1]) annotation (Line(points={{32,6},{24,6},
          {24,87},{-28,87}}, color={0,127,255}));
  connect(evaPum.ports[1], absChi.port_a2) annotation (Line(points={{78,-40},{70,
          -40},{70,-6},{52,-6}}, color={0,127,255}));
  connect(res1.port_a, absChi.port_b1) annotation (Line(points={{64,84},{58,84},
          {58,6},{52,6}}, color={0,127,255}));
  connect(res2.port_b, absChi.port_b2) annotation (Line(points={{10,-82},{24,-82},
          {24,-6},{32,-6}}, color={0,127,255}));
  connect(TEvaSet.y, absChi.TEvaSet) annotation (Line(points={{1,-30},{20,-30},
          {20,-8.9},{30.9,-8.9}},color={0,0,127}));
  connect(res2.port_a, cooVol.ports[1])
   annotation (Line(points={{-10,-82},{-28,-82}}, color={0,127,255}));
  connect(res1.port_b, heaVol.ports[1])
   annotation (Line(points={{84,84},{98,84}}, color={0,127,255}));
  connect(absChiMod.y, realToBoolean.u)
    annotation (Line(points={{-99,0},{-54,0}}, color={0,0,127}));
  connect(absChi.on, realToBoolean.y) annotation (Line(points={{30.9,0.1},{0,
          0.1},{0,0},{-31,0}}, color={255,0,255}));
  connect(absChi.TGenEnt, TGenEnt.y) annotation (Line(points={{30.7,7.9},{16,
          7.9},{16,50},{1,50}}, color={0,0,127}));
  connect(conPum.T_in, TConEnt.y) annotation (Line(points={{-56.6,81.8},{-78,81.8},
          {-78,84},{-99,84}}, color={0,0,127}));
  connect(evaPum.T_in, TEvaEnt.y) annotation (Line(points={{104.4,-44.8},{108,-44.8},
          {108,-80},{87,-80}}, color={0,0,127}));
   annotation (Icon(coordinateSystem(preserveAspectRatio=false, extent={{-100,
            -100},{100,100}}),
                         graphics={
        Ellipse(lineColor = {75,138,73},
                fillColor={255,255,255},
                fillPattern = FillPattern.Solid,
                extent={{-100,-102},{100,98}}),
        Polygon(lineColor = {0,0,255},
                fillColor = {75,138,73},
                pattern = LinePattern.None,
                fillPattern = FillPattern.Solid,
                points={{-30,64},{70,4},{-30,-56},{-30,64}})}),
                           Diagram(
        coordinateSystem(preserveAspectRatio=false, extent={{-140,-100},{120,100}})),
                 __Dymola_Commands(file= "modelica://Buildings/Resources/Scripts/Dymola/Fluid/Chillers/Validation/IndirectAbsorption_EnergyPlus.mos"
        "Simulate and plot"),
    experiment(
      Tolerance=1e-6, StopTime=151200),
  Documentation(info="<html>
<p>
This model validates the model
<a href=\"Buildings.Fluid.Chillers.Absorption_Indirect_Steam\">
Buildings.Fluid.Chillers.Absorption_Indirect_Steam</a>.

<p>
The EnergyPlus results were generated using the example file <code>IndirectAbsorptionChiller.idf</code>
from EnergyPlus 9.1, with a nominal cooling capacity of <i>10000</i> Watts.
</p>
</html>", revisions="<html>
<ul>
<li>
July 4, 2019, by Hagar Elarga:<br/>
First implementation.
</li>
</ul>
</html>"));
end IndirectAbsorption_EnergyPlus;
